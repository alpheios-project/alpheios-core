!function webpackUniversalModuleDefinition(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var a in r)("object"==typeof exports?exports:e)[a]=r[a]}}(window,(function(){return(()=>{var e={105:(e,t,r)=>{var a=r(43),s=r(432),n=s;n.v1=a,n.v4=s,e.exports=n},817:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function bytesToUuid(e,r){var a=r||0,s=t;return[s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]]].join("")}},630:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function whatwgRNG(){return t(r),r}}else{var a=new Array(16);e.exports=function mathRNG(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},43:(e,t,r)=>{var a,s,n=r(630),o=r(817),i=0,u=0;e.exports=function v1(e,t,r){var l=t&&r||0,c=t||[],g=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:s;if(null==g||null==p){var h=n();null==g&&(g=a=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=s=16383&(h[6]<<8|h[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:u+1,m=d-i+(f-u)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||d>i)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=d,u=f,s=p;var y=(1e4*(268435455&(d+=122192928e5))+f)%4294967296;c[l++]=y>>>24&255,c[l++]=y>>>16&255,c[l++]=y>>>8&255,c[l++]=255&y;var E=d/4294967296*1e4&268435455;c[l++]=E>>>8&255,c[l++]=255&E,c[l++]=E>>>24&15|16,c[l++]=E>>>16&255,c[l++]=p>>>8|128,c[l++]=255&p;for(var I=0;I<6;++I)c[l+I]=g[I];return t||o(c)}},432:(e,t,r)=>{var a=r(630),s=r(817);e.exports=function v4(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||s(o)}},194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Constants:()=>a,Definition:()=>ma,DefinitionSet:()=>DefinitionSet,Feature:()=>Feature,GrmFeature:()=>ka,FeatureType:()=>Ia,FeatureList:()=>ja,FeatureImporter:()=>ya,Inflection:()=>Ba,LanguageModelFactory:()=>Ra,HomonymGroup:()=>HomonymGroup,Homonym:()=>za,Lexeme:()=>Wa,Lemma:()=>Ga,LatinLanguageModel:()=>LatinLanguageModel,GreekLanguageModel:()=>GreekLanguageModel,ArabicLanguageModel:()=>ArabicLanguageModel,PersianLanguageModel:()=>PersianLanguageModel,GeezLanguageModel:()=>GeezLanguageModel,ChineseLanguageModel:()=>ChineseLanguageModel,SyriacLanguageModel:()=>SyriacLanguageModel,ResourceProvider:()=>fa,Translation:()=>Ua,PsEvent:()=>PsEvent,PsEventData:()=>PsEventData,TextQuoteSelector:()=>TextQuoteSelector,WordUsageExample:()=>WordUsageExample,Author:()=>Ha,TextWork:()=>qa,WordItem:()=>WordItem,WordList:()=>WordList,TreebankDataItem:()=>TreebankDataItem,Logger:()=>Logger,L10n:()=>L10n,MessageBundle:()=>MessageBundle});var a={};r.r(a),r.d(a,{CASE_ABESSIVE:()=>he,CASE_ABLATIVE:()=>de,CASE_ABSOLUTIVE:()=>fe,CASE_ACCUSATIVE:()=>me,CASE_ADDIRECTIVE:()=>ye,CASE_ADELATIVE:()=>Ee,CASE_ADESSIVE:()=>Ie,CASE_ADVERBIAL:()=>ve,CASE_ALLATIVE:()=>_e,CASE_ANTESSIVE:()=>we,CASE_APUDESSIVE:()=>be,CASE_AVERSIVE:()=>Ae,CASE_BENEFACTIVE:()=>Se,CASE_CARITIVE:()=>Fe,CASE_CAUSAL:()=>Ce,CASE_CAUSAL_FINAL:()=>Te,CASE_COMITATIVE:()=>Le,CASE_DATIVE:()=>De,CASE_DELATIVE:()=>Oe,CASE_DIRECT:()=>xe,CASE_DISTRIBUTIVE:()=>$e,CASE_DISTRIBUTIVE_TEMPORAL:()=>Ne,CASE_ELATIVE:()=>Me,CASE_EQUATIVE:()=>je,CASE_ERGATIVE:()=>Pe,CASE_ESSIVE:()=>Ve,CASE_ESSIVE_FORMAL:()=>Re,CASE_ESSIVE_MODAL:()=>ke,CASE_EVITATIVE:()=>Ue,CASE_EXESSIVE:()=>Ge,CASE_FINAL:()=>Be,CASE_FORMAL:()=>We,CASE_GENITIVE:()=>ze,CASE_ILLATIVE:()=>He,CASE_INELATIVE:()=>qe,CASE_INESSIVE:()=>Je,CASE_INSTRUCTIVE:()=>Ke,CASE_INSTRUMENTAL:()=>Ze,CASE_INSTRUMENTAL_COMITATIVE:()=>Qe,CASE_INTRANSITIVE:()=>Xe,CASE_LATIVE:()=>Ye,CASE_LOCATIVE:()=>et,CASE_MODAL:()=>tt,CASE_MULTIPLICATIVE:()=>rt,CASE_NOMINATIVE:()=>at,CASE_PARTITIVE:()=>st,CASE_PEGATIVE:()=>nt,CASE_PERLATIVE:()=>ot,CASE_POSSESSIVE:()=>it,CASE_POSTDIRECTIVE:()=>lt,CASE_POSTELATIVE:()=>ut,CASE_POSTESSIVE:()=>ct,CASE_POSTPOSITIONAL:()=>gt,CASE_PREPOSITIONAL:()=>pt,CASE_PRIVATIVE:()=>ht,CASE_PROLATIVE:()=>dt,CASE_PROSECUTIVE:()=>ft,CASE_PROXIMATIVE:()=>mt,CASE_SEPARATIVE:()=>yt,CASE_SOCIATIVE:()=>Et,CASE_SUBDIRECTIVE:()=>It,CASE_SUBELATIVE:()=>_t,CASE_SUBESSIVE:()=>vt,CASE_SUBLATIVE:()=>wt,CASE_SUPERDIRECTIVE:()=>bt,CASE_SUPERESSIVE:()=>At,CASE_SUPERLATIVE:()=>St,CASE_SUPPRESSIVE:()=>Ft,CASE_TEMPORAL:()=>Ct,CASE_TERMINATIVE:()=>Tt,CASE_TRANSLATIVE:()=>Lt,CASE_VIALIS:()=>Dt,CASE_VOCATIVE:()=>Ot,CLASS_DEMONSTRATIVE:()=>na,CLASS_GENERAL_RELATIVE:()=>ua,CLASS_INDEFINITE:()=>la,CLASS_INTENSIVE:()=>ca,CLASS_INTERROGATIVE:()=>ia,CLASS_PERSONAL:()=>ra,CLASS_POSSESSIVE:()=>sa,CLASS_RECIPROCAL:()=>ga,CLASS_REFLEXIVE:()=>aa,CLASS_RELATIVE:()=>oa,COMP_COMPARITIVE:()=>ge,COMP_POSITIVE:()=>ce,COMP_SUPERLATIVE:()=>pe,GEND_ANIMATE:()=>ne,GEND_ANIMATE_MASCULINE:()=>ue,GEND_COMMON:()=>se,GEND_FEMININE:()=>re,GEND_INANIMATE:()=>oe,GEND_INANIMATE_MASCULINE:()=>le,GEND_MASCULINE:()=>te,GEND_NEUTER:()=>ae,GEND_PERSONAL_MASCULINE:()=>ie,LANG_ARABIC:()=>g,LANG_CHINESE:()=>d,LANG_DIR_LTR:()=>o,LANG_DIR_RTL:()=>i,LANG_GEEZ:()=>h,LANG_GREEK:()=>c,LANG_LATIN:()=>l,LANG_PERSIAN:()=>p,LANG_SYRIAC:()=>f,LANG_UNDEFINED:()=>u,LANG_UNIT_CHAR:()=>n,LANG_UNIT_WORD:()=>s,MOOD_ADMIRATIVE:()=>xt,MOOD_COHORTATIVE:()=>$t,MOOD_CONDITIONAL:()=>Nt,MOOD_DECLARATIVE:()=>Mt,MOOD_DUBITATIVE:()=>Pt,MOOD_ENERGETIC:()=>Vt,MOOD_EVENTIVE:()=>Rt,MOOD_GENERIC:()=>kt,MOOD_GERUNDIVE:()=>jt,MOOD_HYPOTHETICAL:()=>Ut,MOOD_IMPERATIVE:()=>Gt,MOOD_INDICATIVE:()=>Bt,MOOD_INFERENTIAL:()=>Wt,MOOD_INFINITIVE:()=>zt,MOOD_INTERROGATIVE:()=>Ht,MOOD_JUSSIVE:()=>qt,MOOD_NEGATIVE:()=>Jt,MOOD_OPTATIVE:()=>Kt,MOOD_PARTICIPLE:()=>Zt,MOOD_PRESUMPTIVE:()=>Qt,MOOD_RENARRATIVE:()=>Xt,MOOD_SUBJUNCTIVE:()=>Yt,MOOD_SUPINE:()=>er,NRL_CARDINAL:()=>lr,NRL_DISTRIBUTIVE:()=>gr,NRL_ORDINAL:()=>cr,NUM_COLLECTIVE:()=>ir,NUM_DISTRIBUTIVE_PLURAL:()=>ur,NUM_DUAL:()=>ar,NUM_PAUCAL:()=>nr,NUM_PLURAL:()=>rr,NUM_SINGULAR:()=>tr,NUM_SINGULATIVE:()=>or,NUM_TRIAL:()=>sr,NURL_NUMERAL_ADVERB:()=>pr,ORD_1ST:()=>hr,ORD_2ND:()=>dr,ORD_3RD:()=>fr,ORD_4TH:()=>mr,ORD_5TH:()=>yr,ORD_6TH:()=>Er,ORD_7TH:()=>Ir,ORD_8TH:()=>vr,ORD_9TH:()=>_r,PARADIGM_CAT_KAYLO:()=>pa,PARADIGM_CAT_STATE:()=>ha,POFS_ADJECTIVE:()=>M,POFS_ADVERB:()=>P,POFS_ADVERBIAL:()=>V,POFS_ARTICLE:()=>R,POFS_CONJUNCTION:()=>k,POFS_DENOMINATIVE:()=>ee,POFS_EXCLAMATION:()=>j,POFS_GERUNDIVE:()=>Z,POFS_INTERJECTION:()=>U,POFS_NOUN:()=>G,POFS_NOUN_PROPER:()=>B,POFS_NUMERAL:()=>W,POFS_PARTICLE:()=>z,POFS_PREFIX:()=>H,POFS_PREPOSITION:()=>q,POFS_PRONOUN:()=>J,POFS_SUFFIX:()=>K,POFS_SUPINE:()=>Q,POFS_VERB:()=>X,POFS_VERB_PARTICIPLE:()=>Y,STR_LANG_CODE_AR:()=>_,STR_LANG_CODE_ARA:()=>v,STR_LANG_CODE_ENG:()=>N,STR_LANG_CODE_FA:()=>S,STR_LANG_CODE_FAS:()=>w,STR_LANG_CODE_FA_IR:()=>A,STR_LANG_CODE_GEZ:()=>F,STR_LANG_CODE_GRC:()=>I,STR_LANG_CODE_LA:()=>E,STR_LANG_CODE_LAT:()=>y,STR_LANG_CODE_PER:()=>b,STR_LANG_CODE_SYC:()=>O,STR_LANG_CODE_SYR:()=>x,STR_LANG_CODE_SYR_SYRJ:()=>$,STR_LANG_CODE_UNDEFINED:()=>m,STR_LANG_CODE_ZH:()=>T,STR_LANG_CODE_ZHO:()=>C,STR_LANG_CODE_ZH_HANS:()=>D,STR_LANG_CODE_ZH_HANT:()=>L,TENSE_AORIST:()=>wr,TENSE_FUTURE:()=>br,TENSE_FUTURE_PERFECT:()=>Ar,TENSE_IMPERFECT:()=>Sr,TENSE_PAST_ABSOLUTE:()=>Fr,TENSE_PERFECT:()=>Cr,TENSE_PLUPERFECT:()=>Tr,TENSE_PRESENT:()=>Lr,TYPE_IRREGULAR:()=>ea,TYPE_REGULAR:()=>ta,VKIND_COMPOUNDS_OF_TO_BE:()=>Or,VKIND_DEPONENT:()=>Rr,VKIND_IMPERSONAL:()=>Vr,VKIND_INTRANSITIVE:()=>Pr,VKIND_PERFECT_DEFINITE:()=>jr,VKIND_SEMIDEPONENT:()=>kr,VKIND_TAKING_ABLATIVE:()=>xr,VKIND_TAKING_DATIVE:()=>$r,VKIND_TAKING_GENITIVE:()=>Nr,VKIND_TO_BE:()=>Dr,VKIND_TRANSITIVE:()=>Mr,VOICE_ACTIVE:()=>Ur,VOICE_ADJUTATIVE:()=>Zr,VOICE_ANTIPASSIVE:()=>Hr,VOICE_APPLICATIVE:()=>Qr,VOICE_CAUSATIVE:()=>Kr,VOICE_CIRCUMSTANTIAL:()=>Xr,VOICE_DEPONENT:()=>Yr,VOICE_IMPERSONAL_PASSIVE:()=>Wr,VOICE_MEDIOPASSIVE:()=>Br,VOICE_MIDDLE:()=>zr,VOICE_PASSIVE:()=>Gr,VOICE_RECIPROCAL:()=>Jr,VOICE_REFLEXIVE:()=>qr});const s=Symbol("word"),n=Symbol("char"),o=Symbol("ltr"),i=Symbol("rtl"),u=Symbol("undefined"),l=Symbol("latin"),c=Symbol("greek"),g=Symbol("arabic"),p=Symbol("persian"),h=Symbol("ge'ez"),d=Symbol("chinese"),f=Symbol("syriac"),m="undefined",y="lat",E="la",I="grc",v="ara",_="ar",w="fas",b="per",A="fa-IR",S="fa",F="gez",C="zho",T="zh",L="zh-Hant",D="zh-Hans",O="syc",x="syr",$="syr-Syrj",N="eng",M="adjective",P="adverb",V="adverbial",R="article",k="conjunction",j="exclamation",U="interjection",G="noun",B="proper noun",W="numeral",z="particle",H="prefix",q="preposition",J="pronoun",K="suffix",Z="gerundive",Q="supine",X="verb",Y="verb participle",ee="denominative",te="masculine",re="feminine",ae="neuter",se="common",ne="animate",oe="inanimate",ie="personal masculine",ue="animate masculine",le="inanimate masculine",ce="positive",ge="comparative",pe="superlative",he="abessive",de="ablative",fe="absolutive",me="accusative",ye="addirective",Ee="adelative",Ie="adessive",ve="adverbial",_e="allative",we="antessive",be="apudessive",Ae="aversive",Se="benefactive",Fe="caritive",Ce="causal",Te="causal-final",Le="comitative",De="dative",Oe="delative",xe="direct",$e="distributive",Ne="distributive-temporal",Me="elative",Pe="ergative",Ve="essive",Re="essive-formal",ke="essive-modal",je="equative",Ue="evitative",Ge="exessive",Be="final",We="formal",ze="genitive",He="illative",qe="inelative",Je="inessive",Ke="instructive",Ze="instrumental",Qe="instrumental-comitative",Xe="intransitive",Ye="lative",et="locative",tt="modal",rt="multiplicative",at="nominative",st="partitive",nt="pegative",ot="perlative",it="possessive",ut="postelative",lt="postdirective",ct="postessive",gt="postpositional",pt="prepositional",ht="privative",dt="prolative",ft="prosecutive",mt="proximative",yt="separative",Et="sociative",It="subdirective",vt="subessive",_t="subelative",wt="sublative",bt="superdirective",At="superessive",St="superlative",Ft="suppressive",Ct="temporal",Tt="terminative",Lt="translative",Dt="vialis",Ot="vocative",xt="admirative",$t="cohortative",Nt="conditional",Mt="declarative",Pt="dubitative",Vt="energetic",Rt="eventive",kt="generic",jt="gerundive",Ut="hypothetical",Gt="imperative",Bt="indicative",Wt="inferential",zt="infinitive",Ht="interrogative",qt="jussive",Jt="negative",Kt="optative",Zt="participle",Qt="presumptive",Xt="renarrative",Yt="subjunctive",er="supine",tr="singular",rr="plural",ar="dual",sr="trial",nr="paucal",or="singulative",ir="collective",ur="distributive plural",lr="cardinal",cr="ordinal",gr="distributive",pr="numeral adverb",hr="1st",dr="2nd",fr="3rd",mr="4th",yr="5th",Er="6th",Ir="7th",vr="8th",_r="9th",wr="aorist",br="future",Ar="future perfect",Sr="imperfect",Fr="past absolute",Cr="perfect",Tr="pluperfect",Lr="present",Dr="to be",Or="compounds of to be",xr="taking ablative",$r="taking dative",Nr="taking genitive",Mr="transitive",Pr="intransitive",Vr="impersonal",Rr="deponent",kr="semideponent",jr="perfect definite",Ur="active",Gr="passive",Br="mediopassive",Wr="impersonal passive",zr="middle",Hr="antipassive",qr="reflexive",Jr="reciprocal",Kr="causative",Zr="adjutative",Qr="applicative",Xr="circumstantial",Yr="deponent",ea="irregular",ta="regular",ra="personal",aa="reflexive",sa="possessive",na="demonstrative",oa="relative",ia="interrogative",ua="general relative",la="indefinite",ca="intensive",ga="reciprocal",pa="kaylo",ha="state";var da=r(105);class ResourceProvider{constructor(e="",t="",r=new Map([["default",t]])){this.uri=e,this.rights=r,this.rights.has("default")||this.rights.set("default",t)}toString(){return this.rights.get("default")}toLocaleString(e){return this.rights.get(e)||this.rights.get("default")}static getProxy(e=null,t={}){return new Proxy(t,{get:function(t,r){return"provider"===r?e:t[r]}})}convertToJSONObject(){let e={};for(const[t,r]of this.rights.entries())e[t]=r;return{uri:this.uri,rights:e}}static readObject(e){const t=new Map;return e.rights&&Object.keys(e.rights).forEach(r=>{t.set(r,e.rights[r])}),new ResourceProvider(e.uri,"",t)}}const fa=ResourceProvider;class Definition{constructor(e,t,r,a){this.text=e,this.language=t,this.format=r,this.lemmaText=a,this.ID=(0,da.v4)()}static readObject(e){let t=new Definition(e.text,e.language,e.format,e.lemmaText);if(e.ID&&(t.ID=e.ID),e.provider){const r=fa.readObject(e.provider);return fa.getProxy(r,t)}return t}convertToJSONObject(){let e={text:this.text,language:this.language,format:this.format,lemmaText:this.lemmaText,ID:this.ID};return this.provider&&(e.provider=this.provider.convertToJSONObject()),e}}const ma=Definition;const ya=class FeatureImporter{constructor(e=[],t=!1){this.hash={};for(const t of e)this.map(t,t);return this.returnUnknown=t,this}map(e,t){if(!e)throw new Error("Imported value should not be empty.");if(!t)throw new Error("Library value should not be empty.");return this.hash[e]=t,this}has(e){return this.hash.hasOwnProperty(e)}get(e){if(this.has(e))return this.hash[e];if(this.returnUnknown)return e;throw new Error('A value "'+e+'" is not found in the importer.')}};let Ea;class Logger{constructor({verbose:e=!1,prepend:t=!0,trace:r=!1}={}){this._verboseMode=e,this._prependMode=t,this._traceMode=r}static getInstance(e={}){return Ea?(void 0!==e.verbose&&(console.info("Setting a verbose mode"),Ea.setVerboseMode(e.verbose)),void 0!==e.prepend&&(console.info("Setting a prepend mode"),Ea.setVerboseMode(e.prepend)),void 0!==e.trace&&(console.info("Setting a trace mode"),Ea.setTraceMode(e.trace))):Ea=new Logger(e),Ea}setVerboseMode(e){return this._verboseMode=e,this}setPrependMode(e){return this._prependMode=e,this}setTraceMode(e){return this._traceMode=e,this}verboseModeOn(){return this.setVerboseMode(!0),this}verboseModeOff(){return this.setVerboseMode(!1),this}prependModeOn(){return this.setPrependMode(!0),this}prependModeOff(){return this.setPrependMode(!1),this}traceModeOn(){return this.setTraceMode(!0),this}traceModeOff(){return this.setTraceMode(!1),this}error(...e){this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]="Alpheios error: "+e[0]),console.error(...e),this._traceMode&&console.trace()}warn(...e){this._verboseMode&&(this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]="Alpheios warn: "+e[0]),console.warn(...e),this._traceMode&&console.trace())}log(...e){this._verboseMode&&(this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]="Alpheios log: "+e[0]),console.log(...e),this._traceMode&&console.trace())}info(...e){this._verboseMode&&(this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]="Alpheios info: "+e[0]),console.info(...e),this._traceMode&&console.trace())}}class Feature{constructor(e,t,r,a=1,s=[]){if(!Feature.isAllowedType(e))throw new Error('Features of "'+e+'" type are not supported.');if(!t)throw new Error("Feature should have a non-empty value(s).");if(!r)throw new Error("No language ID is provided");this.type=e,this.languageID=r,this.sortOrder=a,this.allowedValues=s,this._data=Feature.dataValuesFromInput(t),this.sort()}static dataValuesFromInput(e){let t;return t=Array.isArray(e)?Array.isArray(e[0])?e:e.map((t,r)=>[t,e.length-r]):[[e,this.defaultSortOrder]],t.map(e=>({value:e[0],sortOrder:Number.parseInt(e[1])}))}static newFromFtr(e){}static get types(){return{word:"word",fullForm:"full form",hdwd:"headword",part:"part of speech",number:"number",case:"case",grmCase:"case",declension:"declension",gender:"gender",type:"type",class:"class",grmClass:"class",conjugation:"conjugation",comparison:"comparison",tense:"tense",voice:"voice",mood:"mood",person:"person",frequency:"frequency",meaning:"meaning",source:"source",footnote:"footnote",dialect:"dialect",note:"note",pronunciation:"pronunciation",age:"age",area:"area",geo:"geo",kind:"kind",derivtype:"derivtype",stemtype:"stemtype",morph:"morph",var:"var",radical:"radical",kaylo:"kaylo",state:"state"}}static isAllowedType(e){return Object.values(this.types).includes(""+e)}static get defaultSortOrder(){return 1}static get joinSeparator(){return" "}static get defaultImporterName(){return"default"}get allowsUnrestrictedValues(){return 0===this.allowedValues.length}sort(){this._data.sort((e,t)=>e.sortOrder!==t.sortOrder?t.sortOrder-e.sortOrder:e.value.localeCompare(t.value))}compareTo(e){return e?e._data[0].sortOrder-this._data[0].sortOrder:-1}get items(){return this._data}get value(){return this.values.join(this.constructor.joinSeparator)}get singleValue(){if(0!==this._data.length){if(this._data.length>1)throw new Error(Feature.errMsgs.NO_SINGLE_VALUE);return this._data[0].value}}get values(){return this._data.map(e=>e.value)}getValue(e){return this._data.find(t=>t.value===e)}get valQty(){return this._data.length}get isEmpty(){return 0===this.valQty}get isSingle(){return 1===this.valQty}get isMultiple(){return this.valQty>1}toString(){return this.value}hasValue(e){return this.values.includes(e)}hasValues(e){let t=!0;for(const r of e)t=t&&this.hasValue(r);return t}hasSomeValues(e){let t=!1;for(const r of e)t=t||this.hasValue(r);return t}get valuesUnrestricted(){return 0===this.allowedValues.length}isEqual(e){return e&&this.type===e.type&&Ra.compareLanguages(this.languageID,e.languageID)&&this.value===e.value}addValue(e,t=this.constructor.defaultSortOrder){return this.hasValue(e)?Logger.getInstance().warn(`Value "${e}" already exists. If you want to change it, use "getValue" to access it directly.`):(this._data.push({value:e,sortOrder:t}),this.sort()),this}addValues(e){const t=this.constructor.dataValuesFromInput(e),r=t.map(e=>e.value);return this.hasSomeValues(r)?Logger.getInstance().warn(`One or several values from "${r}" already exist. If you want to change it, use "getValue" to access a value directly.`):(this._data=this._data.concat(t),this.sort()),this}removeValue(e){Logger.getInstance().warn("This feature is not implemented yet")}createFeature(e,t=this.constructor.defaultSortOrder){return new Feature(this.type,[[e,t]],this.languageID,this.sortOrder,this.allowedValues)}createFeatures(e){return new Feature(this.type,e,this.languageID,this.sortOrder,this.allowedValues)}get ownFeatures(){return this.values.map(e=>new Feature(this.type,e,this.languageID,1,this.allowedValues))}getCopy(){const e=this._data.map(e=>[e.value,e.sortOrder]);return new Feature(this.type,e,this.languageID,this.sortOrder,this.allowedValues.slice())}addImporter(e=new ya,t=this.constructor.defaultImporterName){return this.importers||(this.importers=new Map),this.importers.set(t,e),e}getImporter(e=this.constructor.defaultImporterName){if(!this.importers||!this.importers.has(e))throw new Error(`Importer "${e}" does not exist`);return this.importers.get(e)}addFromImporter(e,t=this.constructor.defaultImporterName){if(!this.importers||!this.importers.has(t))throw new Error(`Importer "${t}" does not exist`);const r=this.importers.get(t);return e=this.constructor.dataValuesFromInput(e),this._data.push(...e.map(e=>({value:r.get(e.value),sortOrder:e.sortOrder}))),this.sort(),this}createFromImporter(e,t=this.constructor.defaultImporterName){if(!this.importers||!this.importers.has(t))throw new Error(`Importer "${t}" does not exist`);const r=this.importers.get(t);Array.isArray(e)||(e=[e]);let a=e.map(e=>r.get(e));return a=a.reduce((e,t)=>e.concat(t),[]),new Feature(this.type,a,this.languageID,this.sortOrder,this.allowedValues)}convertToJSONObject(){const e=this._data.map(e=>[e.value,e.sortOrder]);return{type:this.type,languageCode:Ra.getLanguageCodeFromId(this.languageID),sortOrder:this.sortOrder,allowedValues:this.allowedValues,data:e}}static readObject(e){const t=Ra.getLanguageIdFromCode(e.languageCode);return new Feature(e.type,e.data,t,e.sortOrder,e.allowedValues)}}Feature.errMsgs={NO_SINGLE_VALUE:"More than one value stored"};class FeatureType{constructor(e,t,r){if(!t||!Array.isArray(t))throw new Error("Values should be an array (or an empty array) of values.");if(!r)throw new Error("FeatureType constructor requires a language");this.type=e,this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Ra.getLanguageAttrs(r)),this._orderIndex=[],this._orderLookup={};for(const[e,r]of t.entries())if(this._orderIndex.push(r),Array.isArray(r))for(const t of r)this[t]=new Feature(this.type,t,this.languageID),this._orderLookup[t]=e;else this[r]=new Feature(this.type,r,this.languageID),this._orderLookup[r]=e}get language(){return Logger.getInstance().warn('Please use a "languageID" instead of a "language"'),this.languageCode}hasUnrestrictedValue(){return 1===this.orderedValues.length&&this.orderedValues[0]===FeatureType.UNRESTRICTED_VALUE}get(e,t=1){if(e)return new Feature(this.type,[[e,t]],this.languageID);throw new Error("A non-empty value should be provided.")}getValues(e){return new Feature(this.type,e,this.languageID)}getFromImporter(e,t){let r;try{r=this.importer[e].get(t)}catch(e){r=this.get(t)}return r}addImporter(e){if(!e)throw new Error("Importer should have a non-empty name.");return this.importer=this.importer||{},this.importer[e]=this.importer[e]||new ya,this.importer[e]}get orderedFeatures(){return this.orderedValues.map(e=>new Feature(this.type,e,this.languageID))}get orderedValues(){return this._orderIndex}get orderLookup(){return this._orderLookup}set order(e){if(!e||Array.isArray(e)&&0===e.length)throw new Error("A non-empty list of values should be provided.");Array.isArray(e)||(e=[e]);for(const t of e)if(Array.isArray(t))for(const e of t){if(!this.hasOwnProperty(e.value))throw new Error('Trying to order an element with "'+e.value+'" value that is not stored in a "'+this.type+'" type.');if(e.type!==this.type)throw new Error('Trying to order an element with type "'+e.type+'" that is different from "'+this.type+'".');if(!Ra.compareLanguages(e.languageID,this.languageID))throw new Error(`Trying to order an element with language "${e.languageID.toString()}" that is different from "${this.languageID.toString()}"`)}else{if(!this.hasOwnProperty(t.value))throw new Error('Trying to order an element with "'+t.value+'" value that is not stored in a "'+this.type+'" type.');if(t.type!==this.type)throw new Error('Trying to order an element with type "'+t.type+'" that is different from "'+this.type+'".');if(!Ra.compareLanguages(t.languageID,this.languageID))throw new Error(`Trying to order an element with language "${t.languageID.toString()}" that is different from "${this.languageID.toString()}"`)}this._orderLookup={},this._orderIndex=[];for(const[t,r]of e.entries())if(Array.isArray(r)){let e=[];for(const a of r)this._orderLookup[a.value]=t,e.push(a.value);this._orderIndex[t]=e}else this._orderLookup[r.value]=t,this._orderIndex[t]=r.value}}FeatureType.UNRESTRICTED_VALUE=Symbol("unrestricted");const Ia=FeatureType;const va=class InflectionGroupingKey{constructor(e,t,r={}){for(const r of t)this[r]=e[r];Object.assign(this,r)}hasFeatureValue(e,t){return!!this.hasOwnProperty(e)&&this[e].values.includes(t)}toString(){let e=[];for(const t of Object.getOwnPropertyNames(this).sort()){const r=this[t]instanceof Feature?this[t].values.sort().join(","):this[t];e.push(r)}return e.join(" ")}};const _a=class InflectionGroup{constructor(e,t=[],r=null){this.groupingKey=e,this.inflections=t}append(e){this.inflections.push(e)}};class LanguageModel{constructor(){this.context_backward=LanguageModel.contextBackward}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return s}get contextForward(){return Logger.getInstance().warn('Please use static "contextForward" instead'),this.constructor.contextForward}get contextBackward(){return Logger.getInstance().warn('Please use static "contextBackward" instead'),this.constructor.contextBackward}get direction(){return Logger.getInstance().warn('Please use static "direction" instead'),this.constructor.direction}get baseUnit(){return Logger.getInstance().warn('Please use static "baseUnit" instead'),this.constructor.baseUnit}get features(){return Logger.getInstance().warn('Please use individual "getFeatureType" or static "features" instead'),this.constructor.features}static get featureNames(){return this.featureValues.keys()}static typeFeature(e){if(this.typeFeatures.has(e))return this.typeFeatures.get(e);throw new Error(`Type feature "${e}" is not defined within "${this}"`)}static get typeFeatures(){Logger.getInstance().warn("This getter must be defined in a descendant class")}static get features(){let e={};for(const t of this.featureNames)e[t]=this.getFeature(t);return e}static get languageID(){return u}static get languageCode(){return m}static get languageCodes(){return[]}static get codes(){return Logger.getInstance().warn('Use static "languageCodes" instead'),this.languageCodes}get codes(){return Logger.getInstance().warn('Please use a static version of "codes" instead'),this.constructor.languageCodes}toCode(){return Logger.getInstance().warn('Please use a static "languageCode" instead'),this.constructor.languageCode}static toCode(){return Logger.getInstance().warn('Please use a static "languageCode" instead'),this.languageCode}static get featureValues(){return new Map([[Feature.types.part,[P,V,M,R,k,j,U,G,W,z,H,q,J,K,Q,X,Y]],[Feature.types.gender,[te,re,ae]],[Feature.types.type,[ta,ea]],[Feature.types.person,[hr,dr,fr]],[Feature.types.number,[tr,rr]],[Feature.types.age,[]],[Feature.types.area,[]],[Feature.types.source,[]],[Feature.types.frequency,[]],[Feature.types.geo,[]],[Feature.types.pronunciation,[]],[Feature.types.kind,[]],[Feature.types.comparison,[]],[Feature.types.morph,[]],[Feature.types.stemtype,[]],[Feature.types.derivtype,[]]])}static get sourceLanguage(){return Logger.getInstance().warn("Please use languageID directly"),this.languageID}get sourceLanguage(){return Logger.getInstance().warn("Please use languageID directly"),this.constructor.languageID}static getFeatureType(e){Logger.getInstance().warn("Please use getFeature instead");const t=this.featureValues;if(t.has(e))return new Ia(e,t.get(e),this.languageID);throw new Error(`Feature "${e}" is not defined`)}static getFeature(e){const t=this.featureValues;if(t.has(e)){const r=t.get(e);return new Feature(e,r,this.languageID,1,r)}throw new Error(`Feature "${e}" is not defined`)}_initializeFeatures(){const e={};for(const t of this.constructor.featureValues.keys())e[t]=this.constructor.getFeature(t);return e}grammarFeatures(){return Logger.getInstance().warn('Please use a static version of "grammarFeatures" instead'),this.constructor.grammarFeatures()}static grammarFeatures(){return[]}static canInflect(e){return!1}static supportsLanguage(e){return this.languageCodes.includes[e]}static hasTrailingDigit(e){return/^.+\d$/.test(e)}static normalizeTrailingDigit(e){return/^.+1$/.test(e)?e.substring(0,e.length-1):e}static needsNormalization(e){return Boolean(e.localeCompare(this.normalizeText(e)))}static hasUpperCase(e){return Boolean(e.localeCompare(e.toLocaleLowerCase()))}static normalizeText(e){return e}static alternateWordEncodings({word:e=null,preceding:t=null,following:r=null,encoding:a=null,preserveCase:s=!1,includeOriginal:n=!1}={}){return n?[e]:[]}static compareWords(e,t,r=!0,a={}){return r?(e=this.normalizeTrailingDigit(e),t=this.normalizeTrailingDigit(t),this.normalizeText(e)===this.normalizeText(t)):e===t}static getPunctuation(){return"\\-\\.,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’“”··\n\r"}getPunctuation(){return Logger.getInstance().warn('Please use a static version of "getPunctuation"'),this.constructor.getPunctuation()}toString(){return String(this.constructor.languageCode)}isEqual(e){return Ra.compareLanguages(this.languageID,e.languageID)}static hasCode(e){if(this.isLanguageCode(e))return this.languageCodes.includes(e);throw new Error(`Format of a "${e}" is incorrect`)}static isLanguageID(e){return"symbol"==typeof e}static isLanguageCode(e){return!LanguageModel.isLanguageID(e)}canInflect(e){return Logger.getInstance().warn('Please use a static version of "canInflect" instead'),this.constructor.canInflect(e)}static groupInflectionsForDisplay(e){let t=new Map;const r=this.aggregateInflectionsForDisplay(e);for(const e of r){const r=new va(e,[Feature.types.part,Feature.types.declension,Feature.types.dialect,Feature.types.comparison],{prefix:e.prefix,suffix:e.suffix,stem:e.stem}),a=r.toString();t.has(a)?t.get(a).append(e):t.set(a,new _a(r,[e]))}for(const e of t){const t=new Map;for(const r of e[1].inflections){let e,a=!1;r[Feature.types.grmCase]?(e=Feature.types.number,a=!0):e=r[Feature.types.tense]?Feature.types.tense:r[Feature.types.part]===X||r[Feature.types.part]===P?Feature.types.part:"misc";const s=new va(r,[e],{isCaseInflectionSet:a}),n=s.toString();t.has(n)?t.get(n).append(r):t.set(n,new _a(s,[r]))}for(const e of t){const t=new Map,r=new Map;for(const a of e[1].inflections){const e=a[Feature.types.grmCase]?Math.max(a[Feature.types.grmCase].items.map(e=>e.sortOrder)):1,s=new va(a,[Feature.types.tense,Feature.types.voice]),n=s.toString();t.has(n)?t.get(n).append(a):(t.set(n,new _a(s,[a],e)),r.set(n,e))}e[1].inflections=[];const a=Array.from(t.keys()).sort((e,t)=>{const a=r.get(e),s=r.get(t);return a>s?-1:s>a?1:0});for(const r of a)e[1].inflections.push(t.get(r))}for(const e of t){const t=e[1];for(const e of t.inflections){let t=new Map;for(const r of e.inflections){const e=new va(r,[Feature.types.grmCase,Feature.types.comparison,Feature.types.gender,Feature.types.number,Feature.types.person,Feature.types.tense,Feature.types.mood,Feature.types.voice]),a=e.toString();t.has(a)?t.get(a).append(r):t.set(a,new _a(e,[r]))}e.inflections=Array.from(t.values())}}e[1].inflections=Array.from(t.values())}return Array.from(t.values())}static aggregateInflectionsForDisplay(e){return e}groupInflectionsForDisplay(e){return Logger.getInstance().warn('Please use a static version of "groupInflectionsForDisplay" instead'),this.constructor.groupInflectionsForDisplay(e)}}const wa=LanguageModel;let ba=new Map,Aa=!1;class LatinLanguageModel extends wa{static get languageID(){return l}static get languageCode(){return y}static get languageCodes(){return[E,y]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return s}static get featureValues(){return new Map([...wa.featureValues,[Feature.types.grmClass,[ra,aa,sa,na,oa,ia]],[Feature.types.number,[tr,rr]],[Feature.types.grmCase,[at,ze,De,me,de,et,Ot]],[Feature.types.declension,[hr,dr,fr,mr,yr]],[Feature.types.tense,[Lr,Sr,br,Cr,Tr,Ar]],[Feature.types.voice,[Ur,Gr]],[Feature.types.mood,[Bt,Yt,Gt,Zt,er,jt,Zt,zt]],[Feature.types.conjugation,[hr,dr,fr,mr]]])}static get typeFeatures(){return Aa||this.initTypeFeatures(),ba}static initTypeFeatures(){for(const e of this.featureNames)ba.set(e,this.getFeature(e));Aa=!0}static grammarFeatures(){return[Feature.types.part,Feature.types.grmCase,Feature.types.mood,Feature.types.declension,Feature.types.tense,Feature.types.conjugation]}static canInflect(e){return!0}static normalizeText(e){return e&&(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\u00c0\u00c1\u00c2\u00c3\u00c4\u0100\u0102]/g,"A")).replace(/[\u00c8\u00c9\u00ca\u00cb\u0112\u0114]/g,"E")).replace(/[\u00cc\u00cd\u00ce\u00cf\u012a\u012c]/g,"I")).replace(/[\u00d2\u00d3\u00d4\u00df\u00d6\u014c\u014e]/g,"O")).replace(/[\u00d9\u00da\u00db\u00dc\u016a\u016c]/g,"U")).replace(/[\u00c6\u01e2]/g,"AE")).replace(/[\u0152]/g,"OE")).replace(/[\u00e0\u00e1\u00e2\u00e3\u00e4\u0101\u0103]/g,"a")).replace(/[\u00e8\u00e9\u00ea\u00eb\u0113\u0115]/g,"e")).replace(/[\u00ec\u00ed\u00ee\u00ef\u012b\u012d\u0129]/g,"i")).replace(/[\u00f2\u00f3\u00f4\u00f5\u00f6\u014d\u014f]/g,"o")).replace(/[\u00f9\u00fa\u00fb\u00fc\u016b\u016d]/g,"u")).replace(/[\u00e6\u01e3]/g,"ae")).replace(/[\u0153]/g,"oe")),e}static getPunctuation(){return".,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’“”··\n\r‌‍"}static getInflectionConstraints(e){let t={fullFormBased:!1,suffixBased:!1,pronounClassRequired:!1};return e.hasOwnProperty(Feature.types.part)?[X,Y,Q,Z].includes(e[Feature.types.part].value)?(t.fullFormBased=!0,t.suffixBased=!0):e[Feature.types.part].value===J?t.fullFormBased=!0:t.suffixBased=!0:Logger.getInstance().warn("Unable to set grammar: part of speech data is missing or is incorrect",e[Feature.types.part]),t}}let Sa=new Map,Fa=!1;class GreekLanguageModel extends wa{static get languageID(){return c}static get languageCode(){return I}static get languageCodes(){return[I]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return s}static get featureValues(){return new Map([...wa.featureValues,[Feature.types.grmClass,[na,ua,la,ca,ia,ra,sa,ga,aa,oa]],[Feature.types.number,[tr,rr,ar]],[Feature.types.grmCase,[at,ze,De,me,Ot]],[Feature.types.declension,[hr,dr,fr]],[Feature.types.tense,[Lr,Sr,br,Cr,Tr,Ar,wr]],[Feature.types.voice,[Gr,Ur,Br,zr]],[Feature.types.mood,[Bt,Yt,Kt,Gt]],[Feature.types.dialect,["attic","epic","doric"]]])}static get typeFeatures(){return Fa||this.initTypeFeatures(),Sa}static initTypeFeatures(){for(const e of this.featureNames)Sa.set(e,this.getFeature(e));Fa=!0}static canInflect(e){return!0}static grammarFeatures(){return[Feature.types.part,Feature.types.grmCase,Feature.types.mood,Feature.types.declension,Feature.types.tense,Feature.types.voice]}static normalizeText(e){return e&&(e=(e=e.normalize("NFC")).replace(/\u2019$/,"᾽")),e}static _tonosToOxia(e){return e.replace(/\u{03AC}/gu,"ά").replace(/\u{03AD}/gu,"έ").replace(/\u{03AE}/gu,"ή").replace(/\u{03AF}/gu,"ί").replace(/\u{03CC}/gu,"ό").replace(/\u{03CD}/gu,"ύ").replace(/\u{03CE}/gu,"ώ").replace(/\u{0390}/gu,"ΐ").replace(/\u{03B0}/gu,"ΰ")}static alternateWordEncodings({word:e=null,preceding:t=null,following:r=null,encoding:a=null,preserveCase:s=!1,includeOriginal:n=!1}={}){if(!e)return[];let o=GreekLanguageModel.normalizeText(e);s||(o=o.toLocaleLowerCase());const i=o.replace(/[\u{1FB0}\u{1FB1}]/gu,"α").replace(/[\u{1FB8}\u{1FB9}]/gu,"Α").replace(/[\u{1FD0}\u{1FD1}]/gu,"ι").replace(/[\u{1FD8}\u{1FD9}]/gu,"Ι").replace(/[\u{1FE0}\u{1FE1}]/gu,"υ").replace(/[\u{1FE8}\u{1FE9}]/gu,"Υ").replace(/[\u{00AF}\u{0304}\u{0306}]/gu,""),u=GreekLanguageModel._tonosToOxia(o),l=o.replace(/\u{0390}/gu,"ί").replace(/\u{03AA}/gu,"Ι").replace(/\u{03AB}/gu,"Υ").replace(/\u{03B0}/gu,"ύ").replace(/\u{03CA}/gu,"ι").replace(/\u{03CB}/gu,"υ").replace(/\u{1FD2}/gu,"ὶ").replace(/\u{1FD3}/gu,"ί").replace(/\u{1FD7}/gu,"ῖ").replace(/\u{1FE2}/gu,"ὺ").replace(/\u{1FE3}/gu,"ύ").replace(/\u{1FE7}/gu,"ῦ").replace(/\u{1FC1}/gu,"῀").replace(/\u{1FED}/gu,"`").replace(/\u{1FEE}/gu,"´").replace(/[\u{00A8}\u{0308}]/gu,""),c=o.normalize("NFD").replace(/[\u{300}\u{0301}\u{0304}\u{0306},\u{342}]/gu,"").normalize("NFC");let g=[];return"strippedDiaeresis"===a?g.push(l):"strippedDiacritics"===a?g.push(c):"strippedAll"===a?g.push(l.normalize("NFD").replace(/[\u{300}\u{0301}\u{0304}\u{0306},\u{342}\u{314}\u{313}\u{345}]/gu,"").normalize("NFC")):(g.push(i),u!==i&&g.push(u)),n||(g=g.filter(t=>t!==e)),g}static getPunctuation(){return'.,;:!?"(){}\\[\\]<>\\ ‐‑‒–—―‘“”··\n\r‌‍'}static getInflectionConstraints(e){const t={fullFormBased:!1,suffixBased:!1,pronounClassRequired:!1},r=[J,W,R];return e.hasOwnProperty(Feature.types.part)?r.includes(e[Feature.types.part].value)?t.fullFormBased=!0:t.suffixBased=!0:Logger.getInstance().warn("Unable to set grammar: part of speech data is missing or is incorrect",e[Feature.types.part]),t.pronounClassRequired=Ra.compareLanguages(GreekLanguageModel.languageID,e.languageID)&&e.hasOwnProperty(Feature.types.part)&&e[Feature.types.part].value===J,t}static getPronounClasses(e,t,r,a=!0){let s=new Set;const n=e.filter(e=>{let s=!1;return!e.value||e.features[Feature.types.hdwd]&&e.features[Feature.types.hdwd].value!==r||(s=GreekLanguageModel.compareWords(e.value,t,a)),s});for(const e of n)if(e.features.hasOwnProperty(Feature.types.grmClass))for(const t of e.features[Feature.types.grmClass].values)s.add(t);if(s.size>0)return new Feature(Feature.types.grmClass,Array.from(s),GreekLanguageModel.languageID)}static compareWords(e,t,r=!0,{normalizeTrailingDigit:a=!1}={}){let s=!1;if(r){a&&(e=this.normalizeTrailingDigit(e),t=this.normalizeTrailingDigit(t));const r=GreekLanguageModel.alternateWordEncodings({word:e,encoding:"strippedDiacritics",includeOriginal:!0}),n=GreekLanguageModel.alternateWordEncodings({word:t,encoding:"strippedDiacritics",includeOriginal:!0});for(let e=0;e<r.length&&(s=r[e]===n[e],!s);e++);s||(s=GreekLanguageModel.normalizeText(e)===GreekLanguageModel.normalizeText(t))}else s=e===t;return s}static isValidUnicode(e){return class GreekChars{static get chars(){return["`","¨","¯","´","ʼ","ʽ","˘","ͅ","Ά","Έ","Ή","Ί","Ό","Ύ","Ώ","ΐ","Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω","Ϊ","Ϋ","ά","έ","ή","ί","ΰ","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","ς","σ","τ","υ","φ","χ","ψ","ω","ϊ","ϋ","ό","ύ","ώ","Ϝ","ϝ","ἀ","ἁ","ἂ","ἃ","ἄ","ἅ","ἆ","ἇ","Ἀ","Ἁ","Ἂ","Ἃ","Ἄ","Ἅ","Ἆ","Ἇ","ἐ","ἑ","ἒ","ἓ","ἔ","ἕ","Ἐ","Ἑ","Ἒ","Ἓ","Ἔ","Ἕ","ἠ","ἡ","ἢ","ἣ","ἤ","ἥ","ἦ","ἧ","Ἠ","Ἡ","Ἢ","Ἣ","Ἤ","Ἥ","Ἦ","Ἧ","ἰ","ἱ","ἲ","ἳ","ἴ","ἵ","ἶ","ἷ","Ἰ","Ἱ","Ἲ","Ἳ","Ἴ","Ἵ","Ἶ","Ἷ","ὀ","ὁ","ὂ","ὃ","ὄ","ὅ","Ὀ","Ὁ","Ὂ","Ὃ","Ὄ","Ὅ","ὐ","ὑ","ὒ","ὓ","ὔ","ὕ","ὖ","ὗ","Ὑ","Ὓ","Ὕ","Ὗ","ὠ","ὡ","ὢ","ὣ","ὤ","ὥ","ὦ","ὧ","Ὠ","Ὡ","Ὢ","Ὣ","Ὤ","Ὥ","Ὦ","Ὧ","ὰ","ά","ὲ","έ","ὴ","ή","ὶ","ί","ὸ","ό","ὺ","ύ","ὼ","ώ","ᾀ","ᾁ","ᾂ","ᾃ","ᾄ","ᾅ","ᾆ","ᾇ","ᾈ","ᾉ","ᾊ","ᾋ","ᾌ","ᾍ","ᾎ","ᾏ","ᾐ","ᾑ","ᾒ","ᾓ","ᾔ","ᾕ","ᾖ","ᾗ","ᾘ","ᾙ","ᾚ","ᾛ","ᾜ","ᾝ","ᾞ","ᾟ","ᾠ","ᾡ","ᾢ","ᾣ","ᾤ","ᾥ","ᾦ","ᾧ","ᾨ","ᾩ","ᾪ","ᾫ","ᾬ","ᾭ","ᾮ","ᾯ","ᾰ","ᾱ","ᾲ","ᾳ","ᾴ","ᾶ","ᾷ","Ᾰ","Ᾱ","Ὰ","Ά","ᾼ","᾽","ι","῀","῁","ῂ","ῃ","ῄ","ῆ","ῇ","Ὲ","Έ","Ὴ","Ή","ῌ","῍","῎","῏","ῐ","ῑ","ῒ","ΐ","ῖ","ῗ","Ῐ","Ῑ","Ὶ","Ί","῝","῞","῟","ῠ","ῡ","ῢ","ΰ","ῤ","ῥ","ῦ","ῧ","Ῠ","Ῡ","Ὺ","Ύ","Ῥ","῭","΅","ῲ","ῳ","ῴ","ῶ","ῷ","Ὸ","Ό","Ὼ","Ώ","ῼ"]}}.chars.some(t=>e.includes(t))}}const Ca=new Map;let Ta=!1;class ArabicLanguageModel extends wa{static get languageID(){return g}static get languageCode(){return v}static get languageCodes(){return[v,_]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return i}static get baseUnit(){return s}static get typeFeatures(){return Ta||this.initTypeFeatures(),Ca}static initTypeFeatures(){for(const e of this.featureNames)Ca.set(e,this.getFeature(e));Ta=!0}static canInflect(e){return!1}static alternateWordEncodings({word:e=null,preceding:t=null,following:r=null,encoding:a=null,preserveCase:s=!1,includeOriginal:n=!1}={}){const o=e.replace(/[\u{064B}\u{064C}\u{064D}\u{0640}]/gu,""),i=o.replace(/[\u{0622}\u{0623}\u{0625}]/gu,"ا"),u=i.replace(/[\u{064E}\u{064F}\u{0650}\u{0670}\u{0671}]/gu,""),l=u.replace(/\u{0651}/gu,""),c=l.replace(/\u{0652}/gu,""),g=c.replace(/\u{0627}/gu,""),p=new Map([["tanwin",o],["hamza",i],["harakat",u],["shadda",l],["sukun",c],["alef",g]]);let h=[];return h=null!==a&&p.has(a)?[p.get(a)]:Array.from(p.values()),n||(h=h.filter(t=>t!==e)),h}static getPunctuation(){return".,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’“”··\n\r‌‍"}static aggregateInflectionsForDisplay(e){let t=[],r={[G]:[],[M]:[],[B]:[]};for(const a of e)a[Feature.types.morph]&&a[Feature.types.morph].value.match(/ADJ[uaiNK]/)?r[M].push(a):a[Feature.types.morph]&&a[Feature.types.morph].value.match(/NOUN[uaiNK]/)?r[G].push(a):a[Feature.types.morph]&&a[Feature.types.morph].value.match(/NOUN_PROP[uaiNK]/)?r[B].push(a):(a.example=null,t.push(a));for(const e of Object.keys(r)){1!==t.filter(t=>t[Feature.types.part].value===e).length&&t.push(...r[e])}return t}}let La=new Map,Da=!1;class PersianLanguageModel extends wa{static get languageID(){return p}static get languageCode(){return b}static get languageCodes(){return[b,w,S,A]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return i}static get baseUnit(){return s}static get typeFeatures(){return Da||this.initTypeFeatures(),La}static initTypeFeatures(){for(const e of this.featureNames)La.set(e,this.getFeature(e));Da=!0}static canInflect(e){return!1}static getPunctuation(){return"\\-\\.,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’“”··\n\r‌‍"}}const Oa=new Map;let xa=!1;class GeezLanguageModel extends wa{static get languageID(){return h}static get languageCode(){return F}static get languageCodes(){return[F]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return s}static get featureValues(){return new Map([...wa.featureValues,[Feature.types.grmCase,[]],[Feature.types.number,[]],[Feature.types.gender,[]],[Feature.types.mood,[]]])}static get typeFeatures(){return xa||this.initTypeFeatures(),Oa}static initTypeFeatures(){for(const e of this.featureNames)Oa.set(e,this.getFeature(e));xa=!0}static canInflect(e){return!1}static getPunctuation(){return"፡፨።፣፤፥፦፧፠,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’“”··\n\r‌‍"}}let $a=new Map,Na=!1;class ChineseLanguageModel extends wa{static get languageID(){return d}static get languageCode(){return C}static get languageCodes(){return[T,C,L,D]}static get contextForward(){return 5}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return n}static get featureValues(){return new Map([[Feature.types.fullForm,[]],[Feature.types.frequency,[]],[Feature.types.pronunciation,[]],[Feature.types.radical,[]]])}static get typeFeatures(){return Na||this.initTypeFeatures(),$a}static initTypeFeatures(){for(const e of this.featureNames)$a.set(e,this.getFeature(e));Na=!0}static getPunctuation(){return".,;:!?'\"(){}\\[\\]<>\\\n\r，、。「」《》‌‍"}static _isVowel(e){return["a","e","i","o","u"].includes(e)}static formatPinyin(e){const t=["ā","á","ǎ","à","a"],r=["ē","é","ě","è","e"],a=["ī","í","ǐ","ì","i"],s=["ō","ó","ǒ","ò","o"],n=["ū","ú","ǔ","ù","u"],o=["ǖ","ǘ","ǚ","ǜ","ü"];e=e.split(/(\d)/).map(e=>e.trim()).filter(e=>Boolean(e));let i=[];const u={1:0,2:1,3:2,4:3};for(let l=0;l<e.length;l++)if(l%2==0){let c=e[l];const g=void 0!==u[e[l+1]]?u[e[l+1]]:4;if(-1!==c.indexOf("a"))c=c.replace("a",t[g]);else if(-1!==c.indexOf("e"))c=c.replace("e",r[g]);else if(-1!==c.indexOf("ou"))c=c.replace("o",s[g]);else for(let e=c.length-1;e>=0;e--)if(this._isVowel(c[e])){switch(c[e]){case"i":c=c.replace("i",a[g]);break;case"o":c=c.replace("o",s[g]);break;case"u":c=e+1<c.length-1&&":"===c[e+1]?c.replace("u:",o[g]):c.replace("u",n[g]);break;default:Logger.getInstance().warn("some kind of weird vowel",c[e])}break}i.push(c)}return i.join(" ").trim()}}const Ma=new Map;let Pa=!1;class SyriacLanguageModel extends wa{static get languageID(){return f}static get languageCode(){return x}static get languageCodes(){return[x,O,$]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return i}static get baseUnit(){return s}static get featureValues(){return new Map([...wa.featureValues,[Feature.types.part,[P,V,M,R,k,j,U,G,W,z,H,q,J,K,Q,X,Y,ee]],[Feature.types.kaylo,[]],[Feature.types.state,[]]])}static get typeFeatures(){return Pa||this.initTypeFeatures(),Ma}static initTypeFeatures(){for(const e of this.featureNames)Ma.set(e,this.getFeature(e));Pa=!0}static canInflect(e){return!1}static getPunctuation(){return"܀܁܂܃܄܅܆܇܈܉܊܋܌܍܏.,;:!?'\"(){}\\[\\]<>/\\ ‐‑‒–—―‘’“”\n\r‌‍"}static groupInflectionsForDisplay(e){const t=new Map,r=this.aggregateInflectionsForDisplay(e);for(const e of r){const r=new va(e,[Feature.types.part,Feature.types.declension,Feature.types.kaylo,Feature.types.state,Feature.types.comparison],{prefix:e.prefix,suffix:e.suffix,stem:e.stem}),a=r.toString();t.has(a)?t.get(a).append(e):t.set(a,new _a(r,[e]))}for(const e of t){const t=new Map;for(const r of e[1].inflections){let e,a=!1;r[Feature.types.grmCase]?(e=Feature.types.number,a=!0):e=r[Feature.types.tense]?Feature.types.tense:r[Feature.types.part]===X||r[Feature.types.part]===P?Feature.types.part:"misc";const s=new va(r,[e],{isCaseInflectionSet:a}),n=s.toString();t.has(n)?t.get(n).append(r):t.set(n,new _a(s,[r]))}for(const e of t){const t=new Map,r=new Map;for(const a of e[1].inflections){const e=a[Feature.types.grmCase]?Math.max(a[Feature.types.grmCase].items.map(e=>e.sortOrder)):1,s=new va(a,[Feature.types.tense,Feature.types.voice]),n=s.toString();t.has(n)?t.get(n).append(a):(t.set(n,new _a(s,[a],e)),r.set(n,e))}e[1].inflections=[];const a=Array.from(t.keys()).sort((e,t)=>{const a=r.get(e),s=r.get(t);return a>s?-1:s>a?1:0});for(const r of a)e[1].inflections.push(t.get(r))}for(const e of t){const t=e[1];for(const e of t.inflections){const t=new Map;for(const r of e.inflections){const e=new va(r,[Feature.types.grmCase,Feature.types.comparison,Feature.types.gender,Feature.types.number,Feature.types.person,Feature.types.tense,Feature.types.mood,Feature.types.voice]),a=e.toString();t.has(a)?t.get(a).append(r):t.set(a,new _a(e,[r]))}e.inflections=Array.from(t.values())}}e[1].inflections=Array.from(t.values())}return Array.from(t.values())}}const Va=new Map([[E,LatinLanguageModel],[y,LatinLanguageModel],[I,GreekLanguageModel],[v,ArabicLanguageModel],[_,ArabicLanguageModel],[b,PersianLanguageModel],[F,GeezLanguageModel],[C,ChineseLanguageModel],[x,SyriacLanguageModel],[O,SyriacLanguageModel],[$,SyriacLanguageModel]]);class LanguageModelFactory{static supportsLanguage(e){return e="symbol"==typeof e?LanguageModelFactory.getLanguageCodeFromId(e):e,Va.has(e)}static availableLanguages(){let e=new Set;for(const t of Va.values())e.add(t.languageCode);return Array.from(e)}static getLanguageModel(e){const t=LanguageModelFactory.getLanguageCodeFromId(e);return LanguageModelFactory.getLanguageModelFromCode(t)}static getLanguageModelFromCode(e){return Va.has(e)?Va.get(e):wa}static getLanguageForCode(e=null){const t=Va.get(e);return t?new t:new wa}static getLanguageIdFromCode(e){for(const t of Va.values())if(t.hasCode(e))return t.languageID;return u}static getLanguageCodeFromId(e){for(const t of Va.values())if(t.languageID.toString()===e.toString())return t.languageCode;return m}static getLanguageAttrs(e){return"symbol"==typeof e?{languageID:e,languageCode:LanguageModelFactory.getLanguageCodeFromId(e)}:{languageID:LanguageModelFactory.getLanguageIdFromCode(e),languageCode:e}}static compareLanguages(e,t){return(e="symbol"==typeof e?LanguageModelFactory.getLanguageCodeFromId(e):e)===(t="symbol"==typeof t?LanguageModelFactory.getLanguageCodeFromId(t):t)}static isExperimentalLanguage(e){return[h,f,d].includes(e)}}const Ra=LanguageModelFactory;class DefinitionSet{constructor(e,t){this.lemmaWord=e,this.languageID=t,this.shortDefs=[],this.fullDefs=[]}static readObject(e){const t=Ra.getLanguageIdFromCode(e.languageCode);let r=new DefinitionSet(e.lemmaWord,t);for(const t of e.shortDefs)r.shortDefs.push(ma.readObject(t));for(const t of e.fullDefs)r.fullDefs.push(ma.readObject(t));return r}get hasShortDefs(){return this.shortDefs.length>0}get hasFullDefs(){return this.fullDefs.length>0}isEmpty(){return 0===this.shortDefs.length&&0===this.fullDefs.length}appendShortDefs(e){return e&&(Array.isArray(e)||(e=[e]),this.shortDefs=this.shortDefs.concat(e)),this.shortDefs}clearShortDefs(){this.shortDefs=[]}appendFullDefs(e){return e&&(Array.isArray(e)||(e=[e]),this.fullDefs=this.fullDefs.concat(e)),this.fullDefs}clearFullDefs(){this.fullDefs=[]}convertToJSONObject(){const e=Ra.getLanguageCodeFromId(this.languageID);return{lemmaWord:this.lemmaWord,languageCode:e,shortDefs:this.shortDefs.map(e=>e.convertToJSONObject()),fullDefs:this.fullDefs.map(e=>e.convertToJSONObject())}}}class GrmFeature{constructor(e,t,r,a=1){if(!GrmFeature.types.isAllowed(t))throw new Error('Features of "'+t+'" type are not supported.');if(!e)throw new Error("Feature should have a non-empty value.");if(!t)throw new Error("Feature should have a non-empty type.");if(!r)throw new Error("Feature constructor requires a language");this.value=e,this.type=t,this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Ra.getLanguageAttrs(r)),this.sortOrder=a}get language(){return Logger.getInstance().warn('Please use a "languageID" instead of a "language"'),this.languageCode}isEqual(e){if(Array.isArray(e.value)){if(!Array.isArray(this.value)||this.value.length!==e.value.length)return!1;let t=this.type===e.type&&Ra.compareLanguages(this.languageID,e.languageID);return t=t&&this.value.every((function(t,r){return t===e.value[r]})),t}return Ra.compareLanguages(this.languageID,e.languageID)&&this.type===e.type&&this.value===e.value}isSubsetof(e){Array.isArray(e)||(e=[e]);const t=e[0].languageID,r=e[0].type,a=e.map(e=>e.value);return!(!Ra.compareLanguages(this.languageID,t)||this.type!==r||!a.includes(this.value))}hasValue(e){return Array.isArray(this.value)?this.value.includes(e):this.value===e}toString(){return Array.isArray(this.value)?this.value.join(","):this.value}static toFeature(e){if(Array.isArray(e)){if(!(e[0]instanceof Feature)){const t=e[0].type,r=e[0].languageID,a=e.map(e=>e.value);return new Feature(t,a,r)}}else if(!(e instanceof Feature))return new Feature(e.type,e.value,e.languageID);return e}}GrmFeature.types={word:"word",part:"part of speech",number:"number",case:"case",grmCase:"case",declension:"declension",gender:"gender",type:"type",class:"class",grmClass:"class",conjugation:"conjugation",comparison:"comparison",tense:"tense",voice:"voice",mood:"mood",person:"person",frequency:"frequency",meaning:"meaning",source:"source",footnote:"footnote",dialect:"dialect",note:"note",pronunciation:"pronunciation",age:"age",area:"area",geo:"geo",kind:"kind",derivtype:"derivtype",stemtype:"stemtype",morph:"morph",var:"var",isAllowed(e){const t=""+e;return Object.values(this).includes(t)}};const ka=GrmFeature;const ja=class FeatureList{constructor(e=[]){this._features=[],this._types={},this.add(e)}add(e){if(!e||!Array.isArray(e))throw new Error("Features must be defined and must come in an array.");for(const t of e)this._features.push(t),this._types[t.type]=t}get items(){return this._features}forEach(e){this._features.forEach(e)}ofType(e){if(this.hasType(e))return this._types[e]}hasType(e){return this._types.hasOwnProperty(e)}};class Translation{constructor(e,t,r=[]){if(!e)throw new Error("Lemma should not be empty.");this.lemmaWord=e.word,this.languageCode=t,this.glosses=r}static readTranslationFromJSONList(e,t,r,a){if(!r||!Array.isArray(r))throw new Error("Recieved not proper translation list",r);const s=r.find((function(t){return t.in===e.word})),n=new Translation(e,t,s.translations);return a?fa.getProxy(a,n):n}static loadTranslations(e,t,r,a){e.addTranslation(this.readTranslationFromJSONList(e,t,r,a))}convertToJSONObject(){let e={languageCode:this.languageCode,translations:this.glosses};return this.provider&&(e.provider=this.provider.convertToJSONObject()),e}static readObject(e,t){const r=new Translation(t,e.languageCode,e.translations);if(e.provider){const t=fa.readObject(e.provider);return fa.getProxy(t,r)}return r}}const Ua=Translation;class Lemma{constructor(e,t,r=[],a={}){if(!e)throw new Error("Word should not be empty.");if(!t)throw new Error("Language should not be empty.");this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Ra.getLanguageAttrs(t)),this.word=e,this.principalParts=r,this.features={},this.ID=(0,da.v4)()}get language(){return Logger.getInstance().warn('Please use "languageID" instead of "language"'),this.languageCode}static readObject(e){const t=e.language?e.language:e.languageCode;let r=new Lemma(e.word,t,e.principalParts,e.pronunciation);return e.features&&e.features.length>0&&e.features.forEach(e=>{r.addFeature(Feature.readObject(e))}),e.translation&&(r.translation=Ua.readObject(e.translation,r)),r}convertToJSONObject(){let e=[];for(const t of Object.values(this.features))e.push(t.convertToJSONObject());let t={word:this.word,language:this.languageCode,principalParts:this.principalParts,features:e};return this.translation&&(t.translation=this.translation.convertToJSONObject()),t}set feature(e){if(Logger.getInstance().warn('Please use "addFeature" instead'),!e)throw new Error("feature data cannot be empty.");Array.isArray(e)||(e=[e]);const t=e[0].type;this.features[t]=[];for(const r of e){if(!(r instanceof Feature))throw new Error("feature data must be a Feature object.");if(!Ra.compareLanguages(r.languageID,this.languageID))throw new Error('Language "'+r.languageID.toString()+'" of a feature does not match a language "'+this.languageID.toString()+'" of a Lemma object.');this.features[t].push(r)}}addFeature(e){if(!e)throw new Error("feature data cannot be empty.");if(!(e instanceof Feature))throw new Error("feature data must be a Feature object.");if(!Ra.compareLanguages(e.languageID,this.languageID))throw new Error('Language "'+e.languageID.toString()+'" of a feature does not match a language "'+this.languageID.toString()+'" of a Lemma object.');this.features[e.type]=e}addFeatures(e){if(!Array.isArray(e))throw new Error("Features must be in an array");for(const t of e)this.addFeature(t)}addTranslation(e){if(!e)throw new Error("translation data cannot be empty.");if(-1===e.constructor.name.indexOf("Translation"))throw new Error("translation data must be a Translation object.");this.translation=e}isFullHomonym(e,{normalize:t=!1}={}){if(!this.features[Feature.types.part]||!e.features[Feature.types.part]||!this.features[Feature.types.part].isEqual(e.features[Feature.types.part]))return!1;return t?Ra.getLanguageModel(this.languageID).compareWords(this.word,e.word,!0,{normalizeTrailingDigit:!0}):this.word===e.word}disambiguate(e){const t=Ra.getLanguageModel(this.languageID);if(!t.compareWords(this.word,e.word,!0,{normalizeTrailingDigit:!0}))throw new Error("Words that differ cannot be disambiguated");const r=t.hasUpperCase(this.word);if(t.hasUpperCase(e.word))return e.word;if(r)return this.word;const a=t.needsNormalization(this.word);if(t.needsNormalization(e.word))return t.normalizeText(e.word);if(a)return t.normalizeText(this.word);t.hasTrailingDigit(this.word);return t.hasTrailingDigit(e.word)?e.word:this.word}get wordPrincipalParts(){const e=[...this.principalParts];return this.principalParts.includes(this.word)||e.push(this.word),e.join(", ")}}const Ga=Lemma;class Inflection{constructor(e=null,t,r=null,a=null,s=null){if(!e&&!r)throw new Error("At least stem or suffix must be defined");if(!t)throw new Error("Language should not be empty.");if(!Ra.supportsLanguage(t))throw new Error(`language ${t} not supported.`);this.stem=e,this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Ra.getLanguageAttrs(t)),this.model=Ra.getLanguageModel(this.languageID),this.features=new Set,this.constraints={fullFormBased:!1,suffixBased:!1,irregular:!1,obligatoryMatches:[],optionalMatches:[],morphologyMatches:[]},this.suffix=r,this.prefix=a,this.example=s,this.lemma=null}clone(){let e=new Inflection(this.stem,this.languageID,this.suffix,this.prefix,this.example);return e.addFeatures(Array.from(this.features).map(e=>this[e])),e.constraints={fullFormBased:this.constraints.fullFormBased,suffixBased:this.constraints.suffixBased,irregular:this.constraints.irregular,obligatoryMatches:this.constraints.obligatoryMatches?Array.from(this.constraints.obligatoryMatches):[],optionalMatches:this.constraints.obligatoryMatches?Array.from(this.constraints.obligatoryMatches):[],morphologyMatches:this.constraints.morphologyMatches?Array.from(this.constraints.morphologyMatches):[]},e.lemma=this.lemma,e}get form(){const e=this.stem?" - ":"";return this.getForm(e)}getForm(e=""){let t,r,a;const s=this.stem?this.stem:"";return this.model.direction===i?(r=this.prefix?e+this.prefix:"",a=this.suffix?this.suffix+e:"",t=a+s+r):(r=this.prefix?this.prefix+e:"",a=this.suffix?e+this.suffix:"",t=r+s+a),t}get language(){return Logger.getInstance().warn('Please use a "languageID" instead of a "language"'),this.languageCode}setConstraints(){if(this.model.hasOwnProperty("getInflectionConstraints")){const e=this.model.getInflectionConstraints(this);this.constraints=Object.assign(this.constraints,e)}}smartWordCompare(e,t,r={}){let a;r.hasOwnProperty("normalize")||(r.normalize=!0),r.hasOwnProperty("fuzzySuffix")||(r.fuzzySuffix=!1),a=this.constraints.irregular?"Suffix"===t?this.suffix:this[Feature.types.fullForm]?this[Feature.types.fullForm].value:this.form:this.constraints.suffixBased?this.suffix:this.form;let s=this.modelCompareWords(e,a,r.normalize);if(!s&&"Suffix"===t&&r.fuzzySuffix){const t=this.getForm();if(t&&e&&t.length>=e.length){const a=t.substring(t.length-e.length);s=this.modelCompareWords(e,a,r.normalize)}}return s}compareWithWord(e,t=!0){const r=this.constraints.suffixBased?this.suffix:this.form;return this.modelCompareWords(e,r,t)}modelCompareWords(e,t,r=!0){return Ra.getLanguageModel(this.languageID).compareWords(e,t,r)}disambiguatedBy(e){let t=!0;0!==this.features.length&&0!==e.features.length||(t=!1),e.features.length>this.features.length&&(t=!1);for(const r of e.features)if(!this[r]||!this[r].isEqual(e[r])){t=!1;break}return t}set feature(e){if(Logger.getInstance().warn('Please use "addFeature" instead.'),!e)throw new Error("Inflection feature data cannot be empty.");Array.isArray(e)||(e=[e]);const t=e[0].type;this[t]=[];for(const r of e){if(!(r instanceof Feature))throw new Error("Inflection feature data must be a Feature object.");if(!Ra.compareLanguages(r.languageID,this.languageID))throw new Error(`Language "${r.languageID.toString()}" of a feature does not match\n          a language "${this.languageID.toString()}" of an Inflection object.`);this[t].push(r),this.features.add(t)}}addFeature(e){if(!e)throw new Error("feature data cannot be empty.");if(!(e instanceof Feature))throw new Error("feature data must be a Feature object.");if(!Ra.compareLanguages(e.languageID,this.languageID))throw new Error('Language "'+e.languageID.toString()+'" of a feature does not match a language "'+this.languageID.toString()+'" of a Lemma object.');this[e.type]=e,this.features.add(e.type)}addFeatures(e){if(!Array.isArray(e))throw new Error("Features must be in an array");for(const t of e)this.addFeature(t)}hasFeatureValue(e,t){return!!this.hasOwnProperty(e)&&this[e].values.includes(t)}toString(){let e=`Inflection stem: ${this.stem}, prefix: ${this.prefix}, suffix: ${this.suffix}, langID: ${this.languageID.toString()}\n  features:  `;for(const t of this.features.values())e+=`${t}: ${this[t].value}, `;e+="\n  constraints:  ";for(const[t,r]of Object.entries(this.constraints))Array.isArray(r)?e+=`${t}: [${r}], `:e+=`${t}: ${r}, `;return e+="\n  example: "+this.example,e}static readObject(e,t){let r=new Inflection(e.stem,e.languageCode,e.suffix,e.prefix,e.example);return r.languageID=Ra.getLanguageIdFromCode(r.languageCode),e.features&&e.features.length>0&&e.features.forEach(e=>{r.addFeature(Feature.readObject(e))}),t&&(r.lemma=t),r}convertToJSONObject(){let e=[];for(const t of this.features.keys())e.push(this[t].convertToJSONObject());const t=Ra.getLanguageCodeFromId(this.languageID);return{stem:this.stem,languageCode:t,suffix:this.suffix,prefix:this.prefix,example:this.example,features:e}}}const Ba=Inflection;class Lexeme{constructor(e,t,r=null){if(!e)throw new Error("Lemma should not be empty.");if(!(e instanceof Ga))throw new Error("Lemma should be of Lemma object type.");if(!t)throw new Error("Inflections data should not be empty.");if(!Array.isArray(t))throw new Error("Inflection data should be provided in an array.");for(const e of t)if(!(e instanceof Ba))throw new Error("All inflection data should be of Inflection object type.");if(null!==r&&!(r instanceof DefinitionSet))throw new Error("Meaning should be of DefinitionSet object type.");this.lemma=e,this.altLemmas=[],this.inflections=[],this.addInflections(t),this.meaning=r||new DefinitionSet(this.lemma.word,this.lemma.languageID),this.disambiguated=!1}addInflection(e){e.lemma=this.lemma,e.lexeme=this,this.inflections.push(e)}addInflections(e){Array.isArray(e)||(e=[e]),e.forEach(e=>this.addInflection(e))}addAltLemma(e){this.altLemmas.push(e)}isPopulated(){return Object.entries(this.lemma.features).length>0||!this.meaning.isEmpty()||this.inflections.length>0}get hasShortDefs(){return Boolean(this.meaning&&this.meaning.hasShortDefs)}get hasFullDefs(){return Boolean(this.meaning&&this.meaning.hasFullDefs)}isFullHomonym(e,{normalize:t=!1}={}){return this.lemma.isFullHomonym(e.lemma,{normalize:t})}canBeDisambiguatedWith(e){const t=e.inflections.length||wa.hasTrailingDigit(e.lemma.word);return this.isFullHomonym(e,{normalize:!0})&&t}static disambiguate(e,t){let r=new Lexeme(e.lemma,e.inflections,e.meaning);if(e.canBeDisambiguatedWith(t)){r.disambiguated=!0,r.lemma.word=e.lemma.disambiguate(t.lemma);let a=[];for(const e of r.inflections)for(const r of t.inflections)e.disambiguatedBy(r)&&a.push(e);if(r.inflections=[],r.addInflections(a),0===r.inflections.length)for(const e of t.inflections)r.addInflection(e)}return r}getGroupedInflections(){return Ra.getLanguageModel(this.lemma.languageID).groupInflectionsForDisplay(this.inflections)}static readObject(e){const t=Ga.readObject(e.lemma);let r=[];for(const t of e.inflections)r.push(Ba.readObject(t));const a=new Lexeme(t,r);if(e.meaning&&(a.meaning=DefinitionSet.readObject(e.meaning)),e.provider){const t=fa.readObject(e.provider);return fa.getProxy(t,a)}return a}convertToJSONObject(e=!1){let t=[];this.inflections.forEach(e=>{t.push(e.convertToJSONObject())});const r={lemma:this.lemma.convertToJSONObject(),inflections:t};return e&&(r.meaning=this.meaning.convertToJSONObject()),this.provider&&(r.provider=this.provider.convertToJSONObject()),r}static getSortByTwoLemmaFeatures(e,t){return(r,a)=>{if(r.lemma.features[e]&&a.lemma.features[e]||!r.lemma.features[e]&&!a.lemma.features[[e]]){let s;return s=r.lemma.features[e]&&a.lemma.features[e]?r.lemma.features[e].compareTo(a.lemma.features[e]):0,0!==s?s:r.lemma.features[t]&&a.lemma.features[t]?r.lemma.features[t].compareTo(a.lemma.features[t]):r.lemma.features[t]&&!a.lemma.features[t]?-1:!r.lemma.features[t]&&a.lemma.features[t]?1:0}return r.lemma.features[e]&&!a.lemma.features[e]?-1:!r.lemma.features[e]&&a.lemma.features[e]?1:0}}}const Wa=Lexeme;class Homonym{constructor(e,t){if(!e||Array.isArray(e)&&0===e.length)throw new Error("Lexemes data should not be empty.");if(!Array.isArray(e))throw new Error("Lexeme data should be provided in an array.");for(const t of e)if(!(t instanceof Wa))throw new Error("All lexeme data should be of Lexeme object type.");this.lexemes=e,this.targetWord=t}static createSimpleForm(e,t,r=[]){const a=new Ga(e,t),s=new Wa(a,r);return new Homonym([s],e)}get hasShortDefs(){return Boolean(this.lexemes&&this.lexemes.some(e=>e.hasShortDefs))}get hasFullDefs(){return Boolean(this.lexemes&&this.lexemes.some(e=>e.hasFullDefs))}static readObject(e){let t=[];if(e.lexemes)for(const r of e.lexemes)t.push(Wa.readObject(r));else{const r=Ra.getLanguageIdFromCode(e.languageCode);t=[new Wa(new Ga(e.targetWord,r),[])]}const r=new Homonym(t,e.form||e.targetWord);return r.lemmasList=e.lemmasList,r}convertToJSONObject(e=!1){let t={lexemes:[],form:this.targetWord};for(const r of this.lexemes)t.lexemes.push(r.convertToJSONObject(e));return t}get language(){return Logger.getInstance().warn("Please use languageID instead"),Ra.getLanguageCodeFromId(this.languageID)}get languageID(){if(this.lexemes&&this.lexemes[0]&&this.lexemes[0].lemma&&this.lexemes[0].lemma.languageID)return this.lexemes[0].lemma.languageID;throw new Error("Homonym has not been initialized properly. Unable to obtain language ID information.")}get inflections(){let e=[];for(const t of this.lexemes)e=e.concat(t.inflections);return e}isDisambiguated(){return this.lexemes.filter(e=>e.disambiguated).length>0}static disambiguate(e,t){if(0===t.length)return e;const r=t.shift();let a=[],s=[];for(const t of r.lexemes){let r=!1;for(const s of e.lexemes){const e=s.canBeDisambiguatedWith(t)?Wa.disambiguate(s,t):s;s.isFullHomonym(t,{normalize:!0})&&(r=!0,e.disambiguated=!0),a.push(e)}r||(t.disambiguated=!0,s.push(t))}const n=new Homonym([...a,...s],e.targetWord);return Homonym.disambiguate(n,t)}}const za=Homonym;class HomonymGroup{constructor(e=[]){this._homonyms=e}get homonyms(){return this._homonyms}get hasHomonyms(){return this._homonyms.length>0}toHomonym(e,{disambiguated:t=!1}={}){if(!e)throw new Error(HomonymGroup.errors.NO_TARGET_WORD);const r=this._homonyms.map(e=>e.lexemes).flat();return t&&r.forEach(e=>{e.disambiguated=!0}),new za(r,e)}}HomonymGroup.errors={NO_TARGET_WORD:"Target word is not provided"};class PsEventData{constructor(e,t=""){this.name=e.name,this.publisher=e.publisher,this.caller=t}get description(){return this.caller?`${this.publisher}.${this.caller} -> [${this.name}]`:`${this.publisher} -> [${this.name}]`}}class PsEvent{constructor(e,t){this.name=e,this.publisher=t.name,this._subscribers=new Map}get subscribers(){return Array.from(this._subscribers.values())}sub(e){const t=(0,da.v4)();return this._subscribers.set(t,e),()=>{this._subscribers.delete(t)}}pub(e={},t=""){this._subscribers.forEach(r=>r(e,new PsEventData(this,t)))}unsubAll(){this._subscribers.clear()}}class TextQuoteSelector{constructor(e,t,r=null,a=null,s=null){this.languageCode=e,this.normalizedText=t,this.contextForward=6,this.contextBackward=6,this.text=this.normalizedText,this.prefix=r,this.suffix=a,this.source=s,this.ID=(0,da.v4)()}get contextHTML(){const e=`<span class="alpheios_worditem_incontext_add">${this.text}</span>`,t=this.prefix.replace(this.text,e),r=this.suffix.replace(this.text,e);return`${t} <span class="alpheios_worditem_incontext">${this.text}</span> ${r}`}static readObject(e){let t=new TextQuoteSelector(e.languageCode,e.target.selector.exact);return t.prefix=e.target.selector.prefix,t.suffix=e.target.selector.suffix,t.text=e.targetWord,t.source=e.target.source,t}isEqual(e){let t=`${this.prefix}${this.text}${this.suffix}`;t=t.trim();let r=`${e.prefix}${e.text}${e.suffix}`;return r=r.trim(),this.text===e.text&&this.source===e.source&&this.languageCode===e.languageCode&&t===r}}class WordUsageExample extends TextQuoteSelector{constructor(e,t,r,a,s,n){super(e,t),this.prefix=r,this.suffix=a,this.source=s,this.cit=n,this.author=null,this.textWork=null,this.passage=null}createContext(){return null}get htmlExample(){return`${this.prefix}<span class="alpheios_word_usage_list_item__text_targetword">${this.normalizedText}</span>${this.suffix}`}fullCit(e){if(!this.author&&!this.textWork&&!this.passage)return this.cit;let t="";return e?(t=this.author?this.author.title(e):".",t=t+" "+(this.textWork?this.textWork.title(e):"."),t=t+" "+this.formattedPassage):t=this.formattedAuthor+" "+this.formattedTextWork+" "+this.formattedPassage,t.trim()}get formattedAuthor(){return this.author?this.author.title():""}get formattedTextWork(){return this.textWork?this.textWork.title():""}get formattedPassage(){return this.passage}authorForSort(e){return this.author?this.author.title(e).toUpperCase():this.fullCit(e).toUpperCase()}textWorkForSort(e){return this.textWork?this.textWork.title(e).toUpperCase():this.fullCit(e).toUpperCase()}get prefixForSort(){const e=Ra.getLanguageModelFromCode(this.languageCode),t=this.prefix.replace(new RegExp("["+e.getPunctuation()+" ]","g")," ").toUpperCase().split(" ").filter(e=>e.length>0);return t[t.length-1]}get suffixForSort(){const e=Ra.getLanguageModelFromCode(this.languageCode);return this.suffix.replace(new RegExp("["+e.getPunctuation()+" ]","g"),"").toUpperCase()}}class Author{constructor(e,t,r){this.urn=e,this.titles=t,this.abbreviations=r}static get defaultLang(){return"eng"}title(e){return this.titles[e]?this.titles[e]:this.titles[Author.defaultLang]?this.titles[Author.defaultLang]:Object.values(this.titles).length>0?Object.values(this.titles)[0]:null}abbreviation(e){return this.abbreviations[e]?this.abbreviations[e]:this.abbreviations[Author.defaultLang]?this.abbreviations[Author.defaultLang]:Object.values(this.abbreviations).length>0?Object.values(this.abbreviations)[0]:null}}const Ha=Author;class TextWork{constructor(e,t,r,a){this.urn=t,this.titles=r,this.author=e,this.abbreviations=a}static get defaultLang(){return"eng"}static get defaultIDPrefix(){return"phi"}title(e){return this.titles[e]?this.titles[e]:this.titles[TextWork.defaultLang]?this.titles[TextWork.defaultLang]:Object.values(this.titles).length>0?Object.values(this.titles)[0]:null}abbreviation(e){return this.abbreviations[e]?this.abbreviations[e]:this.abbreviations[TextWork.defaultLang]?this.abbreviations[TextWork.defaultLang]:Object.values(this.abbreviations).length>0?Object.values(this.abbreviations)[0]:null}}const qa=TextWork;class WordItem{constructor(e={targetWord:null,languageCode:null,important:!1,currentSession:!0,context:[],homonym:{},createdDT:null,updatedDT:null,frequency:null}){if(this.version=1,this.targetWord=e.targetWord,this.languageCode=e.languageCode,!this.targetWord||!this.languageCode)throw new Error("Unable to construct a worditem without at least a targetWord and a languageCode");this.important=void 0!==e.important&&e.important,this.currentSession=void 0===e.currentSession||e.currentSession,this.context=e.context||[],this.homonym=e.homonym||{},this.createdDT=e.createdDT,this.updatedDT=e.updatedDT,this.frequency=e.frequency}static readObject(e){let t={},r=[];e.homonym&&(t=WordItem.readHomonym(e)),e.context&&(r=WordItem.readContext(e));return new WordItem({targetWord:e.targetWord,languageCode:e.languageCode,important:e.important,currentSession:e.currentSession,context:r,homonym:t})}static readHomonym(e){return za.readObject(e.homonym)}get hasTextQuoteSelectors(){return this.context.length>0}static readContext(e){let t=[];for(const r of e){const e=TextQuoteSelector.readObject(r);t.push(e)}return t}addContext(e){for(const t of e){0===this.context.filter(e=>e.isEqual(t)).length&&this.context.push(t)}}get lemmasList(){return this.homonym&&this.homonym.lexemes?this.homonym.lexemes.map(e=>e.lemma.word).filter((e,t,r)=>r.indexOf(e)===t).join(", "):""}merge(e){const t=["homonym","important","currentSession"];for(const r of t)this._emptyProp(r)&&!e._emptyProp(r)&&(this[r]=e[r])}_emptyProp(e){return!this[e]||"object"==typeof this[e]&&0===Object.keys(this[e]).length}get formattedContext(){let e={};for(const t of this.context)e[t.source]||(e[t.source]=[]),e[t.source].push(t);return e}}class WordList{constructor(e,t=[]){if(!e)throw new Error("Unable to construct a wordlist without a languagecode");this.languageCode=e,this.items={},t.forEach(e=>{this.addWordItem(e)})}get size(){return Object.keys(this.items).length}get values(){return Object.values(this.items)}get isEmpty(){return 0===Object.values(this.items).length}addWordItem(e){if(e.languageCode!==this.languageCode)throw new Error(`Language Code mismatch ${e.languageCode} !=== ${this.languageCode}`);const t=this.getWordItem(e.targetWord,!1);t&&e.merge(t);const r=this._makeItemKey(this.languageCode,e.targetWord);this.items[r]=e}deleteWordItem(e){const t=this._makeItemKey(this.languageCode,e),r=this.items[t];return r&&delete this.items[t],r}removeAllWordItems(){this.items={}}getWordItem(e,t=!0,r=null){const a=this._makeItemKey(this.languageCode,e);if(t&&!this.items[a]){const t=new WordItem({targetWord:e,languageCode:this.languageCode});r&&r.pub({dataObj:t,params:{segment:"common"}}),this.items[a]=t}return this.items[a]}_makeItemKey(e,t){return`${e}:${t.toLowerCase()}`}}class TreebankDataItem{constructor(e=null){this.version=0,this.app=null,this.sourceUrl=null,this.wordIds=[],this.sentenceId=null,this.doc=null;const t=e?e.closest("[data-alpheios_tb_app]"):document.querySelector("[data-alpheios_tb_app]");if(t){if(this.app=t.dataset.alpheios_tb_app,"perseids-treebank-template"!==this.app)throw new Error("Unsupported treebank application. This version of Alpheios only supports the perseids-treebank-template viewer app.");if(t.dataset.alpheios_tb_app_version&&(this.version=Number.parseInt(t.dataset.alpheios_tb_app_version,10),!Number.isInteger(this.version)))throw new Error("Treebank version is incorrect in: "+t.outerHTML);if(!t.dataset.alpheios_tb_app_url)throw new Error("Missing treebank source URL in: "+t.outerHTML);this.sourceUrl=t.dataset.alpheios_tb_app_url;const r=e?e.closest("[data-alpheios_tb_ref]"):document.querySelector("[data-alpheios_tb_ref]");let a,s=null;if(e?(s=e.closest("[data-alpheios_tb_word]"),a=s?s.closest("[data-alpheios_tb_sent]"):e.closest("[data-alpheios_tb_sent]")):a=document.querySelector("[data-alpheios_tb_sent]"),!r&&!s&&!a)throw new Error("An element does not have data-alpheios_tb_ref, data-alpheios_tb_word or data-alpheios_tb_sent attributes");if(s||a){if(!a)throw new Error("Sentence ID is undefined: there is no parent element with data-alpheios_tb_sent attribute");const e=s?s.closest("[data-alpheios_tb_doc]"):a.closest("[data-alpheios_tb_doc]");if(!e)throw new Error("Document ID is undefined: there is no parent element with data-alpheios_tb_doc attribute");s&&(this.wordIds=s.dataset.alpheios_tb_word.split(" ")),this.sentenceId=a.dataset.alpheios_tb_sent,this.doc=e.dataset.alpheios_tb_doc}else{const e=r.dataset.alpheios_tb_ref;let a;try{a=e.split(" ").map(e=>TreebankDataItem.parseReference(e))}catch(e){throw new Error(`${e.message} in: ${t.outerHTML}`)}a=a.filter(e=>e.doc===a[0].doc&&e.sent===a[0].sent),this.doc=a[0].doc,this.sentenceId=a[0].sent,this.wordIds=a.map(e=>e.word)}}if(!this.doc)throw new Error("Document data is missing");if(!this.sentenceId)throw new Error("Sentence data is missing")}static getTreebankData(e=null){try{return new TreebankDataItem(e)}catch(e){return null}}static parseReference(e){const[t,r]=e.split(/#/);if(!t||!r)throw new Error("Invalid treebank reference");const[a,s]=r.split(/-/);if(!a)throw new Error("Invalid treebank sent ID");if(!s)throw new Error("Invalid treebank word ID");return{doc:t,sent:a,word:s}}setWordData(e){this.wordIds=e}removeWordData(){this.wordIds=[]}get fullUrl(){return this.sourceUrl.replace("DOC",this.doc).replace("SENTENCE",this.sentenceId)}get docUrl(){return this.sourceUrl.replace("DOC",this.doc)}get provider(){return new URL(this.fullUrl).origin}get hasWordData(){return this.wordIds.length>0}get hasSentenceData(){return Boolean(this.sentenceId)}}var Ja,Ka;function isLiteralElement(e){return e.type===Ja.literal}function isArgumentElement(e){return e.type===Ja.argument}function isNumberElement(e){return e.type===Ja.number}function isDateElement(e){return e.type===Ja.date}function isTimeElement(e){return e.type===Ja.time}function isSelectElement(e){return e.type===Ja.select}function isPluralElement(e){return e.type===Ja.plural}function isPoundElement(e){return e.type===Ja.pound}function isTagElement(e){return e.type===Ja.tag}function isNumberSkeleton(e){return!(!e||"object"!=typeof e||0!==e.type)}function isDateTimeSkeleton(e){return!(!e||"object"!=typeof e||1!==e.type)}!function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(Ja||(Ja={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(Ka||(Ka={}));var Za,Qa=(Za=function(e,t){return(Za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}Za(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},Xa=function(e){function SyntaxError(t,r,a,s){var n=e.call(this)||this;return n.message=t,n.expected=r,n.found=a,n.location=s,n.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,SyntaxError),n}return Qa(SyntaxError,e),SyntaxError.buildMessage=function(e,t){function hex(e){return e.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+hex(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+hex(e)}))}function classEscape(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+hex(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+hex(e)}))}function describeExpectation(e){switch(e.type){case"literal":return'"'+literalEscape(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?classEscape(e[0])+"-"+classEscape(e[1]):classEscape(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function describeExpected(e){var t,r,a=e.map(describeExpectation);if(a.sort(),a.length>0){for(t=1,r=1;t<a.length;t++)a[t-1]!==a[t]&&(a[r]=a[t],r++);a.length=r}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function describeFound(e){return e?'"'+literalEscape(e)+'"':"end of input"}(t)+" found."},SyntaxError}(Error);var Ya=function peg$parse(e,t){t=void 0!==t?t:{};var r,a={},s={start:peg$parsestart},n=peg$parsestart,o=peg$literalExpectation("#",!1),i=peg$otherExpectation("tagElement"),u=peg$literalExpectation("<",!1),l=peg$literalExpectation("/>",!1),c=peg$literalExpectation(">",!1),peg$c15=function(e){return he.pop(),!0},g=peg$literalExpectation("</",!1),p=peg$otherExpectation("argumentElement"),h=peg$literalExpectation("{",!1),d=peg$literalExpectation("}",!1),f=peg$otherExpectation("numberSkeletonId"),m=/^['\/{}]/,y=peg$classExpectation(["'","/","{","}"],!1,!1),E={type:"any"},I=peg$otherExpectation("numberSkeletonTokenOption"),v=peg$literalExpectation("/",!1),_=peg$otherExpectation("numberSkeletonToken"),w=peg$literalExpectation("::",!1),peg$c41=function(e){return he.pop(),e.replace(/\s*$/,"")},b=peg$literalExpectation(",",!1),A=peg$literalExpectation("number",!1),peg$c46=function(e,t,r){return __assign({type:"number"===t?Ja.number:"date"===t?Ja.date:Ja.time,style:r&&r[2],value:e},insertLocation())},S=peg$literalExpectation("'",!1),F=/^[^']/,C=peg$classExpectation(["'"],!0,!1),T=/^[^a-zA-Z'{}]/,L=peg$classExpectation([["a","z"],["A","Z"],"'","{","}"],!0,!1),D=/^[a-zA-Z]/,O=peg$classExpectation([["a","z"],["A","Z"]],!1,!1),x=peg$literalExpectation("date",!1),$=peg$literalExpectation("time",!1),N=peg$literalExpectation("plural",!1),M=peg$literalExpectation("selectordinal",!1),P=peg$literalExpectation("offset:",!1),V=peg$literalExpectation("select",!1),R=peg$literalExpectation("=",!1),k=peg$otherExpectation("whitespace"),j=/^[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,U=peg$classExpectation([["\t","\r"]," ",""," "," ",[" "," "],"\u2028","\u2029"," "," ","　"],!1,!1),G=peg$otherExpectation("syntax pattern"),B=/^[!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,W=peg$classExpectation([["!","/"],[":","@"],["[","^"],"`",["{","~"],["¡","§"],"©","«","¬","®","°","±","¶","»","¿","×","÷",["‐","‧"],["‰","‾"],["⁁","⁓"],["⁕","⁞"],["←","⑟"],["─","❵"],["➔","⯿"],["⸀","⹿"],["、","〃"],["〈","〠"],"〰","﴾","﴿","﹅","﹆"],!1,!1),z=peg$otherExpectation("optional whitespace"),H=peg$otherExpectation("number"),q=peg$literalExpectation("-",!1),J=(peg$otherExpectation("apostrophe"),peg$otherExpectation("double apostrophes")),K=peg$literalExpectation("''",!1),Z=peg$literalExpectation("\n",!1),Q=peg$otherExpectation("argNameOrNumber"),X=peg$otherExpectation("validTag"),Y=peg$otherExpectation("argNumber"),ee=peg$literalExpectation("0",!1),te=/^[1-9]/,re=peg$classExpectation([["1","9"]],!1,!1),ae=/^[0-9]/,se=peg$classExpectation([["0","9"]],!1,!1),ne=peg$otherExpectation("argName"),oe=peg$otherExpectation("tagName"),ie=0,ue=0,le=[{line:1,column:1}],ce=0,ge=[],pe=0;if(void 0!==t.startRule){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');n=s[t.startRule]}function text(){return e.substring(ue,ie)}function location(){return peg$computeLocation(ue,ie)}function error(e,t){throw function peg$buildSimpleError(e,t){return new Xa(e,[],"",t)}(e,t=void 0!==t?t:peg$computeLocation(ue,ie))}function peg$literalExpectation(e,t){return{type:"literal",text:e,ignoreCase:t}}function peg$classExpectation(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function peg$otherExpectation(e){return{type:"other",description:e}}function peg$computePosDetails(t){var r,a=le[t];if(a)return a;for(r=t-1;!le[r];)r--;for(a={line:(a=le[r]).line,column:a.column};r<t;)10===e.charCodeAt(r)?(a.line++,a.column=1):a.column++,r++;return le[t]=a,a}function peg$computeLocation(e,t){var r=peg$computePosDetails(e),a=peg$computePosDetails(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:a.line,column:a.column}}}function peg$fail(e){ie<ce||(ie>ce&&(ce=ie,ge=[]),ge.push(e))}function peg$buildStructuredError(e,t,r){return new Xa(Xa.buildMessage(e,t),e,t,r)}function peg$parsestart(){return peg$parsemessage()}function peg$parsemessage(){var e,t;for(e=[],t=peg$parsemessageElement();t!==a;)e.push(t),t=peg$parsemessageElement();return e}function peg$parsemessageElement(){var t;return(t=function peg$parseliteralElement(){var e,t;e=ie,(t=peg$parsemessageText())!==a&&(ue=e,r=t,t=__assign({type:Ja.literal,value:r},insertLocation()));var r;return e=t}())===a&&(t=function peg$parseargumentElement(){var t,r,s,n;pe++,t=ie,123===e.charCodeAt(ie)?(r="{",ie++):(r=a,0===pe&&peg$fail(h));r!==a&&peg$parse_()!==a&&(s=peg$parseargNameOrNumber())!==a&&peg$parse_()!==a?(125===e.charCodeAt(ie)?(n="}",ie++):(n=a,0===pe&&peg$fail(d)),n!==a?(ue=t,o=s,r=__assign({type:Ja.argument,value:o},insertLocation()),t=r):(ie=t,t=a)):(ie=t,t=a);var o;pe--,t===a&&(r=a,0===pe&&peg$fail(p));return t}())===a&&(t=function peg$parsesimpleFormatElement(){var t;(t=function peg$parsenumberFormatElement(){var t,r,s,n,o,i,u,l,c;t=ie,123===e.charCodeAt(ie)?(r="{",ie++):(r=a,0===pe&&peg$fail(h));r!==a&&peg$parse_()!==a&&(s=peg$parseargNameOrNumber())!==a&&peg$parse_()!==a?(44===e.charCodeAt(ie)?(n=",",ie++):(n=a,0===pe&&peg$fail(b)),n!==a&&peg$parse_()!==a?("number"===e.substr(ie,6)?(o="number",ie+=6):(o=a,0===pe&&peg$fail(A)),o!==a&&peg$parse_()!==a?(i=ie,44===e.charCodeAt(ie)?(u=",",ie++):(u=a,0===pe&&peg$fail(b)),u!==a&&(l=peg$parse_())!==a&&(c=function peg$parsenumberArgStyle(){var t,r,s;t=ie,"::"===e.substr(ie,2)?(r="::",ie+=2):(r=a,0===pe&&peg$fail(w));r!==a&&(s=function peg$parsenumberSkeleton(){var e,t,r;if(e=ie,t=[],(r=peg$parsenumberSkeletonToken())!==a)for(;r!==a;)t.push(r),r=peg$parsenumberSkeletonToken();else t=a;t!==a&&(ue=e,t=__assign({type:0,tokens:t},insertLocation()));return e=t}())!==a?(ue=t,t=r=s):(ie=t,t=a);t===a&&(t=ie,ue=ie,he.push("numberArgStyle"),(r=(r=!0)?void 0:a)!==a&&(s=peg$parsemessageText())!==a?(ue=t,r=peg$c41(s),t=r):(ie=t,t=a));return t}())!==a?i=u=[u,l,c]:(ie=i,i=a),i===a&&(i=null),i!==a&&(u=peg$parse_())!==a?(125===e.charCodeAt(ie)?(l="}",ie++):(l=a,0===pe&&peg$fail(d)),l!==a?(ue=t,r=peg$c46(s,o,i),t=r):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a);return t}())===a&&(t=function peg$parsedateOrTimeFormatElement(){var t,r,s,n,o,i,u,l,c;t=ie,123===e.charCodeAt(ie)?(r="{",ie++):(r=a,0===pe&&peg$fail(h));r!==a&&peg$parse_()!==a&&(s=peg$parseargNameOrNumber())!==a&&peg$parse_()!==a?(44===e.charCodeAt(ie)?(n=",",ie++):(n=a,0===pe&&peg$fail(b)),n!==a&&peg$parse_()!==a?("date"===e.substr(ie,4)?(o="date",ie+=4):(o=a,0===pe&&peg$fail(x)),o===a&&("time"===e.substr(ie,4)?(o="time",ie+=4):(o=a,0===pe&&peg$fail($))),o!==a&&peg$parse_()!==a?(i=ie,44===e.charCodeAt(ie)?(u=",",ie++):(u=a,0===pe&&peg$fail(b)),u!==a&&(l=peg$parse_())!==a&&(c=function peg$parsedateOrTimeArgStyle(){var t,r,s;t=ie,"::"===e.substr(ie,2)?(r="::",ie+=2):(r=a,0===pe&&peg$fail(w));r!==a&&(s=function peg$parsedateTimeSkeleton(){var t,r,s,n;t=ie,r=ie,s=[],(n=peg$parsedateTimeSkeletonLiteral())===a&&(n=peg$parsedateTimeSkeletonPattern());if(n!==a)for(;n!==a;)s.push(n),(n=peg$parsedateTimeSkeletonLiteral())===a&&(n=peg$parsedateTimeSkeletonPattern());else s=a;r=s!==a?e.substring(r,ie):s;r!==a&&(ue=t,r=__assign({type:1,pattern:r},insertLocation()));return t=r}())!==a?(ue=t,t=r=s):(ie=t,t=a);t===a&&(t=ie,ue=ie,he.push("dateOrTimeArgStyle"),(r=(r=!0)?void 0:a)!==a&&(s=peg$parsemessageText())!==a?(ue=t,r=peg$c41(s),t=r):(ie=t,t=a));return t}())!==a?i=u=[u,l,c]:(ie=i,i=a),i===a&&(i=null),i!==a&&(u=peg$parse_())!==a?(125===e.charCodeAt(ie)?(l="}",ie++):(l=a,0===pe&&peg$fail(d)),l!==a?(ue=t,r=peg$c46(s,o,i),t=r):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a);return t}());return t}())===a&&(t=function peg$parsepluralElement(){var t,r,s,n,o,i,u,l,c,g,p;t=ie,123===e.charCodeAt(ie)?(r="{",ie++):(r=a,0===pe&&peg$fail(h));if(r!==a)if(peg$parse_()!==a)if((s=peg$parseargNameOrNumber())!==a)if(peg$parse_()!==a)if(44===e.charCodeAt(ie)?(n=",",ie++):(n=a,0===pe&&peg$fail(b)),n!==a)if(peg$parse_()!==a)if("plural"===e.substr(ie,6)?(o="plural",ie+=6):(o=a,0===pe&&peg$fail(N)),o===a&&("selectordinal"===e.substr(ie,13)?(o="selectordinal",ie+=13):(o=a,0===pe&&peg$fail(M))),o!==a)if(peg$parse_()!==a)if(44===e.charCodeAt(ie)?(i=",",ie++):(i=a,0===pe&&peg$fail(b)),i!==a)if(peg$parse_()!==a)if(u=ie,"offset:"===e.substr(ie,7)?(l="offset:",ie+=7):(l=a,0===pe&&peg$fail(P)),l!==a&&(c=peg$parse_())!==a&&(g=peg$parsenumber())!==a?u=l=[l,c,g]:(ie=u,u=a),u===a&&(u=null),u!==a)if((l=peg$parse_())!==a){if(c=[],(g=peg$parsepluralOption())!==a)for(;g!==a;)c.push(g),g=peg$parsepluralOption();else c=a;c!==a&&(g=peg$parse_())!==a?(125===e.charCodeAt(ie)?(p="}",ie++):(p=a,0===pe&&peg$fail(d)),p!==a?(ue=t,r=function(e,t,r,a){return __assign({type:Ja.plural,pluralType:"plural"===t?"cardinal":"ordinal",value:e,offset:r?r[2]:0,options:a.reduce((function(e,t){var r=t.id,a=t.value,s=t.location;return r in e&&error('Duplicate option "'+r+'" in plural element: "'+text()+'"',location()),e[r]={value:a,location:s},e}),{})},insertLocation())}(s,o,u,c),t=r):(ie=t,t=a)):(ie=t,t=a)}else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;return t}())===a&&(t=function peg$parseselectElement(){var t,r,s,n,o,i,u,l,c;t=ie,123===e.charCodeAt(ie)?(r="{",ie++):(r=a,0===pe&&peg$fail(h));if(r!==a)if(peg$parse_()!==a)if((s=peg$parseargNameOrNumber())!==a)if(peg$parse_()!==a)if(44===e.charCodeAt(ie)?(n=",",ie++):(n=a,0===pe&&peg$fail(b)),n!==a)if(peg$parse_()!==a)if("select"===e.substr(ie,6)?(o="select",ie+=6):(o=a,0===pe&&peg$fail(V)),o!==a)if(peg$parse_()!==a)if(44===e.charCodeAt(ie)?(i=",",ie++):(i=a,0===pe&&peg$fail(b)),i!==a)if(peg$parse_()!==a){if(u=[],(l=peg$parseselectOption())!==a)for(;l!==a;)u.push(l),l=peg$parseselectOption();else u=a;u!==a&&(l=peg$parse_())!==a?(125===e.charCodeAt(ie)?(c="}",ie++):(c=a,0===pe&&peg$fail(d)),c!==a?(ue=t,r=function(e,t){return __assign({type:Ja.select,value:e,options:t.reduce((function(e,t){var r=t.id,a=t.value,s=t.location;return r in e&&error('Duplicate option "'+r+'" in select element: "'+text()+'"',location()),e[r]={value:a,location:s},e}),{})},insertLocation())}(s,u),t=r):(ie=t,t=a)):(ie=t,t=a)}else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;else ie=t,t=a;return t}())===a&&(t=function peg$parsetagElement(){var t,r,s,n,o,p;pe++,t=ie,r=ie,60===e.charCodeAt(ie)?(s="<",ie++):(s=a,0===pe&&peg$fail(u));s!==a&&(n=peg$parsevalidTag())!==a&&(o=peg$parse_())!==a?("/>"===e.substr(ie,2)?(p="/>",ie+=2):(p=a,0===pe&&peg$fail(l)),p!==a?r=s=[s,n,o,p]:(ie=r,r=a)):(ie=r,r=a);r!==a&&(ue=t,h=r,r=__assign({type:Ja.literal,value:h.join("")},insertLocation()));var h;(t=r)===a&&(t=ie,(r=function peg$parseopeningTag(){var t,r,s,n;t=ie,60===e.charCodeAt(ie)?(r="<",ie++):(r=a,0===pe&&peg$fail(u));r!==a?(ue=ie,he.push("openingTag"),(!0?void 0:a)!==a&&(s=peg$parsevalidTag())!==a?(62===e.charCodeAt(ie)?(n=">",ie++):(n=a,0===pe&&peg$fail(c)),n!==a?(ue=ie,(peg$c15()?void 0:a)!==a?(ue=t,t=r=s):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a);return t}())!==a&&(s=peg$parsemessage())!==a&&(n=function peg$parseclosingTag(){var t,r,s,n;t=ie,"</"===e.substr(ie,2)?(r="</",ie+=2):(r=a,0===pe&&peg$fail(g));r!==a?(ue=ie,he.push("closingTag"),(!0?void 0:a)!==a&&(s=peg$parsevalidTag())!==a?(62===e.charCodeAt(ie)?(n=">",ie++):(n=a,0===pe&&peg$fail(c)),n!==a?(ue=ie,(peg$c15()?void 0:a)!==a?(ue=t,t=r=s):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a);return t}())!==a?(ue=t,f=s,(d=r)!==(m=n)&&error('Mismatch tag "'+d+'" !== "'+m+'"',location()),r=__assign({type:Ja.tag,value:d,children:f},insertLocation()),t=r):(ie=t,t=a));var d,f,m;pe--,t===a&&(r=a,0===pe&&peg$fail(i));return t}())===a&&(t=function peg$parsepoundElement(){var t,r;t=ie,35===e.charCodeAt(ie)?(r="#",ie++):(r=a,0===pe&&peg$fail(o));r!==a&&(ue=t,r=__assign({type:Ja.pound},insertLocation()));return t=r}()),t}function peg$parsemessageText(){var e,t,r;if(e=ie,t=[],(r=peg$parsedoubleApostrophes())===a&&(r=peg$parsequotedString())===a&&(r=peg$parseunquotedString()),r!==a)for(;r!==a;)t.push(r),(r=peg$parsedoubleApostrophes())===a&&(r=peg$parsequotedString())===a&&(r=peg$parseunquotedString());else t=a;return t!==a&&(ue=e,t=t.join("")),e=t}function peg$parsenumberSkeletonId(){var t,r,s,n,o;if(pe++,t=ie,r=[],s=ie,n=ie,pe++,(o=peg$parsewhiteSpace())===a&&(m.test(e.charAt(ie))?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(y))),pe--,o===a?n=void 0:(ie=n,n=a),n!==a?(e.length>ie?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(E)),o!==a?s=n=[n,o]:(ie=s,s=a)):(ie=s,s=a),s!==a)for(;s!==a;)r.push(s),s=ie,n=ie,pe++,(o=peg$parsewhiteSpace())===a&&(m.test(e.charAt(ie))?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(y))),pe--,o===a?n=void 0:(ie=n,n=a),n!==a?(e.length>ie?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(E)),o!==a?s=n=[n,o]:(ie=s,s=a)):(ie=s,s=a);else r=a;return t=r!==a?e.substring(t,ie):r,pe--,t===a&&(r=a,0===pe&&peg$fail(f)),t}function peg$parsenumberSkeletonTokenOption(){var t,r,s;return pe++,t=ie,47===e.charCodeAt(ie)?(r="/",ie++):(r=a,0===pe&&peg$fail(v)),r!==a&&(s=peg$parsenumberSkeletonId())!==a?(ue=t,t=r=s):(ie=t,t=a),pe--,t===a&&(r=a,0===pe&&peg$fail(I)),t}function peg$parsenumberSkeletonToken(){var e,t,r,s;if(pe++,e=ie,peg$parse_()!==a)if((t=peg$parsenumberSkeletonId())!==a){for(r=[],s=peg$parsenumberSkeletonTokenOption();s!==a;)r.push(s),s=peg$parsenumberSkeletonTokenOption();r!==a?(ue=e,e=function(e,t){return{stem:e,options:t}}(t,r)):(ie=e,e=a)}else ie=e,e=a;else ie=e,e=a;return pe--,e===a&&(a,0===pe&&peg$fail(_)),e}function peg$parsedateTimeSkeletonLiteral(){var t,r,s,n;if(t=ie,39===e.charCodeAt(ie)?(r="'",ie++):(r=a,0===pe&&peg$fail(S)),r!==a){if(s=[],(n=peg$parsedoubleApostrophes())===a&&(F.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=a,0===pe&&peg$fail(C))),n!==a)for(;n!==a;)s.push(n),(n=peg$parsedoubleApostrophes())===a&&(F.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=a,0===pe&&peg$fail(C)));else s=a;s!==a?(39===e.charCodeAt(ie)?(n="'",ie++):(n=a,0===pe&&peg$fail(S)),n!==a?t=r=[r,s,n]:(ie=t,t=a)):(ie=t,t=a)}else ie=t,t=a;if(t===a)if(t=[],(r=peg$parsedoubleApostrophes())===a&&(T.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=a,0===pe&&peg$fail(L))),r!==a)for(;r!==a;)t.push(r),(r=peg$parsedoubleApostrophes())===a&&(T.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=a,0===pe&&peg$fail(L)));else t=a;return t}function peg$parsedateTimeSkeletonPattern(){var t,r;if(t=[],D.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=a,0===pe&&peg$fail(O)),r!==a)for(;r!==a;)t.push(r),D.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=a,0===pe&&peg$fail(O));else t=a;return t}function peg$parseselectOption(){var t,r,s,n,o,i,u;return t=ie,peg$parse_()!==a&&(r=peg$parseargName())!==a&&peg$parse_()!==a?(123===e.charCodeAt(ie)?(s="{",ie++):(s=a,0===pe&&peg$fail(h)),s!==a?(ue=ie,he.push("select"),(!0?void 0:a)!==a&&(n=peg$parsemessage())!==a?(125===e.charCodeAt(ie)?(o="}",ie++):(o=a,0===pe&&peg$fail(d)),o!==a?(ue=t,i=r,u=n,he.pop(),t=__assign({id:i,value:u},insertLocation())):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a),t}function peg$parsepluralOption(){var t,r,s,n,o,i,u;return t=ie,peg$parse_()!==a&&(r=function peg$parsepluralRuleSelectValue(){var t,r,s,n;return t=ie,r=ie,61===e.charCodeAt(ie)?(s="=",ie++):(s=a,0===pe&&peg$fail(R)),s!==a&&(n=peg$parsenumber())!==a?r=s=[s,n]:(ie=r,r=a),(t=r!==a?e.substring(t,ie):r)===a&&(t=peg$parseargName()),t}())!==a&&peg$parse_()!==a?(123===e.charCodeAt(ie)?(s="{",ie++):(s=a,0===pe&&peg$fail(h)),s!==a?(ue=ie,he.push("plural"),(!0?void 0:a)!==a&&(n=peg$parsemessage())!==a?(125===e.charCodeAt(ie)?(o="}",ie++):(o=a,0===pe&&peg$fail(d)),o!==a?(ue=t,i=r,u=n,he.pop(),t=__assign({id:i,value:u},insertLocation())):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a)):(ie=t,t=a),t}function peg$parsewhiteSpace(){var t;return pe++,j.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=a,0===pe&&peg$fail(U)),pe--,t===a&&(a,0===pe&&peg$fail(k)),t}function peg$parsepatternSyntax(){var t;return pe++,B.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=a,0===pe&&peg$fail(W)),pe--,t===a&&(a,0===pe&&peg$fail(G)),t}function peg$parse_(){var t,r,s;for(pe++,t=ie,r=[],s=peg$parsewhiteSpace();s!==a;)r.push(s),s=peg$parsewhiteSpace();return t=r!==a?e.substring(t,ie):r,pe--,t===a&&(r=a,0===pe&&peg$fail(z)),t}function peg$parsenumber(){var t,r,s,n,o;return pe++,t=ie,45===e.charCodeAt(ie)?(r="-",ie++):(r=a,0===pe&&peg$fail(q)),r===a&&(r=null),r!==a&&(s=peg$parseargNumber())!==a?(ue=t,n=r,t=r=(o=s)?n?-o:o:0):(ie=t,t=a),pe--,t===a&&(r=a,0===pe&&peg$fail(H)),t}function peg$parsedoubleApostrophes(){var t,r;return pe++,t=ie,"''"===e.substr(ie,2)?(r="''",ie+=2):(r=a,0===pe&&peg$fail(K)),r!==a&&(ue=t,r="'"),pe--,(t=r)===a&&(r=a,0===pe&&peg$fail(J)),t}function peg$parsequotedString(){var t,r,s,n,o,i;if(t=ie,39===e.charCodeAt(ie)?(r="'",ie++):(r=a,0===pe&&peg$fail(S)),r!==a)if((s=function peg$parseescapedChar(){var t,r,s,n;t=ie,r=ie,e.length>ie?(s=e.charAt(ie),ie++):(s=a,0===pe&&peg$fail(E));s!==a?(ue=ie,(n=(n="<"===(o=s)||">"===o||"{"===o||"}"===o||isInPluralOption()&&"#"===o)?void 0:a)!==a?r=s=[s,n]:(ie=r,r=a)):(ie=r,r=a);var o;t=r!==a?e.substring(t,ie):r;return t}())!==a){for(n=ie,o=[],"''"===e.substr(ie,2)?(i="''",ie+=2):(i=a,0===pe&&peg$fail(K)),i===a&&(F.test(e.charAt(ie))?(i=e.charAt(ie),ie++):(i=a,0===pe&&peg$fail(C)));i!==a;)o.push(i),"''"===e.substr(ie,2)?(i="''",ie+=2):(i=a,0===pe&&peg$fail(K)),i===a&&(F.test(e.charAt(ie))?(i=e.charAt(ie),ie++):(i=a,0===pe&&peg$fail(C)));(n=o!==a?e.substring(n,ie):o)!==a?(39===e.charCodeAt(ie)?(o="'",ie++):(o=a,0===pe&&peg$fail(S)),o===a&&(o=null),o!==a?(ue=t,t=r=s+n.replace("''","'")):(ie=t,t=a)):(ie=t,t=a)}else ie=t,t=a;else ie=t,t=a;return t}function peg$parseunquotedString(){var t,r,s,n,o;return t=ie,r=ie,e.length>ie?(s=e.charAt(ie),ie++):(s=a,0===pe&&peg$fail(E)),s!==a?(ue=ie,o=s,(n=(n=(ignoreTag()||"<"!==o)&&"{"!==o&&!(isInPluralOption()&&"#"===o)&&!(isNestedMessageText()&&"}"===o)&&!(!ignoreTag()&&isNestedMessageText()&&">"===o))?void 0:a)!==a?r=s=[s,n]:(ie=r,r=a)):(ie=r,r=a),r===a&&(10===e.charCodeAt(ie)?(r="\n",ie++):(r=a,0===pe&&peg$fail(Z))),t=r!==a?e.substring(t,ie):r}function peg$parseargNameOrNumber(){var t,r;return pe++,t=ie,(r=peg$parseargNumber())===a&&(r=peg$parseargName()),t=r!==a?e.substring(t,ie):r,pe--,t===a&&(r=a,0===pe&&peg$fail(Q)),t}function peg$parsevalidTag(){var t,r;return pe++,t=ie,(r=peg$parseargNumber())===a&&(r=function peg$parsetagName(){var t,r,s,n,o;pe++,t=ie,r=[],45===e.charCodeAt(ie)?(s="-",ie++):(s=a,0===pe&&peg$fail(q));s===a&&(s=ie,n=ie,pe++,(o=peg$parsewhiteSpace())===a&&(o=peg$parsepatternSyntax()),pe--,o===a?n=void 0:(ie=n,n=a),n!==a?(e.length>ie?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(E)),o!==a?s=n=[n,o]:(ie=s,s=a)):(ie=s,s=a));if(s!==a)for(;s!==a;)r.push(s),45===e.charCodeAt(ie)?(s="-",ie++):(s=a,0===pe&&peg$fail(q)),s===a&&(s=ie,n=ie,pe++,(o=peg$parsewhiteSpace())===a&&(o=peg$parsepatternSyntax()),pe--,o===a?n=void 0:(ie=n,n=a),n!==a?(e.length>ie?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(E)),o!==a?s=n=[n,o]:(ie=s,s=a)):(ie=s,s=a));else r=a;t=r!==a?e.substring(t,ie):r;pe--,t===a&&(r=a,0===pe&&peg$fail(oe));return t}()),t=r!==a?e.substring(t,ie):r,pe--,t===a&&(r=a,0===pe&&peg$fail(X)),t}function peg$parseargNumber(){var t,r,s,n,o;if(pe++,t=ie,48===e.charCodeAt(ie)?(r="0",ie++):(r=a,0===pe&&peg$fail(ee)),r!==a&&(ue=t,r=0),(t=r)===a){if(t=ie,r=ie,te.test(e.charAt(ie))?(s=e.charAt(ie),ie++):(s=a,0===pe&&peg$fail(re)),s!==a){for(n=[],ae.test(e.charAt(ie))?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(se));o!==a;)n.push(o),ae.test(e.charAt(ie))?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(se));n!==a?r=s=[s,n]:(ie=r,r=a)}else ie=r,r=a;r!==a&&(ue=t,r=parseInt(r.join(""),10)),t=r}return pe--,t===a&&(r=a,0===pe&&peg$fail(Y)),t}function peg$parseargName(){var t,r,s,n,o;if(pe++,t=ie,r=[],s=ie,n=ie,pe++,(o=peg$parsewhiteSpace())===a&&(o=peg$parsepatternSyntax()),pe--,o===a?n=void 0:(ie=n,n=a),n!==a?(e.length>ie?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(E)),o!==a?s=n=[n,o]:(ie=s,s=a)):(ie=s,s=a),s!==a)for(;s!==a;)r.push(s),s=ie,n=ie,pe++,(o=peg$parsewhiteSpace())===a&&(o=peg$parsepatternSyntax()),pe--,o===a?n=void 0:(ie=n,n=a),n!==a?(e.length>ie?(o=e.charAt(ie),ie++):(o=a,0===pe&&peg$fail(E)),o!==a?s=n=[n,o]:(ie=s,s=a)):(ie=s,s=a);else r=a;return t=r!==a?e.substring(t,ie):r,pe--,t===a&&(r=a,0===pe&&peg$fail(ne)),t}var he=["root"];function isNestedMessageText(){return he.length>1}function isInPluralOption(){return"plural"===he[he.length-1]}function insertLocation(){return t&&t.captureLocation?{location:location()}:{}}function ignoreTag(){return t&&t.ignoreTag}if((r=n())!==a&&ie===e.length)return r;throw r!==a&&ie<e.length&&peg$fail({type:"end"}),peg$buildStructuredError(ge,ce<e.length?e.charAt(ce):null,ce<e.length?peg$computeLocation(ce,ce+1):peg$computeLocation(ce,ce))},__spreadArrays=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),s=0;for(t=0;t<r;t++)for(var n=arguments[t],o=0,i=n.length;o<i;o++,s++)a[s]=n[o];return a},es=/(^|[^\\])#/g;function parse(e,t){var r=Ya(e,t);return t&&!1===t.normalizeHashtagInPlural||function normalizeHashtagInPlural(e){e.forEach((function(e){(isPluralElement(e)||isSelectElement(e))&&Object.keys(e.options).forEach((function(t){for(var r,a=e.options[t],s=-1,n=void 0,o=0;o<a.value.length;o++){var i=a.value[o];if(isLiteralElement(i)&&es.test(i.value)){s=o,n=i;break}}if(n){var u=n.value.replace(es,"$1{"+e.value+", number}"),l=Ya(u);(r=a.value).splice.apply(r,__spreadArrays([s,1],l))}normalizeHashtagInPlural(a.value)}))}))}(r),r}var lib_spreadArrays=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),s=0;for(t=0;t<r;t++)for(var n=arguments[t],o=0,i=n.length;o<i;o++,s++)a[s]=n[o];return a};function getCacheId(e){return JSON.stringify(e.map((function(e){return e&&"object"==typeof e?function orderedProps(e){return Object.keys(e).sort().map((function(t){var r;return(r={})[t]=e[t],r}))}(e):e})))}const lib=function(e,t){return void 0===t&&(t={}),function(){for(var r,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var n=getCacheId(a),o=n&&t[n];return o||(o=new((r=e).bind.apply(r,lib_spreadArrays([void 0],a))),n&&(t[n]=o)),o}};var skeleton_assign=function(){return(skeleton_assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},ts=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function parseDateTimeSkeleton(e){var t={};return e.replace(ts,(function(e){var r=e.length;switch(e[0]){case"G":t.era=4===r?"long":5===r?"narrow":"short";break;case"y":t.year=2===r?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===r?"short":5===r?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) pattenrs are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) pattenrs are not supported, use `z` instead")}return""})),t}var rs=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,as=/^(@+)?(\+|#+)?$/g;function parseSignificantPrecision(e){var t={};return e.replace(as,(function(e,r,a){return"string"!=typeof a?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):"+"===a?t.minimumSignificantDigits=r.length:"#"===r[0]?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+("string"==typeof a?a.length:0)),""})),t}function parseSign(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":return{currencySign:"accounting"};case"sign-always":return{signDisplay:"always"};case"sign-accounting-always":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":return{signDisplay:"never"}}}function parseNotationOptions(e){var t=parseSign(e);return t||{}}function convertNumberSkeletonToNumberFormatOptions(e){for(var t={},r=0,a=e;r<a.length;r++){var s=a[r];switch(s.stem){case"percent":t.style="percent";continue;case"currency":t.style="currency",t.currency=s.options[0];continue;case"group-off":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":t.style="unit",t.unit=s.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=skeleton_assign(skeleton_assign(skeleton_assign({},t),{notation:"scientific"}),s.options.reduce((function(e,t){return skeleton_assign(skeleton_assign({},e),parseNotationOptions(t))}),{}));continue;case"engineering":t=skeleton_assign(skeleton_assign(skeleton_assign({},t),{notation:"engineering"}),s.options.reduce((function(e,t){return skeleton_assign(skeleton_assign({},e),parseNotationOptions(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue}if(rs.test(s.stem)){if(s.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");s.stem.replace(rs,(function(e,r,a,s,n,o){return"*"===a?t.minimumFractionDigits=r.length:s&&"#"===s[0]?t.maximumFractionDigits=s.length:n&&o?(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length+o.length):(t.minimumFractionDigits=r.length,t.maximumFractionDigits=r.length),""})),s.options.length&&(t=skeleton_assign(skeleton_assign({},t),parseSignificantPrecision(s.options[0])))}else if(as.test(s.stem))t=skeleton_assign(skeleton_assign({},t),parseSignificantPrecision(s.stem));else{var n=parseSign(s.stem);n&&(t=skeleton_assign(skeleton_assign({},t),n))}}return t}var ss,ns=function(){var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(ss||(ss={}));var os,is=function(e){function FormatError(t,r,a){var s=e.call(this,t)||this;return s.code=r,s.originalMessage=a,s}return ns(FormatError,e),FormatError.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},FormatError}(Error),us=function(e){function InvalidValueError(t,r,a,s){return e.call(this,'Invalid values for "'+t+'": "'+r+'". Options are "'+Object.keys(a).join('", "')+'"',"INVALID_VALUE",s)||this}return ns(InvalidValueError,e),InvalidValueError}(is),ls=function(e){function InvalidValueTypeError(t,r,a){return e.call(this,'Value for "'+t+'" must be of type '+r,"INVALID_VALUE",a)||this}return ns(InvalidValueTypeError,e),InvalidValueTypeError}(is),cs=function(e){function MissingValueError(t,r){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+r+'"',"MISSING_VALUE",r)||this}return ns(MissingValueError,e),MissingValueError}(is);function isFormatXMLElementFn(e){return"function"==typeof e}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(os||(os={}));var core_assign=function(){return(core_assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function mergeConfigs(e,t){return t?Object.keys(e).reduce((function(r,a){return r[a]=function mergeConfig(e,t){return t?core_assign(core_assign(core_assign({},e||{}),t||{}),Object.keys(e).reduce((function(r,a){return r[a]=core_assign(core_assign({},e[a]),t[a]||{}),r}),{})):e}(e[a],t[a]),r}),core_assign({},e)):e}const gs=function(){function IntlMessageFormat(e,t,r,a){var s=this;if(void 0===t&&(t=IntlMessageFormat.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=s.formatToParts(e);if(1===t.length)return t[0].value;var r=t.reduce((function(e,t){return e.length&&0===t.type&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return r.length<=1?r[0]||"":r},this.formatToParts=function(e){return function formatToParts(e,t,r,a,s,n,o){if(1===e.length&&isLiteralElement(e[0]))return[{type:0,value:e[0].value}];for(var i=[],u=0,l=e;u<l.length;u++){var c=l[u];if(isLiteralElement(c))i.push({type:0,value:c.value});else if(isPoundElement(c))"number"==typeof n&&i.push({type:0,value:r.getNumberFormat(t).format(n)});else{var g=c.value;if(!s||!(g in s))throw new cs(g,o);var p=s[g];if(isArgumentElement(c))p&&"string"!=typeof p&&"number"!=typeof p||(p="string"==typeof p||"number"==typeof p?String(p):""),i.push({type:"string"==typeof p?0:1,value:p});else if(isDateElement(c)){var h="string"==typeof c.style?a.date[c.style]:isDateTimeSkeleton(c.style)?parseDateTimeSkeleton(c.style.pattern):void 0;i.push({type:0,value:r.getDateTimeFormat(t,h).format(p)})}else if(isTimeElement(c)){h="string"==typeof c.style?a.time[c.style]:isDateTimeSkeleton(c.style)?parseDateTimeSkeleton(c.style.pattern):void 0;i.push({type:0,value:r.getDateTimeFormat(t,h).format(p)})}else if(isNumberElement(c)){h="string"==typeof c.style?a.number[c.style]:isNumberSkeleton(c.style)?convertNumberSkeletonToNumberFormatOptions(c.style.tokens):void 0;i.push({type:0,value:r.getNumberFormat(t,h).format(p)})}else{if(isTagElement(c)){var d=c.children,f=c.value,m=s[f];if(!isFormatXMLElementFn(m))throw new ls(f,"function",o);var y=formatToParts(d,t,r,a,s,n),E=m.apply(void 0,y.map((function(e){return e.value})));Array.isArray(E)||(E=[E]),i.push.apply(i,E.map((function(e){return{type:"string"==typeof e?0:1,value:e}})))}if(isSelectElement(c)){if(!(I=c.options[p]||c.options.other))throw new us(c.value,p,Object.keys(c.options),o);i.push.apply(i,formatToParts(I.value,t,r,a,s))}else if(isPluralElement(c)){var I;if(!(I=c.options["="+p])){if(!Intl.PluralRules)throw new is('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',"MISSING_INTL_API",o);var v=r.getPluralRules(t,{type:c.pluralType}).select(p-(c.offset||0));I=c.options[v]||c.options.other}if(!I)throw new us(c.value,p,Object.keys(c.options),o);i.push.apply(i,formatToParts(I.value,t,r,a,s,p-(c.offset||0)))}else;}}}return function mergeLiteral(e){return e.length<2?e:e.reduce((function(e,t){var r=e[e.length-1];return r&&0===r.type&&0===t.type?r.value+=t.value:e.push(t),e}),[])}(i)}(s.ast,s.locales,s.formatters,s.formats,e,void 0,s.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},"string"==typeof e){if(this.message=e,!IntlMessageFormat.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=IntlMessageFormat.__parse(e,{normalizeHashtagInPlural:!1})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=mergeConfigs(IntlMessageFormat.formats,r),this.locales=t,this.formatters=a&&a.formatters||function createDefaultFormatters(e){return void 0===e&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:lib(Intl.NumberFormat,e.number),getDateTimeFormat:lib(Intl.DateTimeFormat,e.dateTime),getPluralRules:lib(Intl.PluralRules,e.pluralRules)}}(this.formatterCache)}return Object.defineProperty(IntlMessageFormat,"defaultLocale",{get:function(){return IntlMessageFormat.memoizedDefaultLocale||(IntlMessageFormat.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),IntlMessageFormat.memoizedDefaultLocale},enumerable:!0,configurable:!0}),IntlMessageFormat.memoizedDefaultLocale=null,IntlMessageFormat.__parse=parse,IntlMessageFormat.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},IntlMessageFormat}();class Message{constructor(e,t){if(!t)throw new Error("Locale data is missing");if(!e)throw new Error("Message data is missing");this.message="Message text is not defined in translation data",this.params=[],this.locale=t;for(const t of Object.keys(e))this[t]=e[t];this.formatFunc=new gs(this.message,this.locale),this.abbrFunc=new gs(this.abbr||this.message,this.locale)}get hasParameters(){return Boolean(this.params.length>0)}getMsg(e){return this.hasParameters&&!this.formatFunc?(Logger.getInstance().warn("Format function is missing for a message with parameters: "+this.message,this.params),""):this.hasParameters?this.formatFunc.format(e):this.message}getAbbr(e){return this.hasParameters?this.abbrFunc.format(e):this.abbrFunc.format()}}class MessageBundle{constructor(e,t,r=((e,t)=>`Missing translation: ${e} [${t}]`)){if(!t)throw new Error("Locale data is missing");if(!e)throw new Error("Message data is missing");this._locale=t,this._messages=new Map,this._missingTranslationMsgFn=r;const a="string"==typeof e?JSON.parse(e):e;this.append(a)}appendFromBundle(e){for(const t of e.messageIds)this._messages.set(t,e.getMessageObject(t))}appendFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;this.append(t)}append(e){for(const[t,r]of Object.entries(e)){const e=new Message(r,this._locale);this._messages.set(t,e)}}get messageIds(){return Array.from(this._messages.keys())}hasMsg(e){return this._messages.has(e)}getMsg(e,t,r={}){return r=Object.assign({passthrough:!1},r),this.hasMsg(e)?this._messages.get(e).getMsg(t):r.passthrough?e:`"${e}" is not in translation data for ${this._locale}`}getText(e,t,r={}){return r.passthrough=!0,this.getMsg(e,t,r)}getAbbr(e,t){return this.hasMsg(e)?this._messages.get(e).getAbbr(t):this._missingTranslationMsgFn(e,this._locale)}getMessageObject(e){return this.hasMsg(e)?this._messages.get(e):null}get locale(){return this._locale}}class L10n{constructor(){return this.selectedLocale=void 0,this.bundles=new Map,this}addMessages(e,t,r){let a;return this.bundles.has(t)?(a=this.bundles.get(t),a.appendFromJSON(e)):(a=new MessageBundle(e,t,r),this.addMessageBundle(a),this.selectedLocale||this.setLocale(t)),this}addMessageBundle(e){const t=e.locale;return this.bundles.has(t)?this.bundles.get(t).appendFromBundle(e):(this.bundles.set(e.locale,e),this.selectedLocale||this.setLocale(e.locale)),this}get locales(){return Array.from(this.bundles.keys())}get bundle(){return this.bundles.get(this.selectedLocale)}getMsg(...e){return this.bundles.has(this.selectedLocale)?this.bundles.get(this.selectedLocale).getMsg(...e):{}}setLocale(e){return this.bundles.has(e)&&(this.selectedLocale=e),this}}}},t={};function __webpack_require__(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,__webpack_require__),a.exports}return __webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(194)})()}));