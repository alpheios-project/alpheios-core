!function webpackUniversalModuleDefinition(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var s in r)("object"==typeof exports?exports:e)[s]=r[s]}}(global,(function(){return(()=>{var e={9697:e=>{"use strict";e.exports=JSON.parse('{"_from":"axios@^0.21.0","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.0","name":"axios","escapedName":"axios","rawSpec":"^0.21.0","saveSpec":null,"fetchSpec":"^0.21.0"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.0","_where":"C:\\\\_Alpheios\\\\alpheios-core","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},4486:(e,t,r)=>{e.exports=r(6175)},4886:(e,t,r)=>{"use strict";var s=r(8948),a=r(5162),n=r(1214),o=r(3042),i=r(8605),u=r(7211),l=r(3982).http,c=r(3982).https,h=r(8835),d=r(8761),p=r(9697),g=r(2591),f=r(7475),m=/https:?/;function setProxy(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var s=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+s}e.beforeRedirect=function beforeRedirect(e){e.headers.host=e.host,setProxy(e,t,e.href)}}e.exports=function httpAdapter(e){return new Promise((function dispatchHttpRequest(t,r){var y=function resolve(e){t(e)},b=function reject(e){r(e)},E=e.data,v=e.headers;if("User-Agent"in v||"user-agent"in v?v["User-Agent"]||v["user-agent"]||(delete v["User-Agent"],delete v["user-agent"]):v["User-Agent"]="axios/"+p.version,E&&!s.isStream(E)){if(Buffer.isBuffer(E));else if(s.isArrayBuffer(E))E=Buffer.from(new Uint8Array(E));else{if(!s.isString(E))return b(g("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));E=Buffer.from(E,"utf-8")}v["Content-Length"]=E.length}var I=void 0;e.auth&&(I=(e.auth.username||"")+":"+(e.auth.password||""));var w=n(e.baseURL,e.url),S=h.parse(w),_=S.protocol||"http:";if(!I&&S.auth){var A=S.auth.split(":");I=(A[0]||"")+":"+(A[1]||"")}I&&delete v.Authorization;var T=m.test(_),O=T?e.httpsAgent:e.httpAgent,C={path:o(S.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:v,agent:O,agents:{http:e.httpAgent,https:e.httpsAgent},auth:I};e.socketPath?C.socketPath=e.socketPath:(C.hostname=S.hostname,C.port=S.port);var D,L=e.proxy;if(!L&&!1!==L){var F=_.slice(0,-1)+"_proxy",x=process.env[F]||process.env[F.toUpperCase()];if(x){var R=h.parse(x),N=process.env.no_proxy||process.env.NO_PROXY,P=!0;if(N)P=!N.split(",").map((function trim(e){return e.trim()})).some((function proxyMatch(e){return!!e&&("*"===e||("."===e[0]&&S.hostname.substr(S.hostname.length-e.length)===e||S.hostname===e))}));if(P&&(L={host:R.hostname,port:R.port,protocol:R.protocol},R.auth)){var V=R.auth.split(":");L.auth={username:V[0],password:V[1]}}}}L&&(C.headers.host=S.hostname+(S.port?":"+S.port:""),setProxy(C,L,_+"//"+S.hostname+(S.port?":"+S.port:"")+C.path));var M=T&&(!L||m.test(L.protocol));e.transport?D=e.transport:0===e.maxRedirects?D=M?u:i:(e.maxRedirects&&(C.maxRedirects=e.maxRedirects),D=M?c:l),e.maxBodyLength>-1&&(C.maxBodyLength=e.maxBodyLength);var U=D.request(C,(function handleResponse(t){if(!U.aborted){var r=t,n=t.req||U;if(204!==t.statusCode&&"HEAD"!==n.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(d.createUnzip()),delete t.headers["content-encoding"]}var o={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:n};if("stream"===e.responseType)o.data=r,a(y,b,o);else{var i=[],u=0;r.on("data",(function handleStreamData(t){i.push(t),u+=t.length,e.maxContentLength>-1&&u>e.maxContentLength&&(r.destroy(),b(g("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,n)))})),r.on("error",(function handleStreamError(t){U.aborted||b(f(t,e,null,n))})),r.on("end",(function handleStreamEnd(){var t=Buffer.concat(i);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=s.stripBOM(t))),o.data=t,a(y,b,o)}))}}}));if(U.on("error",(function handleRequestError(t){U.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||b(f(t,e,null,U))})),e.timeout){var j=parseInt(e.timeout,10);if(isNaN(j))return void b(g("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",U));U.setTimeout(j,(function handleRequestTimeout(){U.abort(),b(g("timeout of "+j+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U))}))}e.cancelToken&&e.cancelToken.promise.then((function onCanceled(e){U.aborted||(U.abort(),b(e))})),s.isStream(E)?E.on("error",(function handleStreamError(t){b(f(t,e,null,U))})).pipe(U):U.end(E)}))}},232:(e,t,r)=>{"use strict";var s=r(8948),a=r(5162),n=r(6065),o=r(3042),i=r(1214),u=r(7170),l=r(6632),c=r(2591);e.exports=function xhrAdapter(e){return new Promise((function dispatchXhrRequest(t,r){var h=e.data,d=e.headers,p=e.responseType;s.isFormData(h)&&delete d["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(f+":"+m)}var y=i(e.baseURL,e.url);function onloadend(){if(g){var s="getAllResponseHeaders"in g?u(g.getAllResponseHeaders()):null,n={data:p&&"text"!==p&&"json"!==p?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:s,config:e,request:g};a(t,r,n),g=null}}if(g.open(e.method.toUpperCase(),o(y,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,"onloadend"in g?g.onloadend=onloadend:g.onreadystatechange=function handleLoad(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(onloadend)},g.onabort=function handleAbort(){g&&(r(c("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function handleError(){r(c("Network Error",e,null,g)),g=null},g.ontimeout=function handleTimeout(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(c(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},s.isStandardBrowserEnv()){var b=(e.withCredentials||l(y))&&e.xsrfCookieName?n.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}"setRequestHeader"in g&&s.forEach(d,(function setRequestHeader(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:g.setRequestHeader(t,e)})),s.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),p&&"json"!==p&&(g.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function onCanceled(e){g&&(g.abort(),r(e),g=null)})),h||(h=null),g.send(h)}))}},6175:(e,t,r)=>{"use strict";var s=r(8948),a=r(8365),n=r(4262),o=r(5682);function createInstance(e){var t=new n(e),r=a(n.prototype.request,t);return s.extend(r,n.prototype,t),s.extend(r,t),r}var i=createInstance(r(14));i.Axios=n,i.create=function create(e){return createInstance(o(i.defaults,e))},i.Cancel=r(4280),i.CancelToken=r(6521),i.isCancel=r(3583),i.all=function all(e){return Promise.all(e)},i.spread=r(5338),i.isAxiosError=r(9646),e.exports=i,e.exports.default=i},4280:e=>{"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,e.exports=Cancel},6521:(e,t,r)=>{"use strict";var s=r(4280);function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function promiseExecutor(e){t=e}));var r=this;e((function cancel(e){r.reason||(r.reason=new s(e),t(r.reason))}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var e;return{token:new CancelToken((function executor(t){e=t})),cancel:e}},e.exports=CancelToken},3583:e=>{"use strict";e.exports=function isCancel(e){return!(!e||!e.__CANCEL__)}},4262:(e,t,r)=>{"use strict";var s=r(8948),a=r(3042),n=r(8005),o=r(2530),i=r(5682),u=r(288),l=u.validators;function Axios(e){this.defaults=e,this.interceptors={request:new n,response:new n}}Axios.prototype.request=function request(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=i(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&u.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean,"1.0.0"),forcedJSONParsing:l.transitional(l.boolean,"1.0.0"),clarifyTimeoutError:l.transitional(l.boolean,"1.0.0")},!1);var r=[],s=!0;this.interceptors.request.forEach((function unshiftRequestInterceptors(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var a,n=[];if(this.interceptors.response.forEach((function pushResponseInterceptors(e){n.push(e.fulfilled,e.rejected)})),!s){var c=[o,void 0];for(Array.prototype.unshift.apply(c,r),c=c.concat(n),a=Promise.resolve(e);c.length;)a=a.then(c.shift(),c.shift());return a}for(var h=e;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(e){p(e);break}}try{a=o(h)}catch(e){return Promise.reject(e)}for(;n.length;)a=a.then(n.shift(),n.shift());return a},Axios.prototype.getUri=function getUri(e){return e=i(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},s.forEach(["delete","get","head","options"],(function forEachMethodNoData(e){Axios.prototype[e]=function(t,r){return this.request(i(r||{},{method:e,url:t,data:(r||{}).data}))}})),s.forEach(["post","put","patch"],(function forEachMethodWithData(e){Axios.prototype[e]=function(t,r,s){return this.request(i(s||{},{method:e,url:t,data:r}))}})),e.exports=Axios},8005:(e,t,r)=>{"use strict";var s=r(8948);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function forEach(e){s.forEach(this.handlers,(function forEachHandler(t){null!==t&&e(t)}))},e.exports=InterceptorManager},1214:(e,t,r)=>{"use strict";var s=r(7713),a=r(4671);e.exports=function buildFullPath(e,t){return e&&!s(t)?a(e,t):t}},2591:(e,t,r)=>{"use strict";var s=r(7475);e.exports=function createError(e,t,r,a,n){var o=new Error(e);return s(o,t,r,a,n)}},2530:(e,t,r)=>{"use strict";var s=r(8948),a=r(1587),n=r(3583),o=r(14);function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=s.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),s.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function onAdapterResolution(t){return throwIfCancellationRequested(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function onAdapterRejection(t){return n(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},7475:e=>{"use strict";e.exports=function enhanceError(e,t,r,s,a){return e.config=t,r&&(e.code=r),e.request=s,e.response=a,e.isAxiosError=!0,e.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},5682:(e,t,r)=>{"use strict";var s=r(8948);e.exports=function mergeConfig(e,t){t=t||{};var r={},a=["url","method","data"],n=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function getMergedValue(e,t){return s.isPlainObject(e)&&s.isPlainObject(t)?s.merge(e,t):s.isPlainObject(t)?s.merge({},t):s.isArray(t)?t.slice():t}function mergeDeepProperties(a){s.isUndefined(t[a])?s.isUndefined(e[a])||(r[a]=getMergedValue(void 0,e[a])):r[a]=getMergedValue(e[a],t[a])}s.forEach(a,(function valueFromConfig2(e){s.isUndefined(t[e])||(r[e]=getMergedValue(void 0,t[e]))})),s.forEach(n,mergeDeepProperties),s.forEach(o,(function defaultToConfig2(a){s.isUndefined(t[a])?s.isUndefined(e[a])||(r[a]=getMergedValue(void 0,e[a])):r[a]=getMergedValue(void 0,t[a])})),s.forEach(i,(function merge(s){s in t?r[s]=getMergedValue(e[s],t[s]):s in e&&(r[s]=getMergedValue(void 0,e[s]))}));var u=a.concat(n).concat(o).concat(i),l=Object.keys(e).concat(Object.keys(t)).filter((function filterAxiosKeys(e){return-1===u.indexOf(e)}));return s.forEach(l,mergeDeepProperties),r}},5162:(e,t,r)=>{"use strict";var s=r(2591);e.exports=function settle(e,t,r){var a=r.config.validateStatus;r.status&&a&&!a(r.status)?t(s("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},1587:(e,t,r)=>{"use strict";var s=r(8948),a=r(14);e.exports=function transformData(e,t,r){var n=this||a;return s.forEach(r,(function transform(r){e=r.call(n,e,t)})),e}},14:(e,t,r)=>{"use strict";var s=r(8948),a=r(3236),n=r(7475),o={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=r(232):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(e=r(4886)),e}(),transformRequest:[function transformRequest(e,t){return a(t,"Accept"),a(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e)?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)||t&&"application/json"===t["Content-Type"]?(setContentTypeIfUnset(t,"application/json"),function stringifySafely(e,t,r){if(s.isString(e))try{return(t||JSON.parse)(e),s.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function transformResponse(e){var t=this.transitional,r=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!r&&"json"===this.responseType;if(o||a&&s.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw n(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};s.forEach(["delete","get","head"],(function forEachMethodNoData(e){i.headers[e]={}})),s.forEach(["post","put","patch"],(function forEachMethodWithData(e){i.headers[e]=s.merge(o)})),e.exports=i},8365:e=>{"use strict";e.exports=function bind(e,t){return function wrap(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(t,r)}}},3042:(e,t,r)=>{"use strict";var s=r(8948);function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function buildURL(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(s.isURLSearchParams(t))a=t.toString();else{var n=[];s.forEach(t,(function serialize(e,t){null!=e&&(s.isArray(e)?t+="[]":e=[e],s.forEach(e,(function parseValue(e){s.isDate(e)?e=e.toISOString():s.isObject(e)&&(e=JSON.stringify(e)),n.push(encode(t)+"="+encode(e))})))})),a=n.join("&")}if(a){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},4671:e=>{"use strict";e.exports=function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},6065:(e,t,r)=>{"use strict";var s=r(8948);e.exports=s.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(e,t,r,a,n,o){var i=[];i.push(e+"="+encodeURIComponent(t)),s.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),s.isString(a)&&i.push("path="+a),s.isString(n)&&i.push("domain="+n),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function read(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function remove(e){this.write(e,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},7713:e=>{"use strict";e.exports=function isAbsoluteURL(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},9646:e=>{"use strict";e.exports=function isAxiosError(e){return"object"==typeof e&&!0===e.isAxiosError}},6632:(e,t,r)=>{"use strict";var s=r(8948);e.exports=s.isStandardBrowserEnv()?function standardBrowserEnv(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function resolveURL(e){var s=e;return t&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=resolveURL(window.location.href),function isURLSameOrigin(t){var r=s.isString(t)?resolveURL(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function isURLSameOrigin(){return!0}},3236:(e,t,r)=>{"use strict";var s=r(8948);e.exports=function normalizeHeaderName(e,t){s.forEach(e,(function processHeader(r,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[s])}))}},7170:(e,t,r)=>{"use strict";var s=r(8948),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function parseHeaders(e){var t,r,n,o={};return e?(s.forEach(e.split("\n"),(function parser(e){if(n=e.indexOf(":"),t=s.trim(e.substr(0,n)).toLowerCase(),r=s.trim(e.substr(n+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},5338:e=>{"use strict";e.exports=function spread(e){return function wrap(t){return e.apply(null,t)}}},288:(e,t,r)=>{"use strict";var s=r(9697),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function validator(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var n={},o=s.version.split(".");function isOlderVersion(e,t){for(var r=t?t.split("."):o,s=e.split("."),a=0;a<3;a++){if(r[a]>s[a])return!0;if(r[a]<s[a])return!1}return!1}a.transitional=function transitional(e,t,r){var a=t&&isOlderVersion(t);function formatMessage(e,t){return"[Axios v"+s.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,s,o){if(!1===e)throw new Error(formatMessage(s," has been removed in "+t));return a&&!n[s]&&(n[s]=!0,console.warn(formatMessage(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,o)}},e.exports={isOlderVersion,assertOptions:function assertOptions(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var s=Object.keys(e),a=s.length;a-- >0;){var n=s[a],o=t[n];if(o){var i=e[n],u=void 0===i||o(i,n,e);if(!0!==u)throw new TypeError("option "+n+" must be "+u)}else if(!0!==r)throw Error("Unknown option "+n)}},validators:a}},8948:(e,t,r)=>{"use strict";var s=r(8365),a=Object.prototype.toString;function isArray(e){return"[object Array]"===a.call(e)}function isUndefined(e){return void 0===e}function isObject(e){return null!==e&&"object"==typeof e}function isPlainObject(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function isFunction(e){return"[object Function]"===a.call(e)}function forEach(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray,isArrayBuffer:function isArrayBuffer(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function isString(e){return"string"==typeof e},isNumber:function isNumber(e){return"number"==typeof e},isObject,isPlainObject,isUndefined,isDate:function isDate(e){return"[object Date]"===a.call(e)},isFile:function isFile(e){return"[object File]"===a.call(e)},isBlob:function isBlob(e){return"[object Blob]"===a.call(e)},isFunction,isStream:function isStream(e){return isObject(e)&&isFunction(e.pipe)},isURLSearchParams:function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach,merge:function merge(){var e={};function assignValue(t,r){isPlainObject(e[r])&&isPlainObject(t)?e[r]=merge(e[r],t):isPlainObject(t)?e[r]=merge({},t):isArray(t)?e[r]=t.slice():e[r]=t}for(var t=0,r=arguments.length;t<r;t++)forEach(arguments[t],assignValue);return e},extend:function extend(e,t,r){return forEach(t,(function assignValue(t,a){e[a]=r&&"function"==typeof t?s(t,r):t})),e},trim:function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function stripBOM(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},9785:(e,t,r)=>{function load(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(4836)).log=function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function formatArgs(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var s="color: "+this.color;e.splice(1,0,s,"color: inherit");var a=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(n=a))})),e.splice(n,0,s)},t.save=function save(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=load,t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(load())},4836:(e,t,r)=>{var s;function createDebug(e){function debug(){if(debug.enabled){var e=debug,r=+new Date,a=r-(s||r);e.diff=a,e.prev=s,e.curr=r,s=r;for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var i=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(r,s){if("%%"===r)return r;i++;var a=t.formatters[s];if("function"==typeof a){var o=n[i];r=a.call(e,o),n.splice(i,1),i--}return r})),t.formatArgs.call(e,n);var u=debug.log||t.log||console.log.bind(console);u.apply(e,n)}}return debug.namespace=e,debug.enabled=t.enabled(e),debug.useColors=t.useColors(),debug.color=function selectColor(e){var r,s=0;for(r in e)s=(s<<5)-s+e.charCodeAt(r),s|=0;return t.colors[Math.abs(s)%t.colors.length]}(e),"function"==typeof t.init&&t.init(debug),debug}(t=e.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},t.disable=function disable(){t.enable("")},t.enable=function enable(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length,a=0;a<s;a++)r[a]&&("-"===(e=r[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function enabled(e){var r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(472),t.names=[],t.skips=[],t.formatters={}},9661:(e,t,r)=>{"undefined"!=typeof process&&"renderer"===process.type?e.exports=r(9785):e.exports=r(5368)},5368:(e,t,r)=>{var s=r(3867),a=r(1669);(t=e.exports=r(4836)).init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function log(){return o.write(a.format.apply(a,arguments)+"\n")},t.formatArgs=function formatArgs(e){var r=this.namespace;if(this.useColors){var s=this.color,a="  [3"+s+";1m"+r+" [0m";e[0]=a+e[0].split("\n").join("\n"+a),e.push("[3"+s+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function save(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=load,t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(n)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e}),{});var n=parseInt(process.env.DEBUG_FD,10)||2;1!==n&&2!==n&&a.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var o=1===n?process.stdout:2===n?process.stderr:function createWritableStdioStream(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new s.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var a=r(5747);(t=new a.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var n=r(1631);(t=new n.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(n);function load(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)},t.enable(load())},642:(e,t,r)=>{var s;e.exports=function(){if(!s){try{s=r(9661)("follow-redirects")}catch(e){}"function"!=typeof s&&(s=function(){})}s.apply(null,arguments)}},3982:(e,t,r)=>{var s=r(8835),a=s.URL,n=r(8605),o=r(7211),i=r(2413).Writable,u=r(2357),l=r(642),c=["abort","aborted","connect","error","socket","timeout"],h=Object.create(null);c.forEach((function(e){h[e]=function(t,r,s){this._redirectable.emit(e,t,r,s)}}));var d=createErrorType("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),p=createErrorType("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),g=createErrorType("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),f=createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");function RedirectableRequest(e,t){i.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){r._processResponse(e)},this._performRequest()}function wrap(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(n){var o=n+":",i=r[o]=e[n],c=t[n]=Object.create(i);Object.defineProperties(c,{request:{value:function request(e,n,i){if("string"==typeof e){var c=e;try{e=urlToOptions(new a(c))}catch(t){e=s.parse(c)}}else a&&e instanceof a?e=urlToOptions(e):(i=n,n=e,e={protocol:o});return"function"==typeof n&&(i=n,n=null),(n=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,n)).nativeProtocols=r,u.equal(n.protocol,o,"protocol mismatch"),l("options",n),new RedirectableRequest(n,i)},configurable:!0,enumerable:!0,writable:!0},get:{value:function get(e,t,r){var s=c.request(e,t,r);return s.end(),s},configurable:!0,enumerable:!0,writable:!0}})})),t}function noop(){}function urlToOptions(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function removeMatchingHeaders(e,t){var r;for(var s in t)e.test(s)&&(r=t[s],delete t[s]);return null==r?void 0:String(r).trim()}function createErrorType(e,t){function CustomError(e){Error.captureStackTrace(this,this.constructor),e?(this.message=t+": "+e.message,this.cause=e):this.message=t}return CustomError.prototype=new Error,CustomError.prototype.constructor=CustomError,CustomError.prototype.name="Error ["+e+"]",CustomError.prototype.code=e,CustomError}function abortRequest(e){for(var t=0;t<c.length;t++)e.removeListener(c[t],h[c[t]]);e.on("error",noop),e.abort()}RedirectableRequest.prototype=Object.create(i.prototype),RedirectableRequest.prototype.abort=function(){abortRequest(this._currentRequest),this.emit("abort")},RedirectableRequest.prototype.write=function(e,t,r){if(this._ending)throw new f;if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new g),this.abort()):r&&r()},RedirectableRequest.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var s=this,a=this._currentRequest;this.write(e,t,(function(){s._ended=!0,a.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},RedirectableRequest.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},RedirectableRequest.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},RedirectableRequest.prototype.setTimeout=function(e,t){var r=this;function destroyOnTimeout(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function startTimer(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout((function(){r.emit("timeout"),clearTimer()}),e),destroyOnTimeout(t)}function clearTimer(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",clearTimer),r.removeListener("error",clearTimer),r.removeListener("response",clearTimer),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",startTimer)}return t&&this.on("timeout",t),this.socket?startTimer(this.socket):this._currentRequest.once("socket",startTimer),this.on("socket",destroyOnTimeout),this.on("abort",clearTimer),this.on("error",clearTimer),this.on("response",clearTimer),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){RedirectableRequest.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(RedirectableRequest.prototype,e,{get:function(){return this._currentRequest[e]}})})),RedirectableRequest.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},RedirectableRequest.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var a=this._currentRequest=t.request(this._options,this._onNativeResponse);this._currentUrl=s.format(this._options),a._redirectable=this;for(var n=0;n<c.length;n++)a.on(c[n],h[c[n]]);if(this._isRedirect){var o=0,i=this,u=this._requestBodyBuffers;!function writeNext(e){if(a===i._currentRequest)if(e)i.emit("error",e);else if(o<u.length){var t=u[o++];a.finished||a.write(t.data,t.encoding,writeNext)}else i._ended&&a.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},RedirectableRequest.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(!r||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(abortRequest(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)this.emit("error",new p);else{((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],removeMatchingHeaders(/^content-/i,this._options.headers));var a,n=removeMatchingHeaders(/^host$/i,this._options.headers),o=s.parse(this._currentUrl),i=n||o.host,u=/^\w+:/.test(r)?this._currentUrl:s.format(Object.assign(o,{host:i}));try{a=s.resolve(u,r)}catch(e){return void this.emit("error",new d(e))}l("redirecting to",a),this._isRedirect=!0;var c=s.parse(a);if(Object.assign(this._options,c),(c.protocol!==o.protocol&&"https:"!==c.protocol||c.host!==i&&!function isSubdomain(e,t){const r=e.length-t.length-1;return r>0&&"."===e[r]&&e.endsWith(t)}(c.host,i))&&removeMatchingHeaders(/^(?:authorization|cookie)$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var h={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,h)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){this.emit("error",new d(e))}}},e.exports=wrap({http:n,https:o}),e.exports.wrap=wrap},472:e=>{var t=1e3,r=60*t,s=60*r,a=24*s,n=365.25*a;function plural(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,o){o=o||{};var i=typeof e;if("string"===i&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o)return;var i=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*s;case"minutes":case"minute":case"mins":case"min":case"m":return i*r;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(e);if("number"===i&&!1===isNaN(e))return o.long?function fmtLong(e){return plural(e,a,"day")||plural(e,s,"hour")||plural(e,r,"minute")||plural(e,t,"second")||e+" ms"}(e):function fmtShort(e){if(e>=a)return Math.round(e/a)+"d";if(e>=s)return Math.round(e/s)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7105:(e,t,r)=>{var s=r(6043),a=r(9432),n=a;n.v1=s,n.v4=a,e.exports=n},2817:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function bytesToUuid(e,r){var s=r||0,a=t;return[a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]]].join("")}},7157:(e,t,r)=>{var s=r(6417);e.exports=function nodeRNG(){return s.randomBytes(16)}},6043:(e,t,r)=>{var s,a,n=r(7157),o=r(2817),i=0,u=0;e.exports=function v1(e,t,r){var l=t&&r||0,c=t||[],h=(e=e||{}).node||s,d=void 0!==e.clockseq?e.clockseq:a;if(null==h||null==d){var p=n();null==h&&(h=s=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=a=16383&(p[6]<<8|p[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:u+1,m=g-i+(f-u)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||g>i)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=g,u=f,a=d;var y=(1e4*(268435455&(g+=122192928e5))+f)%4294967296;c[l++]=y>>>24&255,c[l++]=y>>>16&255,c[l++]=y>>>8&255,c[l++]=255&y;var b=g/4294967296*1e4&268435455;c[l++]=b>>>8&255,c[l++]=255&b,c[l++]=b>>>24&15|16,c[l++]=b>>>16&255,c[l++]=d>>>8|128,c[l++]=255&d;for(var E=0;E<6;++E)c[l+E]=h[E];return t||o(c)}},9432:(e,t,r)=>{var s=r(7157),a=r(2817);e.exports=function v4(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||a(o)}},6849:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArabicLanguageModel:()=>ArabicLanguageModel,Author:()=>Ws,ChineseLanguageModel:()=>ChineseLanguageModel,Collection:()=>Collection,Constants:()=>s,DefaultsLoader:()=>DefaultsLoader,Definition:()=>ms,DefinitionSet:()=>DefinitionSet,ExtensionSyncStorage:()=>ExtensionSyncStorage,Feature:()=>Feature,FeatureImporter:()=>ys,FeatureList:()=>ks,FeatureType:()=>Es,GeezLanguageModel:()=>GeezLanguageModel,GreekLanguageModel:()=>GreekLanguageModel,GrmFeature:()=>js,Homonym:()=>zs,HomonymGroup:()=>HomonymGroup,Inflection:()=>Gs,LanguageModelFactory:()=>Us,LatinLanguageModel:()=>LatinLanguageModel,Lemma:()=>qs,Lexeme:()=>$s,LocalStorageArea:()=>LocalStorageArea,Logger:()=>Logger,Options:()=>Options,PersianLanguageModel:()=>PersianLanguageModel,PsEvent:()=>PsEvent,PsEventData:()=>PsEventData,RemoteAuthStorageArea:()=>RemoteAuthStorageArea,Resource:()=>Resource,ResourceProvider:()=>fs,SyriacLanguageModel:()=>SyriacLanguageModel,Tab:()=>Tab,TabScript:()=>TabScript,TempStorageArea:()=>TempStorageArea,TextQuoteSelector:()=>TextQuoteSelector,TextWork:()=>Hs,Translation:()=>Bs,TreebankDataItem:()=>TreebankDataItem,UIStateAPI:()=>UIStateAPI,WordItem:()=>WordItem,WordList:()=>WordList,WordUsageExample:()=>WordUsageExample});var s={};r.r(s),r.d(s,{CASE_ABESSIVE:()=>pe,CASE_ABLATIVE:()=>ge,CASE_ABSOLUTIVE:()=>fe,CASE_ACCUSATIVE:()=>me,CASE_ADDIRECTIVE:()=>ye,CASE_ADELATIVE:()=>be,CASE_ADESSIVE:()=>Ee,CASE_ADVERBIAL:()=>ve,CASE_ALLATIVE:()=>Ie,CASE_ANTESSIVE:()=>we,CASE_APUDESSIVE:()=>Se,CASE_AVERSIVE:()=>_e,CASE_BENEFACTIVE:()=>Ae,CASE_CARITIVE:()=>Te,CASE_CAUSAL:()=>Oe,CASE_CAUSAL_FINAL:()=>Ce,CASE_COMITATIVE:()=>De,CASE_DATIVE:()=>Le,CASE_DELATIVE:()=>Fe,CASE_DIRECT:()=>xe,CASE_DISTRIBUTIVE:()=>Re,CASE_DISTRIBUTIVE_TEMPORAL:()=>Ne,CASE_ELATIVE:()=>Pe,CASE_EQUATIVE:()=>ke,CASE_ERGATIVE:()=>Ve,CASE_ESSIVE:()=>Me,CASE_ESSIVE_FORMAL:()=>Ue,CASE_ESSIVE_MODAL:()=>je,CASE_EVITATIVE:()=>Be,CASE_EXESSIVE:()=>qe,CASE_FINAL:()=>Ge,CASE_FORMAL:()=>$e,CASE_GENITIVE:()=>ze,CASE_ILLATIVE:()=>We,CASE_INELATIVE:()=>He,CASE_INESSIVE:()=>Je,CASE_INSTRUCTIVE:()=>Ke,CASE_INSTRUMENTAL:()=>Ye,CASE_INSTRUMENTAL_COMITATIVE:()=>Xe,CASE_INTRANSITIVE:()=>Qe,CASE_LATIVE:()=>Ze,CASE_LOCATIVE:()=>et,CASE_MODAL:()=>tt,CASE_MULTIPLICATIVE:()=>rt,CASE_NOMINATIVE:()=>st,CASE_PARTITIVE:()=>at,CASE_PEGATIVE:()=>nt,CASE_PERLATIVE:()=>ot,CASE_POSSESSIVE:()=>it,CASE_POSTDIRECTIVE:()=>lt,CASE_POSTELATIVE:()=>ut,CASE_POSTESSIVE:()=>ct,CASE_POSTPOSITIONAL:()=>ht,CASE_PREPOSITIONAL:()=>dt,CASE_PRIVATIVE:()=>pt,CASE_PROLATIVE:()=>gt,CASE_PROSECUTIVE:()=>ft,CASE_PROXIMATIVE:()=>mt,CASE_SEPARATIVE:()=>yt,CASE_SOCIATIVE:()=>bt,CASE_SUBDIRECTIVE:()=>Et,CASE_SUBELATIVE:()=>It,CASE_SUBESSIVE:()=>vt,CASE_SUBLATIVE:()=>wt,CASE_SUPERDIRECTIVE:()=>St,CASE_SUPERESSIVE:()=>_t,CASE_SUPERLATIVE:()=>At,CASE_SUPPRESSIVE:()=>Tt,CASE_TEMPORAL:()=>Ot,CASE_TERMINATIVE:()=>Ct,CASE_TRANSLATIVE:()=>Dt,CASE_VIALIS:()=>Lt,CASE_VOCATIVE:()=>Ft,CLASS_DEMONSTRATIVE:()=>ns,CLASS_GENERAL_RELATIVE:()=>us,CLASS_INDEFINITE:()=>ls,CLASS_INTENSIVE:()=>cs,CLASS_INTERROGATIVE:()=>is,CLASS_PERSONAL:()=>rs,CLASS_POSSESSIVE:()=>as,CLASS_RECIPROCAL:()=>hs,CLASS_REFLEXIVE:()=>ss,CLASS_RELATIVE:()=>os,COMP_COMPARITIVE:()=>he,COMP_POSITIVE:()=>ce,COMP_SUPERLATIVE:()=>de,GEND_ANIMATE:()=>ne,GEND_ANIMATE_MASCULINE:()=>ue,GEND_COMMON:()=>ae,GEND_FEMININE:()=>re,GEND_INANIMATE:()=>oe,GEND_INANIMATE_MASCULINE:()=>le,GEND_MASCULINE:()=>te,GEND_NEUTER:()=>se,GEND_PERSONAL_MASCULINE:()=>ie,LANG_ARABIC:()=>h,LANG_CHINESE:()=>g,LANG_DIR_LTR:()=>o,LANG_DIR_RTL:()=>i,LANG_GEEZ:()=>p,LANG_GREEK:()=>c,LANG_LATIN:()=>l,LANG_PERSIAN:()=>d,LANG_SYRIAC:()=>f,LANG_UNDEFINED:()=>u,LANG_UNIT_CHAR:()=>n,LANG_UNIT_WORD:()=>a,MOOD_ADMIRATIVE:()=>xt,MOOD_COHORTATIVE:()=>Rt,MOOD_CONDITIONAL:()=>Nt,MOOD_DECLARATIVE:()=>Pt,MOOD_DUBITATIVE:()=>Vt,MOOD_ENERGETIC:()=>Mt,MOOD_EVENTIVE:()=>Ut,MOOD_GENERIC:()=>jt,MOOD_GERUNDIVE:()=>kt,MOOD_HYPOTHETICAL:()=>Bt,MOOD_IMPERATIVE:()=>qt,MOOD_INDICATIVE:()=>Gt,MOOD_INFERENTIAL:()=>$t,MOOD_INFINITIVE:()=>zt,MOOD_INTERROGATIVE:()=>Wt,MOOD_JUSSIVE:()=>Ht,MOOD_NEGATIVE:()=>Jt,MOOD_OPTATIVE:()=>Kt,MOOD_PARTICIPLE:()=>Yt,MOOD_PRESUMPTIVE:()=>Xt,MOOD_RENARRATIVE:()=>Qt,MOOD_SUBJUNCTIVE:()=>Zt,MOOD_SUPINE:()=>er,NRL_CARDINAL:()=>lr,NRL_DISTRIBUTIVE:()=>hr,NRL_ORDINAL:()=>cr,NUM_COLLECTIVE:()=>ir,NUM_DISTRIBUTIVE_PLURAL:()=>ur,NUM_DUAL:()=>sr,NUM_PAUCAL:()=>nr,NUM_PLURAL:()=>rr,NUM_SINGULAR:()=>tr,NUM_SINGULATIVE:()=>or,NUM_TRIAL:()=>ar,NURL_NUMERAL_ADVERB:()=>dr,ORD_1ST:()=>pr,ORD_2ND:()=>gr,ORD_3RD:()=>fr,ORD_4TH:()=>mr,ORD_5TH:()=>yr,ORD_6TH:()=>br,ORD_7TH:()=>Er,ORD_8TH:()=>vr,ORD_9TH:()=>Ir,PARADIGM_CAT_KAYLO:()=>ds,PARADIGM_CAT_STATE:()=>ps,POFS_ADJECTIVE:()=>P,POFS_ADVERB:()=>V,POFS_ADVERBIAL:()=>M,POFS_ARTICLE:()=>U,POFS_CONJUNCTION:()=>j,POFS_DENOMINATIVE:()=>ee,POFS_EXCLAMATION:()=>k,POFS_GERUNDIVE:()=>Y,POFS_INTERJECTION:()=>B,POFS_NOUN:()=>q,POFS_NOUN_PROPER:()=>G,POFS_NUMERAL:()=>$,POFS_PARTICLE:()=>z,POFS_PREFIX:()=>W,POFS_PREPOSITION:()=>H,POFS_PRONOUN:()=>J,POFS_SUFFIX:()=>K,POFS_SUPINE:()=>X,POFS_VERB:()=>Q,POFS_VERB_PARTICIPLE:()=>Z,STR_LANG_CODE_AR:()=>I,STR_LANG_CODE_ARA:()=>v,STR_LANG_CODE_ENG:()=>N,STR_LANG_CODE_FA:()=>A,STR_LANG_CODE_FAS:()=>w,STR_LANG_CODE_FA_IR:()=>_,STR_LANG_CODE_GEZ:()=>T,STR_LANG_CODE_GRC:()=>E,STR_LANG_CODE_LA:()=>b,STR_LANG_CODE_LAT:()=>y,STR_LANG_CODE_PER:()=>S,STR_LANG_CODE_SYC:()=>F,STR_LANG_CODE_SYR:()=>x,STR_LANG_CODE_SYR_SYRJ:()=>R,STR_LANG_CODE_UNDEFINED:()=>m,STR_LANG_CODE_ZH:()=>C,STR_LANG_CODE_ZHO:()=>O,STR_LANG_CODE_ZH_HANS:()=>L,STR_LANG_CODE_ZH_HANT:()=>D,TENSE_AORIST:()=>wr,TENSE_FUTURE:()=>Sr,TENSE_FUTURE_PERFECT:()=>_r,TENSE_IMPERFECT:()=>Ar,TENSE_PAST_ABSOLUTE:()=>Tr,TENSE_PERFECT:()=>Or,TENSE_PLUPERFECT:()=>Cr,TENSE_PRESENT:()=>Dr,TYPE_IRREGULAR:()=>es,TYPE_REGULAR:()=>ts,VKIND_COMPOUNDS_OF_TO_BE:()=>Fr,VKIND_DEPONENT:()=>Ur,VKIND_IMPERSONAL:()=>Mr,VKIND_INTRANSITIVE:()=>Vr,VKIND_PERFECT_DEFINITE:()=>kr,VKIND_SEMIDEPONENT:()=>jr,VKIND_TAKING_ABLATIVE:()=>xr,VKIND_TAKING_DATIVE:()=>Rr,VKIND_TAKING_GENITIVE:()=>Nr,VKIND_TO_BE:()=>Lr,VKIND_TRANSITIVE:()=>Pr,VOICE_ACTIVE:()=>Br,VOICE_ADJUTATIVE:()=>Yr,VOICE_ANTIPASSIVE:()=>Wr,VOICE_APPLICATIVE:()=>Xr,VOICE_CAUSATIVE:()=>Kr,VOICE_CIRCUMSTANTIAL:()=>Qr,VOICE_DEPONENT:()=>Zr,VOICE_IMPERSONAL_PASSIVE:()=>$r,VOICE_MEDIOPASSIVE:()=>Gr,VOICE_MIDDLE:()=>zr,VOICE_PASSIVE:()=>qr,VOICE_RECIPROCAL:()=>Jr,VOICE_REFLEXIVE:()=>Hr});const a=Symbol("word"),n=Symbol("char"),o=Symbol("ltr"),i=Symbol("rtl"),u=Symbol("undefined"),l=Symbol("latin"),c=Symbol("greek"),h=Symbol("arabic"),d=Symbol("persian"),p=Symbol("ge'ez"),g=Symbol("chinese"),f=Symbol("syriac"),m="undefined",y="lat",b="la",E="grc",v="ara",I="ar",w="fas",S="per",_="fa-IR",A="fa",T="gez",O="zho",C="zh",D="zh-Hant",L="zh-Hans",F="syc",x="syr",R="syr-Syrj",N="eng",P="adjective",V="adverb",M="adverbial",U="article",j="conjunction",k="exclamation",B="interjection",q="noun",G="proper noun",$="numeral",z="particle",W="prefix",H="preposition",J="pronoun",K="suffix",Y="gerundive",X="supine",Q="verb",Z="verb participle",ee="denominative",te="masculine",re="feminine",se="neuter",ae="common",ne="animate",oe="inanimate",ie="personal masculine",ue="animate masculine",le="inanimate masculine",ce="positive",he="comparative",de="superlative",pe="abessive",ge="ablative",fe="absolutive",me="accusative",ye="addirective",be="adelative",Ee="adessive",ve="adverbial",Ie="allative",we="antessive",Se="apudessive",_e="aversive",Ae="benefactive",Te="caritive",Oe="causal",Ce="causal-final",De="comitative",Le="dative",Fe="delative",xe="direct",Re="distributive",Ne="distributive-temporal",Pe="elative",Ve="ergative",Me="essive",Ue="essive-formal",je="essive-modal",ke="equative",Be="evitative",qe="exessive",Ge="final",$e="formal",ze="genitive",We="illative",He="inelative",Je="inessive",Ke="instructive",Ye="instrumental",Xe="instrumental-comitative",Qe="intransitive",Ze="lative",et="locative",tt="modal",rt="multiplicative",st="nominative",at="partitive",nt="pegative",ot="perlative",it="possessive",ut="postelative",lt="postdirective",ct="postessive",ht="postpositional",dt="prepositional",pt="privative",gt="prolative",ft="prosecutive",mt="proximative",yt="separative",bt="sociative",Et="subdirective",vt="subessive",It="subelative",wt="sublative",St="superdirective",_t="superessive",At="superlative",Tt="suppressive",Ot="temporal",Ct="terminative",Dt="translative",Lt="vialis",Ft="vocative",xt="admirative",Rt="cohortative",Nt="conditional",Pt="declarative",Vt="dubitative",Mt="energetic",Ut="eventive",jt="generic",kt="gerundive",Bt="hypothetical",qt="imperative",Gt="indicative",$t="inferential",zt="infinitive",Wt="interrogative",Ht="jussive",Jt="negative",Kt="optative",Yt="participle",Xt="presumptive",Qt="renarrative",Zt="subjunctive",er="supine",tr="singular",rr="plural",sr="dual",ar="trial",nr="paucal",or="singulative",ir="collective",ur="distributive plural",lr="cardinal",cr="ordinal",hr="distributive",dr="numeral adverb",pr="1st",gr="2nd",fr="3rd",mr="4th",yr="5th",br="6th",Er="7th",vr="8th",Ir="9th",wr="aorist",Sr="future",_r="future perfect",Ar="imperfect",Tr="past absolute",Or="perfect",Cr="pluperfect",Dr="present",Lr="to be",Fr="compounds of to be",xr="taking ablative",Rr="taking dative",Nr="taking genitive",Pr="transitive",Vr="intransitive",Mr="impersonal",Ur="deponent",jr="semideponent",kr="perfect definite",Br="active",qr="passive",Gr="mediopassive",$r="impersonal passive",zr="middle",Wr="antipassive",Hr="reflexive",Jr="reciprocal",Kr="causative",Yr="adjutative",Xr="applicative",Qr="circumstantial",Zr="deponent",es="irregular",ts="regular",rs="personal",ss="reflexive",as="possessive",ns="demonstrative",os="relative",is="interrogative",us="general relative",ls="indefinite",cs="intensive",hs="reciprocal",ds="kaylo",ps="state";var gs=r(7105);class ResourceProvider{constructor(e="",t="",r=new Map([["default",t]])){this.uri=e,this.rights=r,this.rights.has("default")||this.rights.set("default",t)}toString(){return this.rights.get("default")}toLocaleString(e){return this.rights.get(e)||this.rights.get("default")}static getProxy(e=null,t={}){return new Proxy(t,{get:function(t,r){return"provider"===r?e:t[r]}})}convertToJSONObject(){let e={};for(const[t,r]of this.rights.entries())e[t]=r;return{uri:this.uri,rights:e}}static readObject(e){const t=new Map;return e.rights&&Object.keys(e.rights).forEach((r=>{t.set(r,e.rights[r])})),new ResourceProvider(e.uri,"",t)}}const fs=ResourceProvider;class Definition{constructor(e,t,r,s){this.text=e,this.language=t,this.format=r,this.lemmaText=s,this.ID=(0,gs.v4)()}static readObject(e){let t=new Definition(e.text,e.language,e.format,e.lemmaText);if(e.ID&&(t.ID=e.ID),e.provider){const r=fs.readObject(e.provider);return fs.getProxy(r,t)}return t}convertToJSONObject(){let e={text:this.text,language:this.language,format:this.format,lemmaText:this.lemmaText,ID:this.ID};return this.provider&&(e.provider=this.provider.convertToJSONObject()),e}}const ms=Definition;const ys=class FeatureImporter{constructor(e=[],t=!1){this.hash={};for(const t of e)this.map(t,t);return this.returnUnknown=t,this}map(e,t){if(!e)throw new Error("Imported value should not be empty.");if(!t)throw new Error("Library value should not be empty.");return this.hash[e]=t,this}has(e){return this.hash.hasOwnProperty(e)}get(e){if(this.has(e))return this.hash[e];if(this.returnUnknown)return e;throw new Error('A value "'+e+'" is not found in the importer.')}};let bs;class Logger{constructor({verbose:e=!1,prepend:t=!0,trace:r=!1}={}){this._verboseMode=e,this._prependMode=t,this._traceMode=r}static getInstance(e={}){return bs?(void 0!==e.verbose&&(console.info("Setting a verbose mode"),bs.setVerboseMode(e.verbose)),void 0!==e.prepend&&(console.info("Setting a prepend mode"),bs.setVerboseMode(e.prepend)),void 0!==e.trace&&(console.info("Setting a trace mode"),bs.setTraceMode(e.trace))):bs=new Logger(e),bs}setVerboseMode(e){return this._verboseMode=e,this}setPrependMode(e){return this._prependMode=e,this}setTraceMode(e){return this._traceMode=e,this}verboseModeOn(){return this.setVerboseMode(!0),this}verboseModeOff(){return this.setVerboseMode(!1),this}prependModeOn(){return this.setPrependMode(!0),this}prependModeOff(){return this.setPrependMode(!1),this}traceModeOn(){return this.setTraceMode(!0),this}traceModeOff(){return this.setTraceMode(!1),this}error(...e){this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]=`Alpheios error: ${e[0]}`),console.error(...e),this._traceMode&&console.trace()}warn(...e){this._verboseMode&&(this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]=`Alpheios warn: ${e[0]}`),console.warn(...e),this._traceMode&&console.trace())}log(...e){this._verboseMode&&(this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]=`Alpheios log: ${e[0]}`),console.log(...e),this._traceMode&&console.trace())}info(...e){this._verboseMode&&(this._prependMode&&e&&e.length>0&&"string"==typeof e[0]&&(e[0]=`Alpheios info: ${e[0]}`),console.info(...e),this._traceMode&&console.trace())}}class Feature{constructor(e,t,r,s=1,a=[]){if(!Feature.isAllowedType(e))throw new Error('Features of "'+e+'" type are not supported.');if(!t)throw new Error("Feature should have a non-empty value(s).");if(!r)throw new Error("No language ID is provided");this.type=e,this.languageID=r,this.sortOrder=s,this.allowedValues=a,this._data=Feature.dataValuesFromInput(t),this.sort()}static dataValuesFromInput(e){let t;return t=Array.isArray(e)?Array.isArray(e[0])?e:e.map(((t,r)=>[t,e.length-r])):[[e,this.defaultSortOrder]],t.map((e=>({value:e[0],sortOrder:Number.parseInt(e[1])})))}static newFromFtr(e){}static get types(){return{word:"word",fullForm:"full form",hdwd:"headword",part:"part of speech",number:"number",case:"case",grmCase:"case",declension:"declension",gender:"gender",type:"type",class:"class",grmClass:"class",conjugation:"conjugation",comparison:"comparison",tense:"tense",voice:"voice",mood:"mood",person:"person",frequency:"frequency",meaning:"meaning",source:"source",footnote:"footnote",dialect:"dialect",note:"note",pronunciation:"pronunciation",age:"age",area:"area",geo:"geo",kind:"kind",derivtype:"derivtype",stemtype:"stemtype",morph:"morph",var:"var",radical:"radical",kaylo:"kaylo",state:"state"}}static isAllowedType(e){return Object.values(this.types).includes(`${e}`)}static get defaultSortOrder(){return 1}static get joinSeparator(){return" "}static get defaultImporterName(){return"default"}get allowsUnrestrictedValues(){return 0===this.allowedValues.length}sort(){this._data.sort(((e,t)=>e.sortOrder!==t.sortOrder?t.sortOrder-e.sortOrder:e.value.localeCompare(t.value)))}compareTo(e){return e?e._data[0].sortOrder-this._data[0].sortOrder:-1}get items(){return this._data}get value(){return this.values.join(this.constructor.joinSeparator)}get singleValue(){if(0!==this._data.length){if(this._data.length>1)throw new Error(Feature.errMsgs.NO_SINGLE_VALUE);return this._data[0].value}}get values(){return this._data.map((e=>e.value))}getValue(e){return this._data.find((t=>t.value===e))}get valQty(){return this._data.length}get isEmpty(){return 0===this.valQty}get isSingle(){return 1===this.valQty}get isMultiple(){return this.valQty>1}toString(){return this.value}hasValue(e){return this.values.includes(e)}hasValues(e){let t=!0;for(const r of e)t=t&&this.hasValue(r);return t}hasSomeValues(e){let t=!1;for(const r of e)t=t||this.hasValue(r);return t}get valuesUnrestricted(){return 0===this.allowedValues.length}isEqual(e){return e&&this.type===e.type&&Us.compareLanguages(this.languageID,e.languageID)&&this.value===e.value}addValue(e,t=this.constructor.defaultSortOrder){return this.hasValue(e)?Logger.getInstance().warn(`Value "${e}" already exists. If you want to change it, use "getValue" to access it directly.`):(this._data.push({value:e,sortOrder:t}),this.sort()),this}addValues(e){const t=this.constructor.dataValuesFromInput(e),r=t.map((e=>e.value));return this.hasSomeValues(r)?Logger.getInstance().warn(`One or several values from "${r}" already exist. If you want to change it, use "getValue" to access a value directly.`):(this._data=this._data.concat(t),this.sort()),this}removeValue(e){Logger.getInstance().warn("This feature is not implemented yet")}createFeature(e,t=this.constructor.defaultSortOrder){return new Feature(this.type,[[e,t]],this.languageID,this.sortOrder,this.allowedValues)}createFeatures(e){return new Feature(this.type,e,this.languageID,this.sortOrder,this.allowedValues)}get ownFeatures(){return this.values.map((e=>new Feature(this.type,e,this.languageID,1,this.allowedValues)))}getCopy(){const e=this._data.map((e=>[e.value,e.sortOrder]));return new Feature(this.type,e,this.languageID,this.sortOrder,this.allowedValues.slice())}addImporter(e=new ys,t=this.constructor.defaultImporterName){return this.importers||(this.importers=new Map),this.importers.set(t,e),e}getImporter(e=this.constructor.defaultImporterName){if(!this.importers||!this.importers.has(e))throw new Error(`Importer "${e}" does not exist`);return this.importers.get(e)}addFromImporter(e,t=this.constructor.defaultImporterName){if(!this.importers||!this.importers.has(t))throw new Error(`Importer "${t}" does not exist`);const r=this.importers.get(t);return e=this.constructor.dataValuesFromInput(e),this._data.push(...e.map((e=>({value:r.get(e.value),sortOrder:e.sortOrder})))),this.sort(),this}createFromImporter(e,t=this.constructor.defaultImporterName){if(!this.importers||!this.importers.has(t))throw new Error(`Importer "${t}" does not exist`);const r=this.importers.get(t);Array.isArray(e)||(e=[e]);let s=e.map((e=>r.get(e)));return s=s.reduce(((e,t)=>e.concat(t)),[]),new Feature(this.type,s,this.languageID,this.sortOrder,this.allowedValues)}convertToJSONObject(){const e=this._data.map((e=>[e.value,e.sortOrder]));return{type:this.type,languageCode:Us.getLanguageCodeFromId(this.languageID),sortOrder:this.sortOrder,allowedValues:this.allowedValues,data:e}}static readObject(e){const t=Us.getLanguageIdFromCode(e.languageCode);return new Feature(e.type,e.data,t,e.sortOrder,e.allowedValues)}}Feature.errMsgs={NO_SINGLE_VALUE:"More than one value stored"};class FeatureType{constructor(e,t,r){if(!t||!Array.isArray(t))throw new Error("Values should be an array (or an empty array) of values.");if(!r)throw new Error("FeatureType constructor requires a language");this.type=e,this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Us.getLanguageAttrs(r)),this._orderIndex=[],this._orderLookup={};for(const[e,r]of t.entries())if(this._orderIndex.push(r),Array.isArray(r))for(const t of r)this[t]=new Feature(this.type,t,this.languageID),this._orderLookup[t]=e;else this[r]=new Feature(this.type,r,this.languageID),this._orderLookup[r]=e}get language(){return Logger.getInstance().warn('Please use a "languageID" instead of a "language"'),this.languageCode}hasUnrestrictedValue(){return 1===this.orderedValues.length&&this.orderedValues[0]===FeatureType.UNRESTRICTED_VALUE}get(e,t=1){if(e)return new Feature(this.type,[[e,t]],this.languageID);throw new Error("A non-empty value should be provided.")}getValues(e){return new Feature(this.type,e,this.languageID)}getFromImporter(e,t){let r;try{r=this.importer[e].get(t)}catch(e){r=this.get(t)}return r}addImporter(e){if(!e)throw new Error("Importer should have a non-empty name.");return this.importer=this.importer||{},this.importer[e]=this.importer[e]||new ys,this.importer[e]}get orderedFeatures(){return this.orderedValues.map((e=>new Feature(this.type,e,this.languageID)))}get orderedValues(){return this._orderIndex}get orderLookup(){return this._orderLookup}set order(e){if(!e||Array.isArray(e)&&0===e.length)throw new Error("A non-empty list of values should be provided.");Array.isArray(e)||(e=[e]);for(const t of e)if(Array.isArray(t))for(const e of t){if(!this.hasOwnProperty(e.value))throw new Error('Trying to order an element with "'+e.value+'" value that is not stored in a "'+this.type+'" type.');if(e.type!==this.type)throw new Error('Trying to order an element with type "'+e.type+'" that is different from "'+this.type+'".');if(!Us.compareLanguages(e.languageID,this.languageID))throw new Error(`Trying to order an element with language "${e.languageID.toString()}" that is different from "${this.languageID.toString()}"`)}else{if(!this.hasOwnProperty(t.value))throw new Error('Trying to order an element with "'+t.value+'" value that is not stored in a "'+this.type+'" type.');if(t.type!==this.type)throw new Error('Trying to order an element with type "'+t.type+'" that is different from "'+this.type+'".');if(!Us.compareLanguages(t.languageID,this.languageID))throw new Error(`Trying to order an element with language "${t.languageID.toString()}" that is different from "${this.languageID.toString()}"`)}this._orderLookup={},this._orderIndex=[];for(const[t,r]of e.entries())if(Array.isArray(r)){let e=[];for(const s of r)this._orderLookup[s.value]=t,e.push(s.value);this._orderIndex[t]=e}else this._orderLookup[r.value]=t,this._orderIndex[t]=r.value}}FeatureType.UNRESTRICTED_VALUE=Symbol("unrestricted");const Es=FeatureType;const vs=class InflectionGroupingKey{constructor(e,t,r={}){for(const r of t)this[r]=e[r];Object.assign(this,r)}hasFeatureValue(e,t){return!!this.hasOwnProperty(e)&&this[e].values.includes(t)}toString(){let e=[];for(const t of Object.getOwnPropertyNames(this).sort()){const r=this[t]instanceof Feature?this[t].values.sort().join(","):this[t];e.push(r)}return e.join(" ")}};const Is=class InflectionGroup{constructor(e,t=[],r=null){this.groupingKey=e,this.inflections=t}append(e){this.inflections.push(e)}};class LanguageModel{constructor(){this.context_backward=LanguageModel.contextBackward}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return a}get contextForward(){return Logger.getInstance().warn('Please use static "contextForward" instead'),this.constructor.contextForward}get contextBackward(){return Logger.getInstance().warn('Please use static "contextBackward" instead'),this.constructor.contextBackward}get direction(){return Logger.getInstance().warn('Please use static "direction" instead'),this.constructor.direction}get baseUnit(){return Logger.getInstance().warn('Please use static "baseUnit" instead'),this.constructor.baseUnit}get features(){return Logger.getInstance().warn('Please use individual "getFeatureType" or static "features" instead'),this.constructor.features}static get featureNames(){return this.featureValues.keys()}static typeFeature(e){if(this.typeFeatures.has(e))return this.typeFeatures.get(e);throw new Error(`Type feature "${e}" is not defined within "${this}"`)}static get typeFeatures(){Logger.getInstance().warn("This getter must be defined in a descendant class")}static get features(){let e={};for(const t of this.featureNames)e[t]=this.getFeature(t);return e}static get languageID(){return u}static get languageCode(){return m}static get languageCodes(){return[]}static get codes(){return Logger.getInstance().warn('Use static "languageCodes" instead'),this.languageCodes}get codes(){return Logger.getInstance().warn('Please use a static version of "codes" instead'),this.constructor.languageCodes}toCode(){return Logger.getInstance().warn('Please use a static "languageCode" instead'),this.constructor.languageCode}static toCode(){return Logger.getInstance().warn('Please use a static "languageCode" instead'),this.languageCode}static get featureValues(){return new Map([[Feature.types.part,[V,M,P,U,j,k,B,q,$,z,W,H,J,K,X,Q,Z]],[Feature.types.gender,[te,re,se]],[Feature.types.type,[ts,es]],[Feature.types.person,[pr,gr,fr]],[Feature.types.number,[tr,rr]],[Feature.types.age,[]],[Feature.types.area,[]],[Feature.types.source,[]],[Feature.types.frequency,[]],[Feature.types.geo,[]],[Feature.types.pronunciation,[]],[Feature.types.kind,[]],[Feature.types.comparison,[]],[Feature.types.morph,[]],[Feature.types.stemtype,[]],[Feature.types.derivtype,[]]])}static get sourceLanguage(){return Logger.getInstance().warn("Please use languageID directly"),this.languageID}get sourceLanguage(){return Logger.getInstance().warn("Please use languageID directly"),this.constructor.languageID}static getFeatureType(e){Logger.getInstance().warn("Please use getFeature instead");const t=this.featureValues;if(t.has(e))return new Es(e,t.get(e),this.languageID);throw new Error(`Feature "${e}" is not defined`)}static getFeature(e){const t=this.featureValues;if(t.has(e)){const r=t.get(e);return new Feature(e,r,this.languageID,1,r)}throw new Error(`Feature "${e}" is not defined`)}_initializeFeatures(){const e={};for(const t of this.constructor.featureValues.keys())e[t]=this.constructor.getFeature(t);return e}grammarFeatures(){return Logger.getInstance().warn('Please use a static version of "grammarFeatures" instead'),this.constructor.grammarFeatures()}static grammarFeatures(){return[]}static canInflect(e){return!1}static supportsLanguage(e){return this.languageCodes.includes[e]}static hasTrailingDigit(e){return/^.+\d$/.test(e)}static normalizeTrailingDigit(e){return/^.+\d$/.test(e)?e.substring(0,e.length-1):e}static needsNormalization(e){return Boolean(e.localeCompare(this.normalizeText(e)))}static hasUpperCase(e){return Boolean(e.localeCompare(e.toLocaleLowerCase()))}static normalizeText(e){return e}static normalizePartOfSpeechValue(e){return e.lemma.features[Feature.types.part]?e.lemma.features[Feature.types.part].value:null}static normalizeFeatureValue(e,t){return t}static alternateWordEncodings({word:e=null,preceding:t=null,following:r=null,encoding:s=null,preserveCase:a=!1,includeOriginal:n=!1}={}){return n?[e]:[]}static compareWords(e,t,r=!0,s={}){return r?(e=this.normalizeTrailingDigit(e),t=this.normalizeTrailingDigit(t),this.normalizeText(e)===this.normalizeText(t)):e===t}static compareFeatureValue(e,t,r,{normalize:s=!0}={}){return s&&(t=this.normalizeFeatureValue(e,t),r=this.normalizeFeatureValue(e,r)),t===r}static getPunctuation(){return"\\-\\.,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’†‡“”··\n\r"}getPunctuation(){return Logger.getInstance().warn('Please use a static version of "getPunctuation"'),this.constructor.getPunctuation()}toString(){return String(this.constructor.languageCode)}isEqual(e){return Us.compareLanguages(this.languageID,e.languageID)}static hasCode(e){if(this.isLanguageCode(e))return this.languageCodes.includes(e);throw new Error(`Format of a "${e}" is incorrect`)}static isLanguageID(e){return"symbol"==typeof e}static isLanguageCode(e){return!LanguageModel.isLanguageID(e)}canInflect(e){return Logger.getInstance().warn('Please use a static version of "canInflect" instead'),this.constructor.canInflect(e)}static groupInflectionsForDisplay(e){let t=new Map;const r=this.aggregateInflectionsForDisplay(e);for(const e of r){const r=new vs(e,[Feature.types.part,Feature.types.declension,Feature.types.dialect,Feature.types.comparison],{prefix:e.prefix,suffix:e.suffix,stem:e.stem}),s=r.toString();t.has(s)?t.get(s).append(e):t.set(s,new Is(r,[e]))}for(const e of t){const t=new Map;for(const r of e[1].inflections){let e,s=!1;r[Feature.types.grmCase]?(e=Feature.types.number,s=!0):e=r[Feature.types.tense]?Feature.types.tense:r[Feature.types.part]===Q||r[Feature.types.part]===V?Feature.types.part:"misc";const a=new vs(r,[e],{isCaseInflectionSet:s}),n=a.toString();t.has(n)?t.get(n).append(r):t.set(n,new Is(a,[r]))}for(const e of t){const t=new Map,r=new Map;for(const s of e[1].inflections){const e=s[Feature.types.grmCase]?Math.max(s[Feature.types.grmCase].items.map((e=>e.sortOrder))):1,a=new vs(s,[Feature.types.tense,Feature.types.voice]),n=a.toString();t.has(n)?t.get(n).append(s):(t.set(n,new Is(a,[s],e)),r.set(n,e))}e[1].inflections=[];const s=Array.from(t.keys()).sort(((e,t)=>{const s=r.get(e),a=r.get(t);return s>a?-1:a>s?1:0}));for(const r of s)e[1].inflections.push(t.get(r))}for(const e of t){const t=e[1];for(const e of t.inflections){let t=new Map;for(const r of e.inflections){const e=new vs(r,[Feature.types.grmCase,Feature.types.comparison,Feature.types.gender,Feature.types.number,Feature.types.person,Feature.types.tense,Feature.types.mood,Feature.types.voice]),s=e.toString();t.has(s)?t.get(s).append(r):t.set(s,new Is(e,[r]))}e.inflections=Array.from(t.values())}}e[1].inflections=Array.from(t.values())}return Array.from(t.values())}static aggregateInflectionsForDisplay(e){return e}groupInflectionsForDisplay(e){return Logger.getInstance().warn('Please use a static version of "groupInflectionsForDisplay" instead'),this.constructor.groupInflectionsForDisplay(e)}}const ws=LanguageModel;let Ss=new Map,_s=!1;class LatinLanguageModel extends ws{static get languageID(){return l}static get languageCode(){return y}static get languageCodes(){return[b,y]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return a}static get featureValues(){return new Map([...ws.featureValues,[Feature.types.grmClass,[rs,ss,as,ns,os,is]],[Feature.types.number,[tr,rr]],[Feature.types.grmCase,[st,ze,Le,me,ge,et,Ft]],[Feature.types.declension,[pr,gr,fr,mr,yr]],[Feature.types.tense,[Dr,Ar,Sr,Or,Cr,_r]],[Feature.types.voice,[Br,qr]],[Feature.types.mood,[Gt,Zt,qt,Yt,er,kt,Yt,zt]],[Feature.types.conjugation,[pr,gr,fr,mr]]])}static get typeFeatures(){return _s||this.initTypeFeatures(),Ss}static initTypeFeatures(){for(const e of this.featureNames)Ss.set(e,this.getFeature(e));_s=!0}static grammarFeatures(){return[Feature.types.part,Feature.types.grmCase,Feature.types.mood,Feature.types.declension,Feature.types.tense,Feature.types.conjugation]}static canInflect(e){return!0}static normalizeText(e){return e&&(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\u00c0\u00c1\u00c2\u00c3\u00c4\u0100\u0102]/g,"A")).replace(/[\u00c8\u00c9\u00ca\u00cb\u0112\u0114]/g,"E")).replace(/[\u00cc\u00cd\u00ce\u00cf\u012a\u012c]/g,"I")).replace(/[\u00d2\u00d3\u00d4\u00df\u00d6\u014c\u014e]/g,"O")).replace(/[\u00d9\u00da\u00db\u00dc\u016a\u016c]/g,"U")).replace(/[\u00c6\u01e2]/g,"AE")).replace(/[\u0152]/g,"OE")).replace(/[\u00e0\u00e1\u00e2\u00e3\u00e4\u0101\u0103]/g,"a")).replace(/[\u00e8\u00e9\u00ea\u00eb\u0113\u0115]/g,"e")).replace(/[\u00ec\u00ed\u00ee\u00ef\u012b\u012d\u0129]/g,"i")).replace(/[\u00f2\u00f3\u00f4\u00f5\u00f6\u014d\u014f]/g,"o")).replace(/[\u00f9\u00fa\u00fb\u00fc\u016b\u016d]/g,"u")).replace(/[\u00e6\u01e3]/g,"ae")).replace(/[\u0153]/g,"oe")),e}static normalizeFeatureValue(e,t){return e===Feature.types.mood&&t===kt?Yt:e===Feature.types.part&&t===k?B:t}static normalizePartOfSpeechValue(e){return e.lemma.features[Feature.types.part]?e.lemma.features[Feature.types.part].value===k?B:e.lemma.features[Feature.types.part].value:null}static getPunctuation(){return".,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’†‡“”··\n\r‌‍"}static getInflectionConstraints(e){let t={fullFormBased:!1,suffixBased:!1,pronounClassRequired:!1};return e.hasOwnProperty(Feature.types.part)?[Q,Z,X,Y].includes(e[Feature.types.part].value)?(t.fullFormBased=!0,t.suffixBased=!0):e[Feature.types.part].value===J?t.fullFormBased=!0:t.suffixBased=!0:Logger.getInstance().warn("Unable to set grammar: part of speech data is missing or is incorrect",e[Feature.types.part]),t}}let As=new Map,Ts=!1;class GreekLanguageModel extends ws{static get languageID(){return c}static get languageCode(){return E}static get languageCodes(){return[E]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return a}static get featureValues(){return new Map([...ws.featureValues,[Feature.types.grmClass,[ns,us,ls,cs,is,rs,as,hs,ss,os]],[Feature.types.number,[tr,rr,sr]],[Feature.types.grmCase,[st,ze,Le,me,Ft]],[Feature.types.declension,[pr,gr,fr]],[Feature.types.tense,[Dr,Ar,Sr,Or,Cr,_r,wr]],[Feature.types.voice,[qr,Br,Gr,zr]],[Feature.types.mood,[Gt,Zt,Kt,qt]],[Feature.types.dialect,["attic","epic","doric"]]])}static get typeFeatures(){return Ts||this.initTypeFeatures(),As}static initTypeFeatures(){for(const e of this.featureNames)As.set(e,this.getFeature(e));Ts=!0}static canInflect(e){return!0}static grammarFeatures(){return[Feature.types.part,Feature.types.grmCase,Feature.types.mood,Feature.types.declension,Feature.types.tense,Feature.types.voice]}static normalizeText(e){return e&&(e=(e=e.normalize("NFC")).replace(/\u2019$/,"᾽")),e}static normalizePartOfSpeechValue(e){return e.lemma.features[Feature.types.part]?e.lemma.features[Feature.types.part].value===z?V:e.lemma.features[Feature.types.part].value===k?B:e.lemma.features[Feature.types.part].value:null}static normalizeFeatureValue(e,t){return e===Feature.types.part&&t===z?V:e===Feature.types.part&&t===k?B:t}static _tonosToOxia(e){return e.replace(/\u{03AC}/gu,"ά").replace(/\u{03AD}/gu,"έ").replace(/\u{03AE}/gu,"ή").replace(/\u{03AF}/gu,"ί").replace(/\u{03CC}/gu,"ό").replace(/\u{03CD}/gu,"ύ").replace(/\u{03CE}/gu,"ώ").replace(/\u{0390}/gu,"ΐ").replace(/\u{03B0}/gu,"ΰ")}static alternateWordEncodings({word:e=null,preceding:t=null,following:r=null,encoding:s=null,preserveCase:a=!1,includeOriginal:n=!1}={}){if(!e)return[];let o=GreekLanguageModel.normalizeText(e);a||(o=o.toLocaleLowerCase());const i=o.replace(/[\u{1FB0}\u{1FB1}]/gu,"α").replace(/[\u{1FB8}\u{1FB9}]/gu,"Α").replace(/[\u{1FD0}\u{1FD1}]/gu,"ι").replace(/[\u{1FD8}\u{1FD9}]/gu,"Ι").replace(/[\u{1FE0}\u{1FE1}]/gu,"υ").replace(/[\u{1FE8}\u{1FE9}]/gu,"Υ").replace(/[\u{00AF}\u{0304}\u{0306}]/gu,""),u=GreekLanguageModel._tonosToOxia(o),l=o.replace(/\u{0390}/gu,"ί").replace(/\u{03AA}/gu,"Ι").replace(/\u{03AB}/gu,"Υ").replace(/\u{03B0}/gu,"ύ").replace(/\u{03CA}/gu,"ι").replace(/\u{03CB}/gu,"υ").replace(/\u{1FD2}/gu,"ὶ").replace(/\u{1FD3}/gu,"ί").replace(/\u{1FD7}/gu,"ῖ").replace(/\u{1FE2}/gu,"ὺ").replace(/\u{1FE3}/gu,"ύ").replace(/\u{1FE7}/gu,"ῦ").replace(/\u{1FC1}/gu,"῀").replace(/\u{1FED}/gu,"`").replace(/\u{1FEE}/gu,"´").replace(/[\u{00A8}\u{0308}]/gu,""),c=o.normalize("NFD").replace(/[\u{300}\u{0301}\u{0304}\u{0306},\u{342}]/gu,"").normalize("NFC");let h=[];return"strippedDiaeresis"===s?h.push(l):"strippedDiacritics"===s?h.push(c):"strippedAll"===s?h.push(l.normalize("NFD").replace(/[\u{300}\u{0301}\u{0304}\u{0306},\u{342}\u{314}\u{313}\u{345}]/gu,"").normalize("NFC")):(h.push(i),u!==i&&h.push(u)),n||(h=h.filter((t=>t!==e))),h}static getPunctuation(){return'.,;:!?"(){}\\[\\]<>\\ ‐‑‒–—―‘†‡“”··\n\r‌‍'}static getInflectionConstraints(e){const t={fullFormBased:!1,suffixBased:!1,pronounClassRequired:!1},r=[J,$,U];return e.hasOwnProperty(Feature.types.part)?r.includes(e[Feature.types.part].value)?t.fullFormBased=!0:t.suffixBased=!0:Logger.getInstance().warn("Unable to set grammar: part of speech data is missing or is incorrect",e[Feature.types.part]),t.pronounClassRequired=Us.compareLanguages(GreekLanguageModel.languageID,e.languageID)&&e.hasOwnProperty(Feature.types.part)&&e[Feature.types.part].value===J,t}static getPronounClasses(e,t,r,s=!0){let a=new Set;const n=e.filter((e=>{let a=!1;return!e.value||e.features[Feature.types.hdwd]&&e.features[Feature.types.hdwd].value!==r||(a=GreekLanguageModel.compareWords(e.value,t,s)),a}));for(const e of n)if(e.features.hasOwnProperty(Feature.types.grmClass))for(const t of e.features[Feature.types.grmClass].values)a.add(t);if(a.size>0)return new Feature(Feature.types.grmClass,Array.from(a),GreekLanguageModel.languageID)}static compareWords(e,t,r=!0,{normalizeTrailingDigit:s=!1}={}){let a=!1;if(r){s&&(e=this.normalizeTrailingDigit(e),t=this.normalizeTrailingDigit(t));const r=GreekLanguageModel.alternateWordEncodings({word:e,encoding:"strippedDiacritics",includeOriginal:!0}),n=GreekLanguageModel.alternateWordEncodings({word:t,encoding:"strippedDiacritics",includeOriginal:!0});for(let e=0;e<r.length&&(a=r[e]===n[e],!a);e++);a||(a=GreekLanguageModel.normalizeText(e)===GreekLanguageModel.normalizeText(t))}else a=e===t;return a}static isValidUnicode(e){return class GreekChars{static get chars(){return["`","¨","¯","´","ʼ","ʽ","˘","ͅ","Ά","Έ","Ή","Ί","Ό","Ύ","Ώ","ΐ","Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω","Ϊ","Ϋ","ά","έ","ή","ί","ΰ","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","ς","σ","τ","υ","φ","χ","ψ","ω","ϊ","ϋ","ό","ύ","ώ","Ϝ","ϝ","ἀ","ἁ","ἂ","ἃ","ἄ","ἅ","ἆ","ἇ","Ἀ","Ἁ","Ἂ","Ἃ","Ἄ","Ἅ","Ἆ","Ἇ","ἐ","ἑ","ἒ","ἓ","ἔ","ἕ","Ἐ","Ἑ","Ἒ","Ἓ","Ἔ","Ἕ","ἠ","ἡ","ἢ","ἣ","ἤ","ἥ","ἦ","ἧ","Ἠ","Ἡ","Ἢ","Ἣ","Ἤ","Ἥ","Ἦ","Ἧ","ἰ","ἱ","ἲ","ἳ","ἴ","ἵ","ἶ","ἷ","Ἰ","Ἱ","Ἲ","Ἳ","Ἴ","Ἵ","Ἶ","Ἷ","ὀ","ὁ","ὂ","ὃ","ὄ","ὅ","Ὀ","Ὁ","Ὂ","Ὃ","Ὄ","Ὅ","ὐ","ὑ","ὒ","ὓ","ὔ","ὕ","ὖ","ὗ","Ὑ","Ὓ","Ὕ","Ὗ","ὠ","ὡ","ὢ","ὣ","ὤ","ὥ","ὦ","ὧ","Ὠ","Ὡ","Ὢ","Ὣ","Ὤ","Ὥ","Ὦ","Ὧ","ὰ","ά","ὲ","έ","ὴ","ή","ὶ","ί","ὸ","ό","ὺ","ύ","ὼ","ώ","ᾀ","ᾁ","ᾂ","ᾃ","ᾄ","ᾅ","ᾆ","ᾇ","ᾈ","ᾉ","ᾊ","ᾋ","ᾌ","ᾍ","ᾎ","ᾏ","ᾐ","ᾑ","ᾒ","ᾓ","ᾔ","ᾕ","ᾖ","ᾗ","ᾘ","ᾙ","ᾚ","ᾛ","ᾜ","ᾝ","ᾞ","ᾟ","ᾠ","ᾡ","ᾢ","ᾣ","ᾤ","ᾥ","ᾦ","ᾧ","ᾨ","ᾩ","ᾪ","ᾫ","ᾬ","ᾭ","ᾮ","ᾯ","ᾰ","ᾱ","ᾲ","ᾳ","ᾴ","ᾶ","ᾷ","Ᾰ","Ᾱ","Ὰ","Ά","ᾼ","᾽","ι","῀","῁","ῂ","ῃ","ῄ","ῆ","ῇ","Ὲ","Έ","Ὴ","Ή","ῌ","῍","῎","῏","ῐ","ῑ","ῒ","ΐ","ῖ","ῗ","Ῐ","Ῑ","Ὶ","Ί","῝","῞","῟","ῠ","ῡ","ῢ","ΰ","ῤ","ῥ","ῦ","ῧ","Ῠ","Ῡ","Ὺ","Ύ","Ῥ","῭","΅","ῲ","ῳ","ῴ","ῶ","ῷ","Ὸ","Ό","Ὼ","Ώ","ῼ"]}}.chars.some((t=>e.includes(t)))}}const Os=new Map;let Cs=!1;class ArabicLanguageModel extends ws{static get languageID(){return h}static get languageCode(){return v}static get languageCodes(){return[v,I]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return i}static get baseUnit(){return a}static get typeFeatures(){return Cs||this.initTypeFeatures(),Os}static initTypeFeatures(){for(const e of this.featureNames)Os.set(e,this.getFeature(e));Cs=!0}static canInflect(e){return!1}static alternateWordEncodings({word:e=null,preceding:t=null,following:r=null,encoding:s=null,preserveCase:a=!1,includeOriginal:n=!1}={}){const o=e.replace(/[\u{064B}\u{064C}\u{064D}\u{0640}]/gu,""),i=o.replace(/[\u{0622}\u{0623}\u{0625}]/gu,"ا"),u=i.replace(/[\u{064E}\u{064F}\u{0650}\u{0670}\u{0671}]/gu,""),l=u.replace(/\u{0651}/gu,""),c=l.replace(/\u{0652}/gu,""),h=c.replace(/\u{0627}/gu,""),d=new Map([["tanwin",o],["hamza",i],["harakat",u],["shadda",l],["sukun",c],["alef",h]]);let p=[];return p=null!==s&&d.has(s)?[d.get(s)]:Array.from(d.values()),n||(p=p.filter((t=>t!==e))),p}static getPunctuation(){return".,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’†‡“”··\n\r‌‍"}static aggregateInflectionsForDisplay(e){let t=[],r={[q]:[],[P]:[],[G]:[]};for(const s of e)s[Feature.types.morph]&&s[Feature.types.morph].value.match(/ADJ[uaiNK]/)?r[P].push(s):s[Feature.types.morph]&&s[Feature.types.morph].value.match(/NOUN[uaiNK]/)?r[q].push(s):s[Feature.types.morph]&&s[Feature.types.morph].value.match(/NOUN_PROP[uaiNK]/)?r[G].push(s):(s.example=null,t.push(s));for(const e of Object.keys(r)){1!==t.filter((t=>t[Feature.types.part].value===e)).length&&t.push(...r[e])}return t}}let Ds=new Map,Ls=!1;class PersianLanguageModel extends ws{static get languageID(){return d}static get languageCode(){return S}static get languageCodes(){return[S,w,A,_]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return i}static get baseUnit(){return a}static get typeFeatures(){return Ls||this.initTypeFeatures(),Ds}static initTypeFeatures(){for(const e of this.featureNames)Ds.set(e,this.getFeature(e));Ls=!0}static canInflect(e){return!1}static getPunctuation(){return"\\-\\.,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’†‡“”··\n\r‌‍"}}const Fs=new Map;let xs=!1;class GeezLanguageModel extends ws{static get languageID(){return p}static get languageCode(){return T}static get languageCodes(){return[T]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return a}static get featureValues(){return new Map([...ws.featureValues,[Feature.types.grmCase,[]],[Feature.types.number,[]],[Feature.types.gender,[]],[Feature.types.mood,[]]])}static get typeFeatures(){return xs||this.initTypeFeatures(),Fs}static initTypeFeatures(){for(const e of this.featureNames)Fs.set(e,this.getFeature(e));xs=!0}static canInflect(e){return!1}static getPunctuation(){return"፡፨።፣፤፥፦፧፠,;:!?'\"(){}\\[\\]<>\\ ‐‑‒–—―‘’†‡“”··\n\r‌‍"}}let Rs=new Map,Ns=!1;class ChineseLanguageModel extends ws{static get languageID(){return g}static get languageCode(){return O}static get languageCodes(){return[C,O,D,L]}static get contextForward(){return 5}static get contextBackward(){return 0}static get direction(){return o}static get baseUnit(){return n}static get featureValues(){return new Map([[Feature.types.fullForm,[]],[Feature.types.frequency,[]],[Feature.types.pronunciation,[]],[Feature.types.radical,[]]])}static get typeFeatures(){return Ns||this.initTypeFeatures(),Rs}static initTypeFeatures(){for(const e of this.featureNames)Rs.set(e,this.getFeature(e));Ns=!0}static getPunctuation(){return".,;:!?'\"(){}\\[\\]<>\\\n\r，、。「」《》‌‍†‡"}static _isVowel(e){return["a","e","i","o","u"].includes(e)}static formatPinyin(e){const t=["ā","á","ǎ","à","a"],r=["ē","é","ě","è","e"],s=["ī","í","ǐ","ì","i"],a=["ō","ó","ǒ","ò","o"],n=["ū","ú","ǔ","ù","u"],o=["ǖ","ǘ","ǚ","ǜ","ü"];e=e.split(/(\d)/).map((e=>e.trim())).filter((e=>Boolean(e)));let i=[];const u={1:0,2:1,3:2,4:3};for(let l=0;l<e.length;l++)if(l%2==0){let c=e[l];const h=void 0!==u[e[l+1]]?u[e[l+1]]:4;if(-1!==c.indexOf("a"))c=c.replace("a",t[h]);else if(-1!==c.indexOf("e"))c=c.replace("e",r[h]);else if(-1!==c.indexOf("ou"))c=c.replace("o",a[h]);else for(let e=c.length-1;e>=0;e--)if(this._isVowel(c[e])){switch(c[e]){case"i":c=c.replace("i",s[h]);break;case"o":c=c.replace("o",a[h]);break;case"u":c=e+1<c.length-1&&":"===c[e+1]?c.replace("u:",o[h]):c.replace("u",n[h]);break;default:Logger.getInstance().warn("some kind of weird vowel",c[e])}break}i.push(c)}return i.join(" ").trim()}}const Ps=new Map;let Vs=!1;class SyriacLanguageModel extends ws{static get languageID(){return f}static get languageCode(){return x}static get languageCodes(){return[x,F,R]}static get contextForward(){return 0}static get contextBackward(){return 0}static get direction(){return i}static get baseUnit(){return a}static get featureValues(){return new Map([...ws.featureValues,[Feature.types.part,[V,M,P,U,j,k,B,q,$,z,W,H,J,K,X,Q,Z,ee]],[Feature.types.kaylo,[]],[Feature.types.state,[]]])}static get typeFeatures(){return Vs||this.initTypeFeatures(),Ps}static initTypeFeatures(){for(const e of this.featureNames)Ps.set(e,this.getFeature(e));Vs=!0}static canInflect(e){return!1}static getPunctuation(){return"܀܁܂܃܄܅܆܇܈܉܊܋܌܍܏.,;:!?'\"(){}\\[\\]<>/\\ ‐‑‒–—―‘’†‡“”\n\r‌‍"}static groupInflectionsForDisplay(e){const t=new Map,r=this.aggregateInflectionsForDisplay(e);for(const e of r){const r=new vs(e,[Feature.types.part,Feature.types.declension,Feature.types.kaylo,Feature.types.state,Feature.types.comparison],{prefix:e.prefix,suffix:e.suffix,stem:e.stem}),s=r.toString();t.has(s)?t.get(s).append(e):t.set(s,new Is(r,[e]))}for(const e of t){const t=new Map;for(const r of e[1].inflections){let e,s=!1;r[Feature.types.grmCase]?(e=Feature.types.number,s=!0):e=r[Feature.types.tense]?Feature.types.tense:r[Feature.types.part]===Q||r[Feature.types.part]===V?Feature.types.part:"misc";const a=new vs(r,[e],{isCaseInflectionSet:s}),n=a.toString();t.has(n)?t.get(n).append(r):t.set(n,new Is(a,[r]))}for(const e of t){const t=new Map,r=new Map;for(const s of e[1].inflections){const e=s[Feature.types.grmCase]?Math.max(s[Feature.types.grmCase].items.map((e=>e.sortOrder))):1,a=new vs(s,[Feature.types.tense,Feature.types.voice]),n=a.toString();t.has(n)?t.get(n).append(s):(t.set(n,new Is(a,[s],e)),r.set(n,e))}e[1].inflections=[];const s=Array.from(t.keys()).sort(((e,t)=>{const s=r.get(e),a=r.get(t);return s>a?-1:a>s?1:0}));for(const r of s)e[1].inflections.push(t.get(r))}for(const e of t){const t=e[1];for(const e of t.inflections){const t=new Map;for(const r of e.inflections){const e=new vs(r,[Feature.types.grmCase,Feature.types.comparison,Feature.types.gender,Feature.types.number,Feature.types.person,Feature.types.tense,Feature.types.mood,Feature.types.voice]),s=e.toString();t.has(s)?t.get(s).append(r):t.set(s,new Is(e,[r]))}e.inflections=Array.from(t.values())}}e[1].inflections=Array.from(t.values())}return Array.from(t.values())}}const Ms=new Map([[b,LatinLanguageModel],[y,LatinLanguageModel],[E,GreekLanguageModel],[v,ArabicLanguageModel],[I,ArabicLanguageModel],[S,PersianLanguageModel],[T,GeezLanguageModel],[O,ChineseLanguageModel],[x,SyriacLanguageModel],[F,SyriacLanguageModel],[R,SyriacLanguageModel]]);class LanguageModelFactory{static supportsLanguage(e){return e="symbol"==typeof e?LanguageModelFactory.getLanguageCodeFromId(e):e,Ms.has(e)}static availableLanguages(){let e=new Set;for(const t of Ms.values())e.add(t.languageCode);return Array.from(e)}static getLanguageModel(e){const t=LanguageModelFactory.getLanguageCodeFromId(e);return LanguageModelFactory.getLanguageModelFromCode(t)}static getLanguageModelFromCode(e){return Ms.has(e)?Ms.get(e):ws}static getLanguageForCode(e=null){const t=Ms.get(e);return t?new t:new ws}static getLanguageIdFromCode(e){for(const t of Ms.values())if(t.hasCode(e))return t.languageID;return u}static getLanguageCodeFromId(e){for(const t of Ms.values())if(t.languageID.toString()===e.toString())return t.languageCode;return m}static getLanguageAttrs(e){return"symbol"==typeof e?{languageID:e,languageCode:LanguageModelFactory.getLanguageCodeFromId(e)}:{languageID:LanguageModelFactory.getLanguageIdFromCode(e),languageCode:e}}static compareLanguages(e,t){return(e="symbol"==typeof e?LanguageModelFactory.getLanguageCodeFromId(e):e)===(t="symbol"==typeof t?LanguageModelFactory.getLanguageCodeFromId(t):t)}static isExperimentalLanguage(e){return[p,f,g].includes(e)}}const Us=LanguageModelFactory;class DefinitionSet{constructor(e,t){this.lemmaWord=e,this.languageID=t,this.shortDefs=[],this.fullDefs=[]}static readObject(e){const t=Us.getLanguageIdFromCode(e.languageCode);let r=new DefinitionSet(e.lemmaWord,t);for(const t of e.shortDefs)r.shortDefs.push(ms.readObject(t));for(const t of e.fullDefs)r.fullDefs.push(ms.readObject(t));return r}get hasShortDefs(){return this.shortDefs.length>0}get hasFullDefs(){return this.fullDefs.length>0}isEmpty(){return 0===this.shortDefs.length&&0===this.fullDefs.length}appendShortDefs(e){return e&&(Array.isArray(e)||(e=[e]),this.shortDefs=this.shortDefs.concat(e)),this.shortDefs}clearShortDefs(){this.shortDefs=[]}appendFullDefs(e){return e&&(Array.isArray(e)||(e=[e]),this.fullDefs=this.fullDefs.concat(e)),this.fullDefs}clearFullDefs(){this.fullDefs=[]}convertToJSONObject(){const e=Us.getLanguageCodeFromId(this.languageID);return{lemmaWord:this.lemmaWord,languageCode:e,shortDefs:this.shortDefs.map((e=>e.convertToJSONObject())),fullDefs:this.fullDefs.map((e=>e.convertToJSONObject()))}}}class GrmFeature{constructor(e,t,r,s=1){if(!GrmFeature.types.isAllowed(t))throw new Error('Features of "'+t+'" type are not supported.');if(!e)throw new Error("Feature should have a non-empty value.");if(!t)throw new Error("Feature should have a non-empty type.");if(!r)throw new Error("Feature constructor requires a language");this.value=e,this.type=t,this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Us.getLanguageAttrs(r)),this.sortOrder=s}get language(){return Logger.getInstance().warn('Please use a "languageID" instead of a "language"'),this.languageCode}isEqual(e){if(Array.isArray(e.value)){if(!Array.isArray(this.value)||this.value.length!==e.value.length)return!1;let t=this.type===e.type&&Us.compareLanguages(this.languageID,e.languageID);return t=t&&this.value.every((function(t,r){return t===e.value[r]})),t}return Us.compareLanguages(this.languageID,e.languageID)&&this.type===e.type&&this.value===e.value}isSubsetof(e){Array.isArray(e)||(e=[e]);const t=e[0].languageID,r=e[0].type,s=e.map((e=>e.value));return!(!Us.compareLanguages(this.languageID,t)||this.type!==r||!s.includes(this.value))}hasValue(e){return Array.isArray(this.value)?this.value.includes(e):this.value===e}toString(){return Array.isArray(this.value)?this.value.join(","):this.value}static toFeature(e){if(Array.isArray(e)){if(!(e[0]instanceof Feature)){const t=e[0].type,r=e[0].languageID,s=e.map((e=>e.value));return new Feature(t,s,r)}}else if(!(e instanceof Feature))return new Feature(e.type,e.value,e.languageID);return e}}GrmFeature.types={word:"word",part:"part of speech",number:"number",case:"case",grmCase:"case",declension:"declension",gender:"gender",type:"type",class:"class",grmClass:"class",conjugation:"conjugation",comparison:"comparison",tense:"tense",voice:"voice",mood:"mood",person:"person",frequency:"frequency",meaning:"meaning",source:"source",footnote:"footnote",dialect:"dialect",note:"note",pronunciation:"pronunciation",age:"age",area:"area",geo:"geo",kind:"kind",derivtype:"derivtype",stemtype:"stemtype",morph:"morph",var:"var",isAllowed(e){const t=`${e}`;return Object.values(this).includes(t)}};const js=GrmFeature;const ks=class FeatureList{constructor(e=[]){this._features=[],this._types={},this.add(e)}add(e){if(!e||!Array.isArray(e))throw new Error("Features must be defined and must come in an array.");for(const t of e)this._features.push(t),this._types[t.type]=t}get items(){return this._features}forEach(e){this._features.forEach(e)}ofType(e){if(this.hasType(e))return this._types[e]}hasType(e){return this._types.hasOwnProperty(e)}};class Translation{constructor(e,t,r=[]){if(!e)throw new Error("Lemma should not be empty.");this.lemmaWord=e.word,this.languageCode=t,this.glosses=r}static readTranslationFromJSONList(e,t,r,s){if(!r||!Array.isArray(r))throw new Error("Recieved not proper translation list",r);const a=r.find((function(t){return t.in===e.word})),n=new Translation(e,t,a.translations);return s?fs.getProxy(s,n):n}static loadTranslations(e,t,r,s){e.addTranslation(this.readTranslationFromJSONList(e,t,r,s))}convertToJSONObject(){let e={languageCode:this.languageCode,translations:this.glosses};return this.provider&&(e.provider=this.provider.convertToJSONObject()),e}static readObject(e,t){const r=new Translation(t,e.languageCode,e.translations);if(e.provider){const t=fs.readObject(e.provider);return fs.getProxy(t,r)}return r}}const Bs=Translation;class Lemma{constructor(e,t,r=[],s={}){if(!e)throw new Error("Word should not be empty.");if(!t)throw new Error("Language should not be empty.");this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Us.getLanguageAttrs(t)),this.word=e,this.principalParts=r,this.features={},this.ID=(0,gs.v4)()}get language(){return Logger.getInstance().warn('Please use "languageID" instead of "language"'),this.languageCode}get displayWord(){return this.word.replace(/\d+$/,"")}static readObject(e){const t=e.language?e.language:e.languageCode;let r=new Lemma(e.word,t,e.principalParts,e.pronunciation);return e.features&&e.features.length>0&&e.features.forEach((e=>{r.addFeature(Feature.readObject(e))})),e.translation&&(r.translation=Bs.readObject(e.translation,r)),r}convertToJSONObject(){let e=[];for(const t of Object.values(this.features))e.push(t.convertToJSONObject());let t={word:this.word,language:this.languageCode,principalParts:this.principalParts,features:e};return this.translation&&(t.translation=this.translation.convertToJSONObject()),t}set feature(e){if(Logger.getInstance().warn('Please use "addFeature" instead'),!e)throw new Error("feature data cannot be empty.");Array.isArray(e)||(e=[e]);const t=e[0].type;this.features[t]=[];for(const r of e){if(!(r instanceof Feature))throw new Error("feature data must be a Feature object.");if(!Us.compareLanguages(r.languageID,this.languageID))throw new Error('Language "'+r.languageID.toString()+'" of a feature does not match a language "'+this.languageID.toString()+'" of a Lemma object.');this.features[t].push(r)}}addFeature(e){if(!e)throw new Error("feature data cannot be empty.");if(!(e instanceof Feature))throw new Error("feature data must be a Feature object.");if(!Us.compareLanguages(e.languageID,this.languageID))throw new Error('Language "'+e.languageID.toString()+'" of a feature does not match a language "'+this.languageID.toString()+'" of a Lemma object.');this.features[e.type]=e}addFeatures(e){if(!Array.isArray(e))throw new Error("Features must be in an array");for(const t of e)this.addFeature(t)}addTranslation(e){if(!e)throw new Error("translation data cannot be empty.");if(-1===e.constructor.name.indexOf("Translation"))throw new Error("translation data must be a Translation object.");this.translation=e}isFullHomonym(e,{normalize:t=!1,ignorePofs:r=!1}={}){if(!(r||this.features[Feature.types.part]&&e.features[Feature.types.part]&&this.features[Feature.types.part].isEqual(e.features[Feature.types.part])))return!1;const s=Us.getLanguageModel(this.languageID),a=t?s.compareWords(this.word,e.word,!0,{normalizeTrailingDigit:!0}):this.word===e.word,n=s.hasTrailingDigit(this.word),o=s.hasTrailingDigit(e.word);if(n&&o){if(this.word.match(/\d+$/)[0]!==e.word.match(/\d+$/)[0])return!1}return a}disambiguate(e){const t=Us.getLanguageModel(this.languageID);if(!t.compareWords(this.word,e.word,!0,{normalizeTrailingDigit:!0}))throw new Error("Words that differ cannot be disambiguated");const r=t.hasUpperCase(this.word);if(t.hasUpperCase(e.word))return e.word;if(r)return this.word;const s=t.needsNormalization(this.word);if(t.needsNormalization(e.word))return t.normalizeText(e.word);if(s)return t.normalizeText(this.word);t.hasTrailingDigit(this.word);return t.hasTrailingDigit(e.word)?e.word:this.word}get wordPrincipalParts(){const e=[...this.principalParts];return this.principalParts.includes(this.word)||e.push(this.word),e.join(", ")}}const qs=Lemma;class Inflection{constructor(e=null,t,r=null,s=null,a=null){if(!e&&!r)throw new Error("At least stem or suffix must be defined");if(!t)throw new Error("Language should not be empty.");if(!Us.supportsLanguage(t))throw new Error(`language ${t} not supported.`);this.stem=e,this.languageID=void 0,this.languageCode=void 0,({languageID:this.languageID,languageCode:this.languageCode}=Us.getLanguageAttrs(t)),this.model=Us.getLanguageModel(this.languageID),this.features=new Set,this.constraints={fullFormBased:!1,suffixBased:!1,irregular:!1,obligatoryMatches:[],optionalMatches:[],morphologyMatches:[]},this.suffix=r,this.prefix=s,this.example=a,this.lemma=null}clone(){let e=new Inflection(this.stem,this.languageID,this.suffix,this.prefix,this.example);return e.addFeatures(Array.from(this.features).map((e=>this[e]))),e.constraints={fullFormBased:this.constraints.fullFormBased,suffixBased:this.constraints.suffixBased,irregular:this.constraints.irregular,obligatoryMatches:this.constraints.obligatoryMatches?Array.from(this.constraints.obligatoryMatches):[],optionalMatches:this.constraints.obligatoryMatches?Array.from(this.constraints.obligatoryMatches):[],morphologyMatches:this.constraints.morphologyMatches?Array.from(this.constraints.morphologyMatches):[]},e.lemma=this.lemma,e}get form(){const e=this.stem?" - ":"";return this.getForm(e)}getForm(e=""){let t,r,s;const a=this.stem?this.stem:"";return this.model.direction===i?(r=this.prefix?e+this.prefix:"",s=this.suffix?this.suffix+e:"",t=s+a+r):(r=this.prefix?this.prefix+e:"",s=this.suffix?e+this.suffix:"",t=r+a+s),t}get language(){return Logger.getInstance().warn('Please use a "languageID" instead of a "language"'),this.languageCode}setConstraints(){if(this.model.hasOwnProperty("getInflectionConstraints")){const e=this.model.getInflectionConstraints(this);this.constraints=Object.assign(this.constraints,e)}}smartWordCompare(e,t,r={}){let s;r.hasOwnProperty("normalize")||(r.normalize=!0),r.hasOwnProperty("fuzzySuffix")||(r.fuzzySuffix=!1),s=this.constraints.irregular?"Suffix"===t?this.suffix:this[Feature.types.fullForm]?this[Feature.types.fullForm].value:this.form:this.constraints.suffixBased?this.suffix:this.form;let a=this.modelCompareWords(e,s,r.normalize);if(!a&&"Suffix"===t&&r.fuzzySuffix){const t=this.getForm();if(t&&e&&t.length>=e.length){const s=t.substring(t.length-e.length);a=this.modelCompareWords(e,s,r.normalize)}}return a}compareWithWord(e,t=!0){const r=this.constraints.suffixBased?this.suffix:this.form;return this.modelCompareWords(e,r,t)}modelCompareWords(e,t,r=!0){return Us.getLanguageModel(this.languageID).compareWords(e,t,r)}modelCompareFeatureValue(e,t,r,s=!0){return Us.getLanguageModel(this.languageID).compareFeatureValue(e,t,r,{normalize:s})}disambiguatedBy(e,{ignorePofs:t=!1}={}){let r=!0,s=!0;0!==this.features.size&&0!==e.features.size||(r=!1),e.features.size>this.features.size&&(r=!1);for(const a of e.features)if(!t||a!==Feature.types.part)for(const t of e[a].values){if(!this.hasFeatureValue(a,t,{normalize:!0})){r=!1;break}this[a].values.length!==e[a].values.length&&(s=!1)}return{match:r,exactMatch:s}}set feature(e){if(Logger.getInstance().warn('Please use "addFeature" instead.'),!e)throw new Error("Inflection feature data cannot be empty.");Array.isArray(e)||(e=[e]);const t=e[0].type;this[t]=[];for(const r of e){if(!(r instanceof Feature))throw new Error("Inflection feature data must be a Feature object.");if(!Us.compareLanguages(r.languageID,this.languageID))throw new Error(`Language "${r.languageID.toString()}" of a feature does not match\n          a language "${this.languageID.toString()}" of an Inflection object.`);this[t].push(r),this.features.add(t)}}addFeature(e){if(!e)throw new Error("feature data cannot be empty.");if(!(e instanceof Feature))throw new Error("feature data must be a Feature object.");if(!Us.compareLanguages(e.languageID,this.languageID))throw new Error('Language "'+e.languageID.toString()+'" of a feature does not match a language "'+this.languageID.toString()+'" of a Lemma object.');this[e.type]=e,this.features.add(e.type)}addFeatures(e){if(!Array.isArray(e))throw new Error("Features must be in an array");for(const t of e)this.addFeature(t)}hasFeatureValue(e,t,{normalize:r=!1}={}){return!!this.hasOwnProperty(e)&&this[e].values.some((r=>this.modelCompareFeatureValue(e,r,t)))}toString(){let e=`Inflection stem: ${this.stem}, prefix: ${this.prefix}, suffix: ${this.suffix}, langID: ${this.languageID.toString()}\n  features:  `;for(const t of this.features.values())e+=`${t}: ${this[t].value}, `;e+="\n  constraints:  ";for(const[t,r]of Object.entries(this.constraints))Array.isArray(r)?e+=`${t}: [${r}], `:e+=`${t}: ${r}, `;return e+=`\n  example: ${this.example}`,e}static readObject(e,t){let r=new Inflection(e.stem,e.languageCode,e.suffix,e.prefix,e.example);return r.languageID=Us.getLanguageIdFromCode(r.languageCode),e.features&&e.features.length>0&&e.features.forEach((e=>{r.addFeature(Feature.readObject(e))})),t&&(r.lemma=t),r}convertToJSONObject(){let e=[];for(const t of this.features.keys())e.push(this[t].convertToJSONObject());const t=Us.getLanguageCodeFromId(this.languageID);return{stem:this.stem,languageCode:t,suffix:this.suffix,prefix:this.prefix,example:this.example,features:e}}}const Gs=Inflection;class Lexeme{constructor(e,t,r=null){if(!e)throw new Error("Lemma should not be empty.");if(!(e instanceof qs))throw new Error("Lemma should be of Lemma object type.");if(!t)throw new Error("Inflections data should not be empty.");if(!Array.isArray(t))throw new Error("Inflection data should be provided in an array.");for(const e of t)if(!(e instanceof Gs))throw new Error("All inflection data should be of Inflection object type.");if(null!==r&&!(r instanceof DefinitionSet))throw new Error("Meaning should be of DefinitionSet object type.");this.lemma=e,this.altLemmas=[],this.inflections=[],this.addInflections(t),this.meaning=r||new DefinitionSet(this.lemma.word,this.lemma.languageID),this.disambiguated=!1,this.selectedInflection=null}setSelectedInflection(e){this.selectedInflection=e}getSelectedInflection(){return this.selectedInflection}getGroupedSelectedInflection(){if(this.selectedInflection){return Us.getLanguageModel(this.lemma.languageID).groupInflectionsForDisplay([this.selectedInflection])}return[]}addInflection(e){e.lemma=this.lemma,e.lexeme=this,this.inflections.push(e)}addInflections(e){Array.isArray(e)||(e=[e]),e.forEach((e=>this.addInflection(e)))}addAltLemma(e){this.altLemmas.push(e)}isPopulated(){return Object.entries(this.lemma.features).length>0||!this.meaning.isEmpty()||this.inflections.length>0}get hasShortDefs(){return Boolean(this.meaning&&this.meaning.hasShortDefs)}get hasFullDefs(){return Boolean(this.meaning&&this.meaning.hasFullDefs)}isFullHomonym(e,{normalize:t=!1}={}){const r=Us.getLanguageModel(this.lemma.languageID),s=r.normalizePartOfSpeechValue(this);if(s===r.normalizePartOfSpeechValue(e)){const r=Boolean(s!==this.lemma.features[Feature.types.part]);return this.lemma.isFullHomonym(e.lemma,{normalize:t,ignorePofs:r})}return!1}canBeDisambiguatedWith(e){const t=e.inflections.length||ws.hasTrailingDigit(e.lemma.word);return this.isFullHomonym(e,{normalize:!0})&&t}static disambiguateInflections(e,t){let r=new Lexeme(e.lemma,e.inflections,e.meaning);const s=Us.getLanguageModel(e.lemma.languageID);if(e.canBeDisambiguatedWith(t))for(const e of r.inflections)for(const a of t.inflections){const n=s.normalizePartOfSpeechValue(t),o=Boolean(n!==t.lemma.features[Feature.types.part]),i=e.disambiguatedBy(a,{ignorePofs:o});i.match&&(i.exactMatch?r.setSelectedInflection(e):r.setSelectedInflection(a))}return r}setDisambiguation(e=null){this.disambiguated=!0,e&&(this.lemma.word=this.lemma.disambiguate(e.lemma))}getGroupedInflections(){return Us.getLanguageModel(this.lemma.languageID).groupInflectionsForDisplay(this.inflections)}static readObject(e){const t=qs.readObject(e.lemma);let r=[];for(const t of e.inflections)r.push(Gs.readObject(t));const s=new Lexeme(t,r);if(e.meaning&&(s.meaning=DefinitionSet.readObject(e.meaning)),e.provider){const t=fs.readObject(e.provider);return fs.getProxy(t,s)}return s}convertToJSONObject(e=!1){let t=[];this.inflections.forEach((e=>{t.push(e.convertToJSONObject())}));const r={lemma:this.lemma.convertToJSONObject(),inflections:t};return e&&(r.meaning=this.meaning.convertToJSONObject()),this.provider&&(r.provider=this.provider.convertToJSONObject()),r}static getSortByTwoLemmaFeatures(e,t){return(r,s)=>{if(r.lemma.features[e]&&s.lemma.features[e]||!r.lemma.features[e]&&!s.lemma.features[[e]]){let a;return a=r.lemma.features[e]&&s.lemma.features[e]?r.lemma.features[e].compareTo(s.lemma.features[e]):0,0!==a?a:r.lemma.features[t]&&s.lemma.features[t]?r.lemma.features[t].compareTo(s.lemma.features[t]):r.lemma.features[t]&&!s.lemma.features[t]?-1:!r.lemma.features[t]&&s.lemma.features[t]?1:0}return r.lemma.features[e]&&!s.lemma.features[e]?-1:!r.lemma.features[e]&&s.lemma.features[e]?1:0}}}const $s=Lexeme;class Homonym{constructor(e,t){if(!e||Array.isArray(e)&&0===e.length)throw new Error("Lexemes data should not be empty.");if(!Array.isArray(e))throw new Error("Lexeme data should be provided in an array.");for(const t of e)if(!(t instanceof $s))throw new Error("All lexeme data should be of Lexeme object type.");this.lexemes=e,this.targetWord=t}static createSimpleForm(e,t,r=[]){const s=new qs(e,t),a=new $s(s,r);return new Homonym([a],e)}get hasShortDefs(){return Boolean(this.lexemes&&this.lexemes.some((e=>e.hasShortDefs)))}get hasFullDefs(){return Boolean(this.lexemes&&this.lexemes.some((e=>e.hasFullDefs)))}static readObject(e){let t=[];if(e.lexemes)for(const r of e.lexemes)t.push($s.readObject(r));else{const r=Us.getLanguageIdFromCode(e.languageCode);t=[new $s(new qs(e.targetWord,r),[])]}const r=new Homonym(t,e.form||e.targetWord);return r.lemmasList=e.lemmasList,r}convertToJSONObject(e=!1){let t={lexemes:[],form:this.targetWord};for(const r of this.lexemes)t.lexemes.push(r.convertToJSONObject(e));return t}get language(){return Logger.getInstance().warn("Please use languageID instead"),Us.getLanguageCodeFromId(this.languageID)}get languageID(){if(this.lexemes&&this.lexemes[0]&&this.lexemes[0].lemma&&this.lexemes[0].lemma.languageID)return this.lexemes[0].lemma.languageID;throw new Error("Homonym has not been initialized properly. Unable to obtain language ID information.")}get inflections(){let e=[];for(const t of this.lexemes)e=e.concat(t.inflections);return e}isDisambiguated(){return this.lexemes.filter((e=>e.disambiguated)).length>0}static disambiguate(e,t){if(0===t.length)return e;const r=t.shift();let s=[],a=[],n=[],o=[];for(const t of r.lexemes){for(const r of e.lexemes){const e=r.canBeDisambiguatedWith(t)?$s.disambiguateInflections(r,t):r;r.isFullHomonym(t,{normalize:!0})?null!==e.getSelectedInflection()?(e.setDisambiguation(t),s.push(e)):n.push(e):o.push(e)}if(0===s.length)if(n.length>0)for(const e of n){e.setDisambiguation(t);for(const t of r.inflections)e.addInflection(t),e.setSelectedInflection(t)}else{t.setDisambiguation();for(const e of t.inflections)t.setSelectedInflection(e);a.push(t)}}const i=new Homonym([...a,...s,...n,...o],e.targetWord);return Homonym.disambiguate(i,t)}}const zs=Homonym;class HomonymGroup{constructor(e=[]){this._homonyms=e}get homonyms(){return this._homonyms}get hasHomonyms(){return this._homonyms.length>0}toHomonym(e,{disambiguated:t=!1}={}){if(!e)throw new Error(HomonymGroup.errors.NO_TARGET_WORD);const r=this._homonyms.map((e=>e.lexemes)).flat();return t&&r.forEach((e=>{e.disambiguated=!0})),new zs(r,e)}}HomonymGroup.errors={NO_TARGET_WORD:"Target word is not provided"};class PsEventData{constructor(e,t=""){this.name=e.name,this.publisher=e.publisher,this.caller=t}get description(){return this.caller?`${this.publisher}.${this.caller} -> [${this.name}]`:`${this.publisher} -> [${this.name}]`}}class PsEvent{constructor(e,t){this.name=e,this.publisher=t.name,this._subscribers=new Map}get subscribers(){return Array.from(this._subscribers.values())}sub(e){const t=(0,gs.v4)();return this._subscribers.set(t,e),()=>{this._subscribers.delete(t)}}pub(e={},t=""){this._subscribers.forEach((r=>r(e,new PsEventData(this,t))))}unsubAll(){this._subscribers.clear()}}class TextQuoteSelector{constructor(e,t,r=null,s=null,a=null){this.languageCode=e,this.normalizedText=t,this.contextForward=6,this.contextBackward=6,this.text=this.normalizedText,this.prefix=r,this.suffix=s,this.source=a,this.ID=(0,gs.v4)()}get contextHTML(){const e=`<span class="alpheios_worditem_incontext_add">${this.text}</span>`,t=this.prefix.replace(this.text,e),r=this.suffix.replace(this.text,e);return`${t} <span class="alpheios_worditem_incontext">${this.text}</span> ${r}`}static readObject(e){let t=new TextQuoteSelector(e.languageCode,e.target.selector.exact);return t.prefix=e.target.selector.prefix,t.suffix=e.target.selector.suffix,t.text=e.targetWord,t.source=e.target.source,t}isEqual(e){let t=`${this.prefix}${this.text}${this.suffix}`;t=t.trim();let r=`${e.prefix}${e.text}${e.suffix}`;return r=r.trim(),this.text===e.text&&this.source===e.source&&this.languageCode===e.languageCode&&t===r}updateLanguage(e){this.languageCode=e}}class WordUsageExample extends TextQuoteSelector{constructor(e,t,r,s,a,n){super(e,t),this.prefix=r,this.suffix=s,this.source=a,this.cit=n,this.author=null,this.textWork=null,this.passage=null}createContext(){return null}get htmlExample(){return`${this.prefix}<span class="alpheios_word_usage_list_item__text_targetword">${this.normalizedText}</span>${this.suffix}`}fullCit(e){if(!this.author&&!this.textWork&&!this.passage)return this.cit;let t="";return e?(t=this.author?this.author.title(e):".",t=t+" "+(this.textWork?this.textWork.title(e):"."),t=t+" "+this.formattedPassage):t=this.formattedAuthor+" "+this.formattedTextWork+" "+this.formattedPassage,t.trim()}get formattedAuthor(){return this.author?this.author.title():""}get formattedTextWork(){return this.textWork?this.textWork.title():""}get formattedPassage(){return this.passage}authorForSort(e){return this.author?this.author.title(e).toUpperCase():this.fullCit(e).toUpperCase()}textWorkForSort(e){return this.textWork?this.textWork.title(e).toUpperCase():this.fullCit(e).toUpperCase()}get prefixForSort(){const e=Us.getLanguageModelFromCode(this.languageCode),t=this.prefix.replace(new RegExp("["+e.getPunctuation()+" ]","g")," ").toUpperCase().split(" ").filter((e=>e.length>0));return t[t.length-1]}get suffixForSort(){const e=Us.getLanguageModelFromCode(this.languageCode);return this.suffix.replace(new RegExp("["+e.getPunctuation()+" ]","g"),"").toUpperCase()}}class Author{constructor(e,t,r){this.urn=e,this.titles=t,this.abbreviations=r}static get defaultLang(){return"eng"}title(e){return this.titles[e]?this.titles[e]:this.titles[Author.defaultLang]?this.titles[Author.defaultLang]:Object.values(this.titles).length>0?Object.values(this.titles)[0]:null}abbreviation(e){return this.abbreviations[e]?this.abbreviations[e]:this.abbreviations[Author.defaultLang]?this.abbreviations[Author.defaultLang]:Object.values(this.abbreviations).length>0?Object.values(this.abbreviations)[0]:null}}const Ws=Author;class TextWork{constructor(e,t,r,s){this.urn=t,this.titles=r,this.author=e,this.abbreviations=s}static get defaultLang(){return"eng"}static get defaultIDPrefix(){return"phi"}title(e){return this.titles[e]?this.titles[e]:this.titles[TextWork.defaultLang]?this.titles[TextWork.defaultLang]:Object.values(this.titles).length>0?Object.values(this.titles)[0]:null}abbreviation(e){return this.abbreviations[e]?this.abbreviations[e]:this.abbreviations[TextWork.defaultLang]?this.abbreviations[TextWork.defaultLang]:Object.values(this.abbreviations).length>0?Object.values(this.abbreviations)[0]:null}}const Hs=TextWork;class WordItem{constructor(e={targetWord:null,languageCode:null,important:!1,currentSession:!0,context:[],homonym:{},createdDT:null,updatedDT:null,frequency:null}){if(this.version=1,this.targetWord=e.targetWord,this.languageCode=e.languageCode,!this.targetWord||!this.languageCode)throw new Error("Unable to construct a worditem without at least a targetWord and a languageCode");this.important=void 0!==e.important&&e.important,this.currentSession=void 0===e.currentSession||e.currentSession,this.context=e.context||[],this.homonym=e.homonym||{},this.createdDT=e.createdDT,this.updatedDT=e.updatedDT,this.frequency=e.frequency}static readObject(e){let t={},r=[];e.homonym&&(t=WordItem.readHomonym(e)),e.context&&(r=WordItem.readContext(e));return new WordItem({targetWord:e.targetWord,languageCode:e.languageCode,important:e.important,currentSession:e.currentSession,context:r,homonym:t})}static readHomonym(e){return zs.readObject(e.homonym)}get hasTextQuoteSelectors(){return this.context.length>0}static readContext(e){let t=[];for(const r of e){const e=TextQuoteSelector.readObject(r);t.push(e)}return t}addContext(e){for(const t of e){0===this.context.filter((e=>e.isEqual(t))).length&&this.context.push(t)}}get lemmasList(){return this.homonym&&this.homonym.lexemes?this.homonym.lexemes.map((e=>e.lemma.word)).filter(((e,t,r)=>r.indexOf(e)===t)).join(", "):""}merge(e){const t=["homonym","important","currentSession"];for(const r of t)this._emptyProp(r)&&!e._emptyProp(r)&&(this[r]=e[r])}_emptyProp(e){return!this[e]||"object"==typeof this[e]&&0===Object.keys(this[e]).length}get formattedContext(){let e={};for(const t of this.context)e[t.source]||(e[t.source]=[]),e[t.source].push(t);return e}}class WordList{constructor(e,t=[]){if(!e)throw new Error("Unable to construct a wordlist without a languagecode");this.languageCode=e,this.items={},t.forEach((e=>{this.addWordItem(e)}))}get size(){return Object.keys(this.items).length}get values(){return Object.values(this.items)}get isEmpty(){return 0===Object.values(this.items).length}addWordItem(e){if(e.languageCode!==this.languageCode)throw new Error(`Language Code mismatch ${e.languageCode} !=== ${this.languageCode}`);const t=this.getWordItem(e.targetWord,!1);t&&e.merge(t);const r=this._makeItemKey(this.languageCode,e.targetWord);this.items[r]=e}deleteWordItem(e){const t=this._makeItemKey(this.languageCode,e),r=this.items[t];return r&&delete this.items[t],r}removeAllWordItems(){this.items={}}getWordItem(e,t=!0,r=null){const s=this._makeItemKey(this.languageCode,e);if(t&&!this.items[s]){const t=new WordItem({targetWord:e,languageCode:this.languageCode});r&&r.pub({dataObj:t,params:{segment:"common"}}),this.items[s]=t}return this.items[s]}_makeItemKey(e,t){return`${e}:${t.toLowerCase()}`}}class TreebankDataItem{constructor(e=null){this.version=0,this.app=null,this.sourceUrl=null,this.wordIds=[],this.sentenceId=null,this.doc=null,this.suppressTree=!1;const t=e?e.closest("[data-alpheios_tb_app]"):document.querySelector("[data-alpheios_tb_app]");if(t){if(this.app=t.dataset.alpheios_tb_app,"perseids-treebank-template"!==this.app)throw new Error("Unsupported treebank application. This version of Alpheios only supports the perseids-treebank-template viewer app.");if(t.dataset.alpheios_tb_app_version&&(this.version=Number.parseInt(t.dataset.alpheios_tb_app_version,10),!Number.isInteger(this.version)))throw new Error(`Treebank version is incorrect in: ${t.outerHTML}`);if(!t.dataset.alpheios_tb_app_url)throw new Error(`Missing treebank source URL in: ${t.outerHTML}`);this.sourceUrl=t.dataset.alpheios_tb_app_url,t.dataset.alpheios_tb_morph_only&&(this.suppressTree=Boolean("false"!==t.dataset.alpheios_tb_morph_only));const r=e?e.closest("[data-alpheios_tb_ref]"):document.querySelector("[data-alpheios_tb_ref]");let s,a=null;if(e?(a=e.closest("[data-alpheios_tb_word]"),s=a?a.closest("[data-alpheios_tb_sent]"):e.closest("[data-alpheios_tb_sent]")):s=document.querySelector("[data-alpheios_tb_sent]"),!r&&!a&&!s)throw new Error("An element does not have data-alpheios_tb_ref, data-alpheios_tb_word or data-alpheios_tb_sent attributes");if(a||s){if(!s)throw new Error("Sentence ID is undefined: there is no parent element with data-alpheios_tb_sent attribute");const e=a?a.closest("[data-alpheios_tb_doc]"):s.closest("[data-alpheios_tb_doc]");if(!e)throw new Error("Document ID is undefined: there is no parent element with data-alpheios_tb_doc attribute");a&&(this.wordIds=a.dataset.alpheios_tb_word.split(" ")),this.sentenceId=s.dataset.alpheios_tb_sent,this.doc=e.dataset.alpheios_tb_doc}else{const e=r.dataset.alpheios_tb_ref;let s;try{s=e.split(" ").map((e=>TreebankDataItem.parseReference(e)))}catch(e){throw new Error(`${e.message} in: ${t.outerHTML}`)}s=s.filter((e=>e.doc===s[0].doc&&e.sent===s[0].sent)),this.doc=s[0].doc,this.sentenceId=s[0].sent,this.wordIds=s.map((e=>e.word))}}if(!this.doc)throw new Error("Document data is missing");if(!this.sentenceId)throw new Error("Sentence data is missing")}static getTreebankData(e=null){try{return new TreebankDataItem(e)}catch(e){return null}}static parseReference(e){const[t,r]=e.split(/#/);if(!t||!r)throw new Error("Invalid treebank reference");const[s,a]=r.split(/-/);if(!s)throw new Error("Invalid treebank sent ID");if(!a)throw new Error("Invalid treebank word ID");return{doc:t,sent:s,word:a}}setWordData(e){this.wordIds=e}removeWordData(){this.wordIds=[]}get fullUrl(){return this.sourceUrl.replace("DOC",this.doc).replace("SENTENCE",this.sentenceId)}get docUrl(){return this.sourceUrl.replace("DOC",this.doc)}get provider(){return new URL(this.fullUrl).origin}get hasWordData(){return this.wordIds.length>0}get hasSentenceData(){return Boolean(this.sentenceId)}}class OptionItem{constructor(e,t,r){if(!e)throw new Error("Item cannot be empty");if(!t)throw new Error("Key cannot be empty");if(!r)throw new Error("Storage adapter object should be provided");for(const t of Object.keys(e))this[t]=e[t];this.currentValue=this.defaultValue,this.name=t,this.storageAdapter=r}textValues(){return this.values.map((e=>e.text))}currentItem(e){let t=[];for(const r of this.values)if(this.multiValue){if(this.currentValue.includes(r.value)){const s=e?r[e]:r;t.push(s)}}else r.value===this.currentValue&&(t=e?r[e]:r);return t}currentTextValue(){return this.currentItem("text")}addValue(e,t){return this.values.push({value:e,text:t}),this}setValue(e){return this.currentValue=e,this.save(),this}setTextValue(e){this.currentValue=this.multiValue?[]:"";for(const t of this.values)if(this.multiValue)for(const r of e)t.text===r&&this.currentValue.push(t.value);else t.text===e&&(this.currentValue=t.value);return this.save(),this}removeItem(){this.currentValue=null,this.storageAdapter.remove(this.name).then((()=>{}),(e=>{Logger.getInstance().error(`Unexpected error resetting Alpheios option ${this.name}: ${e}`)}))}save(){let e={};e[this.name]=JSON.stringify(this.currentValue),this.storageAdapter.set(e).then((()=>{}),(e=>{Logger.getInstance().error(`Unexpected error storing Alpheios option ${this.name}: ${e}`)}))}uploadValuesFromArray(e){this.values=[...e],this.defaultValue=this.values[0].value}}class Options{constructor(e,t){if(!(e&&e.domain&&e.items&&e.version))throw new Error('Defaults have no obligatory "domain", "version" and "items" properties');if(!t)throw new Error("No storage adapter implementation provided");this.defaults=e,this.domain=e.domain,this.version=e.version.toString(),this.storageAdapter=t,this.items=Options.initItems(this.defaults.items,this.storageAdapter,this.domain,this.version)}static initItems(e,t,r,s){let a={};for(const[n,o]of Object.entries(e))if(o.group){a[n]=[];for(const[e,i]of Object.entries(o.group)){const o=Options.constructKey(r,s,n,e);a[n].push(new OptionItem(i,o,t))}}else{const e=Options.constructKey(r,s,n);a[n]=new OptionItem(o,e,t)}return a}async reset(){await this.storageAdapter.clearAll(),this.items=Options.initItems(this.defaults.items,this.storageAdapter,this.domain,this.version)}get names(){return Object.keys(this.items)}async load(){try{const e=await this.storageAdapter.get();for(const t in e){const r=Options.parseKey(t);if(this.items.hasOwnProperty(r.name)&&this.version===r.version)if(r.group)this.items[r.name].forEach((s=>{if(s.name===t)try{s.currentValue=JSON.parse(e[t])}catch(t){Logger.getInstance().warn(`Unable to parse Alpheios option value for  ${r.name} from ${e[r.name]}`,t)}}));else try{this.items[r.name].currentValue=JSON.parse(e[t])}catch(t){Logger.getInstance().warn(`Unable to parse Alpheios option value for  ${r.name} from ${e[r.name]}`,t)}}return this}catch(e){const t=`Unexpected error retrieving options for Alpheios from local storage: ${e}. Default values will be used instead`;Logger.getInstance().error(t)}}static constructKey(e,t,r,s=null){let a=`${e}__${t}__${r}`;return s&&(a=`${a}__${s}`),a}static parseKey(e){const[t,r,s,a]=e.split("__",4);let n;try{n={domain:t,version:r,name:s,group:a}}catch(t){Logger.getInstance().warn(`Failed to parse stored Alpheios options key ${e}`)}return n}get formatLabelValueList(){let e={};return Object.keys(this.items).forEach((t=>{void 0!==this.items[t].currentValue&&(e[t]=this.items[t].currentValue)})),e}checkAndUploadValuesFromArray(e){Object.values(this.items).forEach((t=>{t.valuesArray&&!t.values&&e[t.valuesArray]&&t.uploadValuesFromArray(e[t.valuesArray])}))}clone(e,t){let r=Object.assign({},this.defaults);r.domain=`${r.domain}-${e}`;const s=new Options(r,new t(r.domain));return Object.keys(s.items).forEach((e=>{let t=s.items[e];this.items[e].values&&t.uploadValuesFromArray(this.items[e].values)})),s}}class DefaultsLoader{static fromJSON(e){try{return JSON.parse(e)}catch(e){return Logger.getInstance().error("Unable to parse Alpheios JSON options string:",e),{}}}}class StorageAdapter{constructor(e="alpheios-storage-domain"){this.domain=e}set(e){return new Promise(((e,t)=>t(new Error("Set method should be implemented in a subclass"))))}get(e){return new Promise(((e,t)=>t(new Error("Get method should be implemented in a subclass"))))}remove(e){return new Promise(((e,t)=>t(new Error("Remove method should be implemented in a subclass"))))}clearAll(){return new Promise(((e,t)=>t(new Error("clearAll method should be implemented in a subclass"))))}}class ExtensionSyncStorage extends StorageAdapter{set(e){return browser.storage.sync.set(e)}get(e){return browser.storage.sync.get(e)}clearAll(){return browser.storage.sync.clear()}}class LocalStorageArea extends StorageAdapter{set(e){return new Promise(((t,r)=>{try{let t=window.localStorage.getItem(`${this.domain}-keys`);t=t?JSON.parse(t):[];for(const[r,s]of Object.entries(e))window.localStorage.setItem(r,s),t.includes(r)||t.push(r);window.localStorage.setItem(`${this.domain}-keys`,JSON.stringify(t))}catch(e){r(e)}t()}))}remove(e){return new Promise(((t,r)=>{try{if(e){let r=window.localStorage.getItem(`${this.domain}-keys`);if(r){r=JSON.parse(r);const s=r.indexOf(e);-1!==s&&r.splice(s,1),window.localStorage.setItem(`${this.domain}-keys`,JSON.stringify(r)),window.localStorage.removeItem(e),t(!0)}else t(null)}}catch(e){r(e)}}))}get(e){return new Promise(((t,r)=>{try{e=e?Array.isArray(e)&&0===e.length?[]:"string"==typeof e?[e]:"object"==typeof e?Object.keys(e):[]:[];let r={};0===e.length&&((e=window.localStorage.getItem(`${this.domain}-keys`))?e=JSON.parse(e):t(r));for(const t of e)r[t]=window.localStorage.getItem(t);t(r)}catch(e){r(e)}}))}clearAll(){return new Promise(((e,t)=>{try{let t=null,r=window.localStorage.getItem(`${this.domain}-keys`);if(r){r=JSON.parse(r);for(const e of r)window.localStorage.removeItem(e);window.localStorage.setItem(`${this.domain}-keys`,JSON.stringify([])),e(!0)}else e(t)}catch(e){t(e)}}))}}var Js=r(4486),Ks=r.n(Js);class RemoteAuthStorageArea extends StorageAdapter{constructor(e="alpheios-storage-domain",t=null){if(super(e),!(t&&t.endpoints&&t.endpoints.settings.match(/^https:\/\//)&&t.accessToken))throw new Error("Authentication details missing or invalid");this.baseURL=t.endpoints.settings,this.requestContext={headers:{common:{Authorization:"bearer "+t.accessToken,"Content-Type":"application/json"}}}}async set(e){for(const[t,r]of Object.entries(e)){const e=`${this.baseURL}/${t}`,s=await Ks().post(e,r,this.requestContext);if(201!==s.status)throw new Error(`Unexpected result status from settings api: ${s.status}`)}}async get(){const e=`${this.baseURL}?domain=${this.domain}`,t=await Ks().get(e,this.requestContext);if(200===t.status)return t.data;throw new Error(`Unexpected result status from settings api: ${t.status}`)}async clearAll(){const e=`${this.baseURL}?domain=${this.domain}`,t=await Ks().delete(e,this.requestContext);if(200!==t.status)throw new Error(`Unexpected result status from settings api: ${t.status}`)}}class TempStorageArea extends StorageAdapter{set(e){return new Promise((e=>{e("TempStorageArea does not store any values permanently")}))}get(e){return new Promise((e=>{e("TempStorageArea does not have any stored values")}))}}class Resource{constructor({title:e,id:t,baseUrl:r,description:s}={}){this.title=e,this.id=t,this.baseUrl=r,this.description=s}uploadRefs({refs:e,passage:t}={}){this.passage=t,this.refs=e}get linkData(){return{baseUrl:this.baseUrl,title:this.title,id:this.id,description:this.description,type:"resource",resource:this}}get refsLinks(){return this.refs.map((e=>({baseUrl:this.baseUrl,id:this.id,ref:e,type:"document"})))}}class Collection{constructor({totalItems:e,title:t,id:r,baseUrl:s,description:a,pagination:n}={}){this.totalItems=e,this.title=t,this.id=r,this.baseUrl=s,this.description=a,this.members=[],this.resources=[],n&&(this.pagination=this.definePagination(n))}addMember(e){"Collection"===e.type&&this.members.push(new Collection(e)),"Resource"===e.type&&this.resources.push(new Resource(e))}get formattedTitle(){const e=this.totalItems?` (${this.totalItems})`:"";return`${this.title}${e}`}get linkData(){return{baseUrl:this.baseUrl,totalItems:this.totalItems,formattedTitle:this.formattedTitle,title:this.title,id:this.id,type:"collection"}}get membersLinks(){return this.members.map((e=>e.linkData))}get resourcesLinks(){return this.resources.map((e=>e.linkData))}get links(){return this.members.length>0?this.membersLinks:this.resources.length>0?this.resourcesLinks:[]}extractPageNum(e){if(e){const t=e.match(/page=(\d+)$/);return t?parseInt(t[1]):null}return null}definePagination(e){const t={first:this.extractPageNum(e.first),next:this.extractPageNum(e.next),last:this.extractPageNum(e.last),previous:this.extractPageNum(e.previous)};return t.current=t.next?t.next-1:t.previous?t.previous+1:1,t}}class Tab{constructor(e,t,r){this.tabId=e,this.windowId=t,this.status="attached"}get uniqueId(){return this.constructor.createUniqueId(this.tabId,this.windowId)}get isDeattached(){return"deattached"===this.status}deattach(){this.status="deattached"}attach(e){this.windowId=e,this.status="attached"}clone(){return new Tab(this.tabId,this.windowId)}compareWithTab(e){return this.tabId===e.tabId&&this.windowId===e.windowId}static createUniqueId(e,t){return Symbol.for(`Alpheios_tabId:${e.toString()},windowId:${t.toString()}`)}static createUniqueIdNew(e,t){return`Alpheios_tabId:${e.toString()},windowId:${t.toString()}`}}class UIStateAPI{constructor(){this.selectionLang=void 0,this.watchers=new Map}static get statuses(){return{script:{PENDING:Symbol.for("Alpheios_Status_Pending"),ACTIVE:Symbol.for("Alpheios_Status_Active"),DEACTIVATED:Symbol.for("Alpheios_Status_Deactivated"),DISABLED:Symbol.for("Alpheios_Status_Disabled")},panel:{OPEN:Symbol.for("Alpheios_Status_PanelOpen"),CLOSED:Symbol.for("Alpheios_Status_PanelClosed")}}}setItem(e,t){return this[e]=t,this.watchers&&this.watchers.has(e)&&this.watchers.get(e)(e,this),this}setWatcher(e,t){return this.watchers.set(e,t),this}isPanelOpen(){return!1}isPanelClosed(){return!1}setPanelOpen(){return this}setPanelClosed(){return this}uiIsActive(){return!1}activateUI(){return this}changeTab(e){return this}}class TabScript extends UIStateAPI{constructor(e){super(),this.tabID=e?e.uniqueId:void 0,this.tabObj=e,this.status=void 0,this.panelStatus=void 0,this.tab=void 0,this.embedLibStatus=void 0,this.uiActive=!1,this.watchers=new Map}updateTabObject(e,t){return this.tabObj=new Tab(e,t),this.tabID=this.tabObj.uniqueId,this}deattach(){this.tabObj.deattach()}attach(e){this.tabObj.attach(e)}get isDeattached(){return this.tabObj.isDeattached}static get propTypes(){return{NUMERIC:Symbol("Numeric"),STRING:Symbol("String"),SYMBOL:Symbol("Symbol")}}static get props(){return{status:{name:"status",valueType:TabScript.propTypes.SYMBOL,values:{PENDING:Symbol.for("Alpheios_Status_Pending"),ACTIVE:Symbol.for("Alpheios_Status_Active"),DEACTIVATED:Symbol.for("Alpheios_Status_Deactivated"),DISABLED:Symbol.for("Alpheios_Status_Disabled")},defaultValueIndex:0},embedLibStatus:{name:"embedLibStatus",valueType:TabScript.propTypes.SYMBOL,values:this.statuses.embedLib,defaultValueIndex:1},panelStatus:{name:"panelStatus",valueType:TabScript.propTypes.SYMBOL,values:{OPEN:Symbol.for("Alpheios_Status_PanelOpen"),CLOSED:Symbol.for("Alpheios_Status_PanelClosed"),DEFAULT:Symbol.for("Alpheios_Status_PanelDefault")},defaultValueIndex:1},tab:{name:"tab",valueType:TabScript.propTypes.STRING,values:{INFO:"info",DEFAULT:"default"},defaultValueIndex:0},uiActive:{name:"uiActive",valueType:Boolean}}}static get symbolProps(){return[TabScript.props.status.name,TabScript.props.embedLibStatus.name,TabScript.props.panelStatus.name]}static get stringProps(){return[TabScript.props.tab.name]}static get booleanProps(){return[]}static get dataProps(){return TabScript.symbolProps.concat(TabScript.stringProps).concat(TabScript.booleanProps)}static create(e){let t=new TabScript;for(const r of Object.keys(e))t[r]=e[r];return t}static get defaults(){return{status:TabScript.statuses.script.ACTIVE,panelStatus:TabScript.statuses.panel.OPEN}}static get statuses(){return{script:{PENDING:Symbol.for("Alpheios_Status_Pending"),ACTIVE:Symbol.for("Alpheios_Status_Active"),DEACTIVATED:Symbol.for("Alpheios_Status_Deactivated"),DISABLED:Symbol.for("Alpheios_Status_Disabled")},embedLib:{ACTIVE:Symbol.for("Embedded_Lib_Status_Active"),INACTIVE:Symbol.for("Embedded_Lib_Status_Inactive")},panel:{OPEN:Symbol.for("Alpheios_Status_PanelOpen"),CLOSED:Symbol.for("Alpheios_Status_PanelClosed"),DEFAULT:Symbol.for("Alpheios_Status_PanelDefault")}}}setWatcher(e,t){return this.watchers.set(e,t),this}setItem(e,t){return this[e]=t,this.watchers&&this.watchers.has(e)&&this.watchers.get(e)(e,this),this}isEmbedLibActive(){return this.embedLibStatus===TabScript.statuses.embedLib.ACTIVE}setEmbedLibActiveStatus(){return this.setItem("embedLibStatus",TabScript.statuses.embedLib.ACTIVE),this}setEmbedLibInactiveStatus(){return this.setItem("embedLibStatus",TabScript.statuses.embedLib.INACTIVE),this}setEmbedLibStatus(e){e?this.setItem("embedLibStatus",TabScript.statuses.embedLib.ACTIVE):this.setItem("embedLibStatus",TabScript.statuses.embedLib.INACTIVE)}isPanelOpen(){return this.panelStatus===TabScript.statuses.panel.OPEN}isPanelClosed(){return this.panelStatus===TabScript.statuses.panel.CLOSED}setPanelOpen(){return this.setItem("panelStatus",TabScript.statuses.panel.OPEN),this}setPanelClosed(){return this.setItem("panelStatus",TabScript.statuses.panel.CLOSED),this}setPanelDefault(){return this.setItem("panelStatus",TabScript.statuses.panel.DEFAULT),this}isPanelStateDefault(){return this.panelStatus===TabScript.statuses.panel.DEFAULT}isPanelStateValid(){return this.panelStatus===TabScript.statuses.panel.OPEN||this.panelStatus===TabScript.statuses.panel.CLOSED}setTabDefault(){return this.setItem("tab",TabScript.props.tab.values.DEFAULT),this}isTabStateDefault(){return this.tab===TabScript.props.tab.values.DEFAULT}hasSameID(e){return Symbol.keyFor(this.tabID)===Symbol.keyFor(e)}isActive(){return this.status===TabScript.statuses.script.ACTIVE}isDeactivated(){return this.status===TabScript.statuses.script.DEACTIVATED}isDisabled(){return this.status===TabScript.statuses.script.DISABLED}isPending(){return this.status===TabScript.statuses.script.PENDING}uiIsActive(){return this[TabScript.props.uiActive.name]}activate(){return this.status=TabScript.statuses.script.ACTIVE,this}deactivate(){return this.status=TabScript.statuses.script.DEACTIVATED,this}disable(){return this.status=TabScript.statuses.script.DISABLED,this}activateUI(){return this.setItem(TabScript.props.uiActive.name,!0),this}changeTab(e){return this.setItem(TabScript.props.tab.name,e),this}update(e){for(const t of Object.keys(e))e[t]&&(this[t]=e[t]);return this}diff(e){let t={_changedKeys:[],_changedEntries:[]};this.tabID!==e.tabID&&(t.tabID=e.tabID,t._changedKeys.push("tabID"),t._changedEntries.push(["tabID",e.tabID]));for(const r of Object.keys(e))TabScript.dataProps.includes(r)&&this.hasOwnProperty(r)&&this[r]&&e[r]&&this[r]!==e[r]&&(t[r]=e[r],t._changedKeys.push(r),t._changedEntries.push([r,e[r]]));return t.keys=function(){return t._changedKeys},t.entries=function(){return t._changedEntries},t.has=function(e){return t._changedKeys.includes(e)},t.isEmpty=function(){return!t._changedKeys.length},t}static serializable(e){let t={};t.tabID="symbol"==typeof e.tabID?Symbol.keyFor(e.tabID):e.tabID,t.tabObj=e.tabObj?e.tabObj.clone():void 0;for(const r of Object.keys(e))if(TabScript.dataProps.includes(r)){const s=e[r];t[r]="symbol"==typeof s?Symbol.keyFor(s):s}return t}static readObject(e){const t=e.tabObj&&e.tabObj.tabId&&e.tabObj.windowId?new Tab(e.tabObj.tabId,e.tabObj.windowId,e.tabObj.status):void 0;let r=new TabScript(t);for(const t of TabScript.symbolProps)e[t]&&(r[t]=Symbol.for(e[t]));for(const t of TabScript.stringProps)e[t]&&(r[t]=e[t]);for(const t of TabScript.booleanProps)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}}},2357:e=>{"use strict";e.exports=require("assert")},6417:e=>{"use strict";e.exports=require("crypto")},5747:e=>{"use strict";e.exports=require("fs")},8605:e=>{"use strict";e.exports=require("http")},7211:e=>{"use strict";e.exports=require("https")},1631:e=>{"use strict";e.exports=require("net")},2413:e=>{"use strict";e.exports=require("stream")},3867:e=>{"use strict";e.exports=require("tty")},8835:e=>{"use strict";e.exports=require("url")},1669:e=>{"use strict";e.exports=require("util")},8761:e=>{"use strict";e.exports=require("zlib")}},t={};function __webpack_require__(r){if(t[r])return t[r].exports;var s=t[r]={exports:{}};return e[r](s,s.exports,__webpack_require__),s.exports}return __webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(6849)})()}));