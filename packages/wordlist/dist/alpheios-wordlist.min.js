!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("alpheios-data-models"),require("intl-messageformat"));else if("function"==typeof define&&define.amd)define(["alpheios-data-models","intl-messageformat"],e);else{var o="object"==typeof exports?e(require("alpheios-data-models"),require("intl-messageformat")):e(t["alpheios-data-models"],t["intl-messageformat"]);for(var s in o)("object"==typeof exports?exports:t)[s]=o[s]}}(window,function(t,e){return function(t){var e={};function o(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(s,r,function(e){return t[e]}.bind(null,r));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=16)}([function(e,o){e.exports=t},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t){t.exports={TOOLTIP_ALL_IMPORTANT:{message:"Make all important ",description:"Make all words inside language block important",component:"WordListPanel"},TOOLTIP_NO_IMPORTANT:{message:"Remove all important ",description:"Remove all words inside language block important",component:"WordListPanel"}}},function(t){t.exports={COOKIE_TEST_MESSAGE:{message:"This is a test message about a biscuit.",description:"A test message that is shown in a panel",component:"Panel"},NUM_LINES_TEST_MESSAGE:{message:"There {numLines, plural, =0 {are no queues} =1 {is one queue} other {are # queues}}.",description:"A test message that is shown in a panel",component:"Panel",params:["numLines"]}}},function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{viewBox:"0 0 447.6 757.4"}},[e("path",{attrs:{d:"M-128.4 305.8c74.8 53.3 146.8 110.5 215.7 171.3 0 0 348.4-399.4 557.1-477.1l27 53S277.2 418 150.5 757.4l-374.3-378.7 95.4-72.9z"}})])},toString:function(){return"C:\\_Irina\\_clients\\_Alpheios Project\\git\\wordlist\\src\\icons\\check.svg"}}},function(t,e,o){},function(t,e,o){var s=o(11),r=o(12);t.exports=function(t,e,o){var n=e&&o||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var a=0;a<16;++a)e[n+a]=i[a];return e||r(i)}},function(t,o){t.exports=e},,function(t,e){var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(o){var s=new Uint8Array(16);t.exports=function(){return o(s),s}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},function(t,e){for(var o=[],s=0;s<256;++s)o[s]=(s+256).toString(16).substr(1);t.exports=function(t,e){var s=e||0,r=o;return[r[t[s++]],r[t[s++]],r[t[s++]],r[t[s++]],"-",r[t[s++]],r[t[s++]],"-",r[t[s++]],r[t[s++]],"-",r[t[s++]],r[t[s++]],"-",r[t[s++]],r[t[s++]],r[t[s++]],r[t[s++]],r[t[s++]],r[t[s++]]].join("")}},function(t,e,o){"use strict";var s=o(1);o.n(s).a},function(t,e,o){"use strict";var s=o(2);o.n(s).a},function(t,e,o){"use strict";var s=o(3);o.n(s).a},function(t,e,o){"use strict";o.r(e);var s=o(7),r=o.n(s),n=o(0),i=o(8),a=o.n(i);class word_item_WordItem{constructor(t){this.targetWord=t.targetWord,this.languageID=t.languageID,this.homonym=t,this.important=!1,this.ID=a()()}makeImportant(){this.important=!0}removeImportant(){this.important=!1}get lemmasList(){return this.homonym.lexemes.map(t=>t.lemma.word).join(", ")}static uploadFromJSON(t){let e=n.Homonym.readObject(t.homonym);return new word_item_WordItem(e)}}class word_list_WordList{constructor(t,e,o){this.userID=t,this.languageID=e,this.storageAdapter=o,this.items={},this.createStorageID()}createStorageID(){let t=n.LanguageModelFactory.getLanguageCodeFromId(this.languageID);this.storageID=this.userID+"-"+t}async uploadFromStorage(){let t=await this.storageAdapter.get(this.storageID);console.info("***************result",t);let e=JSON.parse(t[this.storageID]);return!!e&&(console.info("**********************resultObj",e),Object.values(e.items).forEach(t=>{let e=word_item_WordItem.uploadFromJSON(t);this.push(e)}),console.info("********************uploadFromStorage1",t),console.info("********************uploadFromStorage2",this.items),!0)}get values(){return Object.values(this.items)}push(t){return this.languageID===t.languageID&&!this.contains(t)&&(this.items[t.ID]=t,!0)}pushToStorage(t){this.push(t)&&this.saveToStorage()}saveToStorage(){let t={};t[this.storageID]=this.convertToStorage(),this.storageAdapter.set(t)}convertToStorage(){let t={};return Object.values(this.items).forEach(e=>{t[e.ID]=JSON.stringify(Object.assign({},e))}),console.info("*******************convertToStorage",t),JSON.stringify(t)}contains(t){return this.values.map(t=>t.targetWord).includes(t.targetWord)}makeAllImportant(){this.values.forEach(t=>{t.makeImportant()})}removeAllImportant(){this.values.forEach(t=>{t.removeImportant()})}getWordItemByID(t,e){return this.items[e]}}class StorageAdapter{constructor(t="alpheios-storage-domain"){this.domain=t}set(t){console.info("*****************set value to storage")}get(t){console.info("*****************get value from storage")}remove(t){return new Promise((t,e)=>e(new Error("Remove method should be implemented in a subclass")))}}class indexed_db_adapter_IndexedDBAdapter extends StorageAdapter{constructor(t="alpheios-storage-domain"){super(t),this.available=this.initIndexedDBNamespaces(),this.currentVersion=1,this.dbName="AlpheiosUserWordLists"}initIndexedDBNamespaces(){return this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||{READ_WRITE:"readwrite"},this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,!!this.indexedDB||(console.info("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),!1)}openDatabase(t,e){let o=this.indexedDB.open(this.dbName,this.currentVersion);return o.onerror=(t=>{console.info("*************Some problems with opening LabirintOrders",t.target)}),o.onsuccess=e,o.onupgradeneeded=t,o}set(t,e,o){const s=t.transaction([e],"readwrite");s.oncomplete=(t=>{console.info("**************testData added")}),s.onerror=(t=>{console.info("**************testData onerror")});const r=s.objectStore(e);o.forEach(t=>{const e=r.put(t);e.onsuccess=(t=>{console.info("****************wordlist added successful",t.target.result)}),e.onerror=(t=>{console.info("****************wordlist error with adding data",t.target)})})}get(t,e,o){const s=t.transaction([e]).objectStore(e);this.hasProperCondition(o)?this.getWithCondition(s,o):(console.info("There is not enough information for creating index condition"),this.getWithoutConditions(s))}hasProperCondition(t){return t.indexName&&t.value&&t.type&&["only"].includes(t.type)}getWithoutConditions(t){const e=t.openCursor(null);e.onsuccess=(t=>{const e=t.target.result;e&&(console.info("***************cursor no condition",e.key,e.value),e.continue())}),e.onerror=(t=>{console.info("****************cursor without condition - some error",t.target)})}getWithCondition(t,e){const o=t.index(e.indexName),s=this.IDBKeyRange[e.type](e.value),r=o.openCursor(s);r.onsuccess=(t=>{const e=t.target.result;e&&(console.info("***************cursor with condition",e.key,e.value),e.continue())}),r.onerror=(t=>{console.info("****************cursor with condition - some error",t.target)})}}class wordlist_controller_WordlistController{constructor(t){this.userID=t,this.wordLists={},this.storageAdapter=new indexed_db_adapter_IndexedDBAdapter}static get langAliases(){return new Map([[n.Constants.LANG_LATIN,"Latin"],[n.Constants.LANG_GREEK,"Greek"],[n.Constants.LANG_ARABIC,"Arabic"],[n.Constants.LANG_PERSIAN,"Persian"],[n.Constants.LANG_GEEZ,"Ancient Ethiopic (Ge'ez)"]])}get availableLists(){let t=[];return Array.from(wordlist_controller_WordlistController.langAliases.keys()).forEach(e=>{let o=n.LanguageModelFactory.getLanguageCodeFromId(e);t.push(this.userID+"-"+o)}),t}initLists(){this.storageAdapter.available&&this.storageAdapter.openDatabase(this.initDBStructure.bind(this),this.uploadListsFromDB.bind(this))}initDBStructure(t){const e=t.target.result.createObjectStore("UserLists",{keyPath:"ID"});e.createIndex("ID","ID",{unique:!0}),e.createIndex("userID","userID",{unique:!1}),e.createIndex("languageCode","languageCode",{unique:!1}),console.info("*******************UserLists Object store created")}uploadListsFromDB(t){const e=t.target.result;console.info("**************DB opened",e.name,e.version,e.objectStoreNames),this.availableLists.forEach(t=>{console.info("**********************getting for",t),this.storageAdapter.get(e,"UserLists",{indexName:"ID",value:t,type:"only"})})}async initLists_backup(){let t=wordlist_controller_WordlistController.availableLists;console.info("****************************langs",t),await t.forEach(async t=>{await this.createWordList(t,!0),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)}),console.info("********************initLists",this.wordLists),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)}async createWordList(t,e=!1){let o=n.LanguageModelFactory.getLanguageCodeFromId(t),s=new word_list_WordList(this.userID,t,this.storageAdapter);await s.uploadFromStorage();(s.items.length>0||!1===e)&&(this.wordLists[o]=s)}async updateWordList(t){let e=t.languageID,o=n.LanguageModelFactory.getLanguageCodeFromId(e);Object.keys(this.wordLists).includes(o)||await this.createWordList(e),this.wordLists[o].pushToStorage(new word_item_WordItem(t))}async onHomonymReady(t){await this.updateWordList(t),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)}}wordlist_controller_WordlistController.evt={WORDLIST_UPDATED:new n.PsEvent("Wordlist updated",wordlist_controller_WordlistController)};var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"alpheios-wordlist"},t._l(t.languagesList,function(e,s){return o("div",{key:s,staticClass:"alpheios-wordlist-language"},[o("word-language-panel",{attrs:{wordlist:t.wordLists[e],messages:t.l10n.messages,updated:t.updated}})],1)}),0)};l._withStripped=!0;var d=o(9),c=o.n(d);class message_Message{constructor(t,e){if(!e)throw new Error("Locale data is missing");if(!t)throw new Error("Message data is missing");this.locale=e;for(const e of Object.keys(t))this[e]=t[e];this.formatFunc=new c.a(t.message,this.locale)}get hasParameters(){return!!(this.params&&Array.isArray(this.params)&&this.params.length>0)}defineProperties(t,e){let o=this;this.hasParameters?t[e]={format:t=>o.formatFunc.format(t),get(...t){let e={};for(let[s,r]of o.params.entries())e[r]=t[s];return o.formatFunc.format(e)}}:Object.defineProperty(t,e,{get:()=>o.formatFunc.format(),enumerable:!0,configurable:!0})}}class message_bundle_MessageBundle{constructor(t,e){if(!e)throw new Error("Locale data is missing");if(!t)throw new Error("Message data is missing");this._locale=e,this.messages={};let o="string"==typeof t?JSON.parse(t):t;this.append(o)}appendFromJSON(t){let e=JSON.parse(t);this.append(e)}append(t){for(const[e,o]of Object.entries(t))if(this.hasOwnProperty(e))console.warn(`A key name "${e}" is reserved or already used. A message will be ignored"`);else{let t=new message_Message(o,this._locale);this[e]=t,t.defineProperties(this.messages,e)}}get(t,e){return this[t]?"function"==typeof this[t].format?this[t].format(e):this[t]:`Not in translation data: "${t}"`}get locale(){return this._locale}}var u=o(4),p=o(5),m="en-US",h="en-GB",g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"alpheios-wordlist-commands"},[o("div",{staticClass:"alpheios-wordlist-language__title"},[t._v(t._s(t.languageName))]),t._v(" "),o("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:t.messages.TOOLTIP_ALL_IMPORTANT}},[o("div",{staticClass:"alpheios-wordlist-commands__item alpheios-wordlist-commands__item-all-important",on:{click:function(e){t.makeAllImportant()}}},[o("check-icon")],1)]),t._v(" "),o("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:t.messages.TOOLTIP_NO_IMPORTANT}},[o("div",{staticClass:"alpheios-wordlist-commands__item alpheios-wordlist-commands__item-no-important",on:{click:function(e){t.removeAllImportant()}}},[o("check-icon")],1)])],1),t._v(" "),t._l(t.wordItems,function(t){return o("div",{key:t.ID,staticClass:"alpheios-wordlist-language__worditem"},[o("word-item-panel",{attrs:{worditem:t}})],1)})],2)};g._withStripped=!0;var f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"alpheios-tooltip",style:t.additionalStyles},[t._t("default"),t._v(" "),t.tooltipText?o("span",{staticClass:"alpheios-tooltip__text",class:t.finalTooltipDirection},[t._v("\n    "+t._s(t.tooltipText)+"\n  ")]):t._e()],2)};f._withStripped=!0;var _={name:"TooltipWrap",data:()=>({allowedTooltipClasses:["alpheios-tooltip__top","alpheios-tooltip__top-right","alpheios-tooltip__top-left","alpheios-tooltip__bottom","alpheios-tooltip__bottom-right","alpheios-tooltip__bottom-wide","alpheios-tooltip__bottom-narrow","alpheios-tooltip__bottom-narrow2","alpheios-tooltip__left","alpheios-tooltip__right"],defaultTooltipClass:"alpheios-tooltip__bottom"}),props:{tooltipText:{type:String,required:!0},tooltipDirection:{type:String,required:!1},additionalStyles:{type:Object,required:!1}},computed:{tooltipDirectionLC:function(){return this.tooltipDirection?this.tooltipDirection.toLowerCase():""},tooltipDirectionClass:function(){return"alpheios-tooltip__"+this.tooltipDirectionLC},finalTooltipDirection:function(){return this.allowedTooltipClasses.indexOf(this.tooltipDirectionClass)>-1?this.tooltipDirectionClass:this.defaultTooltipClass}}};o(13);function w(t,e,o,s,r,n,i,a){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=o,d._compiled=!0),s&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},d._ssrRegister=l):r&&(l=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,e){return l.call(e),c(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:d}}var v=w(_,f,[],!1,null,null,null);v.options.__file="vue-components/common-components/tooltip-wrap.vue";var I=v.exports,b=o(6),y=o.n(b),L=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.itemClasses},[o("div",{staticClass:"alpheios-worditem__data alpheios-worditem__important",on:{click:function(e){t.changeImportant()}}},[o("check-icon")],1),t._v(" "),o("div",{staticClass:"alpheios-worditem__data alpheios-worditem__targetWord"},[t._v(t._s(t.worditem.targetWord))]),t._v(" "),o("div",{staticClass:"alpheios-worditem__data alpheios-worditem__lemmasList"},[t._v(t._s(t.worditem.lemmasList))])])};L._withStripped=!0;var D={name:"WordItemPanel",components:{checkIcon:y.a},props:{worditem:{type:Object,required:!0}},data:()=>({important:!1}),mounted(){this.important=this.worditem.important,this.$parent.$on("eventChangeImportant",this.eventChangeImportant)},computed:{itemClasses(){return{active:this.important}}},methods:{changeImportant(){this.worditem.important=!this.worditem.important,this.important=this.worditem.important},eventChangeImportant(){this.important=this.worditem.important}}},C=(o(14),w(D,L,[],!1,null,null,null));C.options.__file="vue-components/word-item-panel.vue";var A=C.exports,S=w({name:"WordListPanel",components:{checkIcon:y.a,wordItemPanel:A,alphTooltip:I},props:{wordlist:{type:Object,required:!0},messages:{type:Object,required:!0},updated:{type:Number,required:!0}},computed:{wordItems(){return this.updated?this.wordlist.values:[]},languageName(){let t=new Map([[n.Constants.LANG_LATIN,"Latin"],[n.Constants.LANG_GREEK,"Greek"],[n.Constants.LANG_ARABIC,"Arabic"],[n.Constants.LANG_PERSIAN,"Persian"],[n.Constants.LANG_GEEZ,"Ancient Ethiopic (Ge'ez)"]]),e=this.wordlist.languageID;return t.has(e)?t.get(e):""}},methods:{makeAllImportant(){this.wordlist.makeAllImportant(),this.$emit("eventChangeImportant")},removeAllImportant(){this.wordlist.removeAllImportant(),this.$emit("eventChangeImportant")}}},g,[],!1,null,null,null);S.options.__file="vue-components/word-language-panel.vue";var T={name:"WordListPanel",components:{wordLanguagePanel:S.exports},props:{wordlistC:{type:Object,required:!0},updated:{type:Number,required:!0}},computed:{languagesList(){return this.updated&&Object.keys(this.wordLists).length>0?Object.keys(this.wordLists):[]},l10n:()=>(new class{constructor(){return this.selectedLocale=void 0,this.bundles=new Map,this}addMessages(t,e){let o;return this.bundles.has(e)?(o=this.bundles.get(e)).appendFromJSON(t):(o=new message_bundle_MessageBundle(t,e),this.addMessageBundle(o)),this}addMessageBundle(t){return this.bundles.set(t.locale,t),this.selectedLocale||this.setLocale(t.locale),this}get locales(){return Array.from(this.bundles.keys())}get bundle(){return this.bundles.get(this.selectedLocale)}get messages(){return this.bundles.has(this.selectedLocale)?this.bundles.get(this.selectedLocale).messages:{}}setLocale(t){return this.bundles.has(t)?this.selectedLocale=t:console.error(`Cannot set locale to "${t}" because there is no message bundle for it`),this}}).addMessages(u,m).addMessages(p,h).setLocale(m),wordLists(){return this.wordlistC.wordLists}},methods:{}},O=(o(15),w(T,l,[],!1,null,null,null));O.options.__file="vue-components/word-list-panel.vue";var x=O.exports;o.d(e,"Style",function(){return r.a}),o.d(e,"WordlistController",function(){return wordlist_controller_WordlistController}),o.d(e,"WordListPanel",function(){return x})}])});