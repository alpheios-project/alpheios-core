!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("alpheios-data-models"));else if("function"==typeof define&&define.amd)define(["alpheios-data-models"],t);else{var r="object"==typeof exports?t(require("alpheios-data-models")):t(e["alpheios-data-models"]);for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(window,function(e){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var o=r(4),s=r(10),n=Object.prototype.toString;function a(e){return"[object Array]"===n.call(e)}function i(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===n.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:s,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:i,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:u,isStream:function(e){return i(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function r(r,o){"object"==typeof t[o]&&"object"==typeof r?t[o]=e(t[o],r):t[o]=r}for(var o=0,s=arguments.length;o<s;o++)l(arguments[o],r);return t},extend:function(e,t,r){return l(t,function(t,s){e[s]=r&&"function"==typeof t?o(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){e.exports=r(9)},function(e,t,r){"use strict";(function(t){var o=r(1),s=r(13),n={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,u={adapter:("undefined"!=typeof XMLHttpRequest?i=r(5):void 0!==t&&(i=r(5)),i),transformRequest:[function(e,t){return s(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){u.headers[e]={}}),o.forEach(["post","put","patch"],function(e){u.headers[e]=o.merge(n)}),e.exports=u}).call(this,r(12))},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}}},function(e,t,r){"use strict";var o=r(1),s=r(14),n=r(16),a=r(17),i=r(18),u=r(6),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(19);e.exports=function(e){return new Promise(function(t,d){var c=e.data,h=e.headers;o.isFormData(c)&&delete h["Content-Type"];var m=new XMLHttpRequest,p="onreadystatechange",f=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in m||i(e.url)||(m=new window.XDomainRequest,p="onload",f=!0,m.onprogress=function(){},m.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";h.Authorization="Basic "+l(g+":"+y)}if(m.open(e.method.toUpperCase(),n(e.url,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,m[p]=function(){if(m&&(4===m.readyState||f)&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in m?a(m.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?m.response:m.responseText,status:1223===m.status?204:m.status,statusText:1223===m.status?"No Content":m.statusText,headers:r,config:e,request:m};s(t,d,o),m=null}},m.onerror=function(){d(u("Network Error",e,null,m)),m=null},m.ontimeout=function(){d(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",m)),m=null},o.isStandardBrowserEnv()){var D=r(20),b=(e.withCredentials||i(e.url))&&e.xsrfCookieName?D.read(e.xsrfCookieName):void 0;b&&(h[e.xsrfHeaderName]=b)}if("setRequestHeader"in m&&o.forEach(h,function(e,t){void 0===c&&"content-type"===t.toLowerCase()?delete h[t]:m.setRequestHeader(t,e)}),e.withCredentials&&(m.withCredentials=!0),e.responseType)try{m.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){m&&(m.abort(),d(e),m=null)}),void 0===c&&(c=null),m.send(c)})}},function(e,t,r){"use strict";var o=r(15);e.exports=function(e,t,r,s,n){var a=new Error(e);return o(a,t,r,s,n)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},function(e,t,r){"use strict";var o=r(1),s=r(4),n=r(11),a=r(3);function i(e){var t=new n(e),r=s(n.prototype.request,t);return o.extend(r,n.prototype,t),o.extend(r,t),r}var u=i(a);u.Axios=n,u.create=function(e){return i(o.merge(a,e))},u.Cancel=r(8),u.CancelToken=r(26),u.isCancel=r(7),u.all=function(e){return Promise.all(e)},u.spread=r(27),e.exports=u,e.exports.default=u},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var o=r(3),s=r(1),n=r(21),a=r(22);function i(e){this.defaults=e,this.interceptors={request:new n,response:new n}}i.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),(e=s.merge(o,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},s.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,r){return this.request(s.merge(r||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,r,o){return this.request(s.merge(o||{},{method:e,url:t,data:r}))}}),e.exports=i},function(e,t){var r,o,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,l=[],d=!1,c=-1;function h(){d&&u&&(d=!1,u.length?l=u.concat(l):c=-1,l.length&&m())}function m(){if(!d){var e=i(h);d=!0;for(var t=l.length;t;){for(u=l,l=[];++c<t;)u&&u[c].run();c=-1,t=l.length}u=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||d||i(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,r){"use strict";var o=r(1);e.exports=function(e,t){o.forEach(e,function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])})}},function(e,t,r){"use strict";var o=r(6);e.exports=function(e,t,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(o("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,o,s){return e.config=t,r&&(e.code=r),e.request=o,e.response=s,e}},function(e,t,r){"use strict";var o=r(1);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(o.isURLSearchParams(t))n=t.toString();else{var a=[];o.forEach(t,function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(s(t)+"="+s(e))}))}),n=a.join("&")}return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e}},function(e,t,r){"use strict";var o=r(1),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,n,a={};return e?(o.forEach(e.split("\n"),function(e){if(n=e.indexOf(":"),t=o.trim(e.substr(0,n)).toLowerCase(),r=o.trim(e.substr(n+1)),t){if(a[t]&&s.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}}),a):a}},function(e,t,r){"use strict";var o=r(1);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function s(e){var o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=s(window.location.href),function(t){var r=o.isString(t)?s(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function s(){this.message="String contains an invalid character"}s.prototype=new Error,s.prototype.code=5,s.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,n=String(e),a="",i=0,u=o;n.charAt(0|i)||(u="=",i%1);a+=u.charAt(63&t>>8-i%1*8)){if((r=n.charCodeAt(i+=.75))>255)throw new s;t=t<<8|r}return a}},function(e,t,r){"use strict";var o=r(1);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,r,s,n,a){var i=[];i.push(e+"="+encodeURIComponent(t)),o.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),o.isString(s)&&i.push("path="+s),o.isString(n)&&i.push("domain="+n),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var o=r(1);function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=s},function(e,t,r){"use strict";var o=r(1),s=r(23),n=r(7),a=r(3),i=r(24),u=r(25);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.baseURL&&!i(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return l(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return n(t)||(l(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var o=r(1);e.exports=function(e,t,r){return o.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var o=r(8);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new o(e),t(r.reason))})}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s(function(t){e=t}),cancel:e}},e.exports=s},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var o=r(0);class wordlist_controller_WordlistController{constructor(e,t){this.wordLists={},this.availableLangs=e,t.TEXT_QUOTE_SELECTOR_RECEIVED.sub(this.onTextQuoteSelectorReceived.bind(this)),t.HOMONYM_READY.sub(this.onHomonymReady.bind(this)),t.DEFS_READY.sub(this.onDefinitionsReady.bind(this)),t.LEMMA_TRANSL_READY.sub(this.onLemmaTranslationsReady.bind(this))}async initLists(e){if(e)for(let t of this.availableLangs){let r=this.wordLists[t];delete this.wordLists[t];let s=await e.query({dataType:"WordItem",params:{languageCode:t}},{syncDelete:!0});if(s.length>0&&(this.wordLists[t]=new o.WordList(t,s),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)),r)for(let e of r.values)try{let t=e.context.map(e=>new o.TextQuoteSelector(e.languageCode,e.normalizedText,e.prefix,e.suffix,e.source));for(let e of t)this.onTextQuoteSelectorReceived(e);e.homonym&&this.onHomonymReady(e.homonym)}catch(e){console.error("Error replaying cached wordlist item",e)}}else this.wordLists={};return this.wordLists}getWordListItemCount(){let e=0;for(let t of this.availableLangs)this.wordLists[t]&&(e+=this.wordLists[t].size);return e}getWordList(e,t=!0){if(t&&!this._wordListExist(e)){let t=new o.WordList(e,[]);this.wordLists[e]=t,wordlist_controller_WordlistController.evt.WORDLIST_CREATED.pub(t)}return this.wordLists[e]}removeWordList(e){delete this.wordLists[e],wordlist_controller_WordlistController.evt.WORDLIST_DELETED.pub({dataType:"WordItem",params:{languageCode:e}}),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)}removeWordListItem(e,t){let r=this.getWordList(e,!1);if(r){let o=r.deleteWordItem(t);o?(wordlist_controller_WordlistController.evt.WORDITEM_DELETED.pub({dataObj:o}),r.isEmpty&&this.removeWordList(e)):console.error("Trying to delete an absent element")}}getWordListItem(e,t,r=!1){let o,s=this.getWordList(e,r);return s&&(o=s.getWordItem(t,r,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED)),o||console.error(`There are no items for these parameters ${e} ${t}`),o}onHomonymReady(e){let t=this.getWordListItem(e.language,e.targetWord,!0);t.homonym=e,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"shortHomonym"}}),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)}onDefinitionsReady(e){let t=this.getWordListItem(e.homonym.language,e.homonym.targetWord);t?(t.homonym=e.homonym,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"fullHomonym"}})):console.error("Something went wrong: request to add definitions to non-existent item")}onLemmaTranslationsReady(e){let t=this.getWordListItem(e.language,e.targetWord);t?(t.homonym=e,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"fullHomonym"}})):console.error("Something went wrong: request to add translations to non-existent item")}onTextQuoteSelectorReceived(e){let t=this.getWordListItem(e.languageCode,e.normalizedText,!0);t?(t.addContext([e]),wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"context"}}),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.getWordList(t.languageCode))):console.error("Unable to create or retrieve worditem")}updateWordItemImportant(e,t,r){let o=this.getWordListItem(e,t,!1);o?(o.important=r,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:o,params:{segment:"common"}})):console.error("Something went wrong: request to set important flag on non-existent item")}updateAllImportant(e,t){this.getWordList(e,!1).values.forEach(e=>{e.important=t,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:e,params:{segment:"common"}})})}async selectWordItem(e,t){let r=this.getWordListItem(e,t,!1);wordlist_controller_WordlistController.evt.WORDITEM_SELECTED.pub(r)}_wordListExist(e){return Object.keys(this.wordLists).includes(e)}}wordlist_controller_WordlistController.evt={WORDLIST_UPDATED:new o.PsEvent("Wordlist updated",wordlist_controller_WordlistController),WORDLIST_CREATED:new o.PsEvent("Wordlist created",wordlist_controller_WordlistController),WORDLIST_DELETED:new o.PsEvent("Wordlist deleted",wordlist_controller_WordlistController),WORDITEM_SELECTED:new o.PsEvent("WordItem selected",wordlist_controller_WordlistController),WORDITEM_UPDATED:new o.PsEvent("WordItem updated",wordlist_controller_WordlistController),WORDITEM_DELETED:new o.PsEvent("WordItem deleted",wordlist_controller_WordlistController)};class IndexedDBObjectStoresStructure{static _objectStoreTemplate(){return{keyPath:"ID",indexes:[{indexName:"ID",keyPath:"ID",unique:!0},{indexName:"listID",keyPath:"listID",unique:!1},{indexName:"userID",keyPath:"userID",unique:!1},{indexName:"languageCode",keyPath:"languageCode",unique:!1},{indexName:"targetWord",keyPath:"targetWord",unique:!1}]}}static get WordListsCommon(){return IndexedDBObjectStoresStructure._objectStoreTemplate()}static get WordListsContext(){let e=IndexedDBObjectStoresStructure._objectStoreTemplate();return e.indexes.push({indexName:"wordItemID",keyPath:"wordItemID",unique:!1}),e}static get WordListsHomonym(){return IndexedDBObjectStoresStructure._objectStoreTemplate()}static get WordListsFullHomonym(){return IndexedDBObjectStoresStructure._objectStoreTemplate()}}class indexed_db_load_process_IndexedDBLoadProcess{static loadBaseObject(e){return e.currentSession=!1,new o.WordItem(e)}static loadContext(e,t){return Array.isArray(e)||(e=[e]),t.context=o.WordItem.readContext(e),t}static loadHomonym(e,t){let r=e[0].homonym;if(r.lexemes&&Array.isArray(r.lexemes)&&r.lexemes.length>0)t.homonym=o.WordItem.readHomonym(e[0]);else{let s=o.LanguageModelFactory.getLanguageIdFromCode(e[0].languageCode),n=[];if(r.lemmasList){let e=r.lemmasList.split(", ");for(let t of e)n.push(new o.Lexeme(new o.Lemma(t,s),[]))}else n=[new o.Lexeme(new o.Lemma(e[0].targetWord,s),[])];t.homonym=new o.Homonym(n,r.targetWord)}return t}}class worditem_indexeddb_driver_WordItemIndexedDbDriver{constructor(e){this.userId=e,this.storageMap={_loadFirst:"common",common:{type:"segment",sync:!0,objectStoreData:{name:"WordListsCommon",structure:IndexedDBObjectStoresStructure.WordListsCommon},load:indexed_db_load_process_IndexedDBLoadProcess.loadBaseObject,serialize:this._serializeCommon.bind(this),delete:this._segmentSelectQueryByID.bind(this),select:this._segmentSelectQueryByID.bind(this)},context:{type:"segment",sync:!0,objectStoreData:{name:"WordListsContext",structure:IndexedDBObjectStoresStructure.WordListsContext},serialize:this._serializeContext.bind(this),load:indexed_db_load_process_IndexedDBLoadProcess.loadContext,delete:this._segmentSelectQueryByWordItemID.bind(this),select:this._segmentSelectQueryByWordItemID.bind(this)},shortHomonym:{type:"segment",sync:!0,objectStoreData:{name:"WordListsHomonym",structure:IndexedDBObjectStoresStructure.WordListsHomonym},serialize:this._serializeHomonym.bind(this),load:indexed_db_load_process_IndexedDBLoadProcess.loadHomonym,delete:this._segmentSelectQueryByID.bind(this),select:this._segmentSelectQueryByID.bind(this)},fullHomonym:{type:"segment",objectStoreData:{name:"WordListsFullHomonym",structure:IndexedDBObjectStoresStructure.WordListsFullHomonym},serialize:this._serializeHomonymWithFullDefs.bind(this),load:indexed_db_load_process_IndexedDBLoadProcess.loadHomonym,delete:this._segmentSelectQueryByID.bind(this),select:this._segmentSelectQueryByID.bind(this)}}}get dbName(){return"AlpheiosWordLists"}get dbVersion(){return 3}get segmentsSync(){return Object.keys(this.storageMap).filter(e=>"segment"===this.storageMap[e].type&&this.storageMap[e].sync)}get segments(){return Object.keys(this.storageMap).filter(e=>"segment"===this.storageMap[e].type)}get segmentsNotFirst(){return this.segments.filter(e=>e!==this.storageMap._loadFirst)}get objectStores(){return this.allObjectStoreData.map(e=>e.name)}get allObjectStoreData(){return this.segments.map(e=>this.storageMap[e].objectStoreData)}_objectStoreData(e){return this.storageMap[e].objectStoreData}_formatQuery(e,t){return{objectStoreName:this._objectStoreData(e).name,condition:t}}_selectByID(e,t="only"){return{indexName:"ID",value:this._makeStorageID(e),type:t}}_selectByWordItemID(e,t="only"){return{indexName:"wordItemID",value:this._makeStorageID(e),type:t}}_selectByListID(e,t="only"){return{indexName:"listID",value:this._makeStorageListID(e),type:t}}loadFirst(e){return this.loadSegment(this.storageMap._loadFirst,e)}loadSegment(e,t,r){if(this.storageMap[e].load)return this.storageMap[e].load(t,r)}listItemsQuery(e){if(e.languageCode)return this._formatQuery("common",this._selectByListID(e.languageCode));if(e.wordItem)return this._formatQuery("common",this._selectByID(e.wordItem));throw new Error("Invalid query parameters - missing languageCode")}segmentSelectQuery(e,t){if(this.storageMap[e].select)return this.storageMap[e].select(e,t)}_segmentSelectQueryByWordItemID(e,t){return this._formatQuery(e,this._selectByWordItemID(t))}_segmentSelectQueryByID(e,t){return this._formatQuery(e,this._selectByID(t))}segmentDeleteQuery(e,t){if(this.storageMap[e].delete)return this.storageMap[e].delete(e,t)}segmentDeleteManyQuery(e,t){if(t.languageCode)return this._formatQuery(e,this._selectByListID(t.languageCode));throw new Error("Invalid query parameters - missing languageCode")}updateSegmentQuery(e,t){return{objectStoreName:this._objectStoreData(e).name,dataItems:this.storageMap[e].serialize(t)}}_serializeCommon(e){return[{ID:this._makeStorageID(e),listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,important:e.important,createdDT:worditem_indexeddb_driver_WordItemIndexedDbDriver.currentDate}]}_serializeContext(e){let t=[],r=0,o=this._makeStorageID(e);for(let s of e.context){let n={ID:o+"-"+ ++r,listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,wordItemID:o,target:{source:s.source,selector:{type:"TextQuoteSelector",exact:s.text,prefix:s.prefix&&s.prefix.length>0?s.prefix:" ",suffix:s.suffix&&s.suffix.length>0?s.suffix:" ",contextHTML:s.contextHTML,languageCode:s.languageCode}},createdDT:worditem_indexeddb_driver_WordItemIndexedDbDriver.currentDate};t.push(n)}return t}_serializeHomonym(e,t=!1){let r=e.homonym&&e.homonym instanceof o.Homonym?e.homonym.convertToJSONObject(t):null;return r?[{ID:this._makeStorageID(e),listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,homonym:r}]:[]}_serializeHomonymWithFullDefs(e){return this._serializeHomonym(e,!0)}static get currentDate(){let e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"/"+(e.getDate()<10?"0":"")+e.getDate()+" @ "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()}_makeStorageID(e){return this.userId+"-"+e.languageCode+"-"+e.targetWord}_makeStorageListID(e){return this.userId+"-"+e}makeIDCompareWithRemote(e){return e.languageCode+"-"+e.targetWord}getCheckArray(e){return e.map(e=>this.makeIDCompareWithRemote(e))}createFromRemoteData(e){let t=this.loadFirst(e);return e.context&&this.loadSegment("context",e.context,t),e.homonym&&this.loadSegment("shortHomonym",[e],t),t}}class worditem_remotedb_driver_WordItemRemoteDbDriver{constructor(e){this.accessToken=e.accessToken,this.userId=e.userId,this.requestsParams={baseURL:e.endpoints.wordlist,headers:{common:{Authorization:"bearer "+this.accessToken,"Content-Type":"application/json"}}},this.storageMap={post:{url:this._constructPostURL.bind(this),serialize:this._serialize.bind(this),checkResult:this._checkPostResult.bind(this)},put:{url:this._constructPostURL.bind(this),serialize:this._serialize.bind(this),checkResult:this._checkPutResult.bind(this)},get:{url:this._constructGetURL.bind(this),checkResult:this._checkGetResult.bind(this),checkErrorResult:this._checkGetErrorResult.bind(this)},deleteOne:{url:this._constructPostURL.bind(this),checkResult:this._checkPutResult.bind(this)},deleteMany:{url:this._constructDeleteManyURL.bind(this),checkResult:this._checkPutResult.bind(this)}}}get segmentsForUpdate(){return["common","context","shortHomonym"]}get segmentsForMerge(){return["context"]}mergeLocalRemote(e,t){return e=this.mergeCommonPart(e,t),e=this.mergeHommonymPart(e,t),e=this.mergeContextPart(e,t)}mergeCommonPart(e,t){return e.important=e.important||t.important,e}mergeHommonymPart(e,t){return e.homonym=e.homonym||this._serializeHomonym(t),e}mergeContextPart(e,t){let r=e.context||[];for(let s of t.context){e.context.some(e=>o.TextQuoteSelector.readObject(e).isEqual(s))||r.push(this._serializeContextItem(s,e))}return e.context=r,e}_constructPostURL(e){return`/${this._makeStorageID(e)}`}_constructGetURL(e){return e.wordItem?`/${this._makeStorageID(e.wordItem)}`:e.languageCode?`/?languageCode=${e.languageCode}`:void 0}_constructDeleteManyURL(e){return`/?languageCode=${e.languageCode}`}_makeStorageID(e){return e.languageCode+"-"+e.targetWord}_serialize(e){let t={ID:this._makeStorageID(e),listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,important:e.important,createdDT:worditem_remotedb_driver_WordItemRemoteDbDriver.currentDate},r=this._serializeHomonym(e);r&&(t.homonym=r);let o=this._serializeContext(e);return o&&o.length>0?t.context=o:t.context=[],t}_serializeHomonym(e){return e.homonym&&e.homonym.targetWord?{targetWord:e.homonym.targetWord,lemmasList:e.lemmasList}:null}_serializeContext(e){let t=[];for(let r of e.context)t.push(this._serializeContextItem(r,e));return t}_serializeContextItem(e,t){return{target:{source:e.source,selector:{type:"TextQuoteSelector",exact:e.text,prefix:e.prefix&&e.prefix.length>0?e.prefix:" ",suffix:e.suffix&&e.suffix.length>0?e.suffix:" ",languageCode:e.languageCode}},languageCode:t.languageCode,targetWord:t.targetWord,createdDT:worditem_remotedb_driver_WordItemRemoteDbDriver.currentDate}}_checkPostResult(e){return 201===e.status}_checkPutResult(e){return 200===e.status}_checkGetResult(e){return 200!==e.status?[]:Array.isArray(e.data)?e.data.map(e=>e.body?e.body:e):[e.data]}_checkGetErrorResult(e){return!(!e.response||!e.response.data||"Item not found."!==e.response.data.error)&&[]}static get currentDate(){let e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"/"+(e.getDate()<10?"0":"")+e.getDate()+" @ "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()}getCheckArray(e){return e.map(e=>this._makeStorageID(e))}}class indexed_db_adapter_IndexedDBAdapter{constructor(e){this.available=this._initIndexedDBNamespaces(),this.dbDriver=e,this.errors=[]}async checkAndUpdate(e,t,r){if(("context"===t||!t)&&r.length>0&&r[0].context&&Array.isArray(r[0].context)){e.context=[];for(let t of r[0].context)e.context.push(o.WordItem.readContext([t])[0])}return t||(t=this.dbDriver.segmentsSync),0===(await this.query({wordItem:e})).length&&t&&"common"!==t&&await this.update(e,{segment:"common"}),await this.update(e,{segment:t})}async create(e){try{let t,r=this.dbDriver.segments;for(let o of r)if(!(t=await this.update(e,{segment:o})))throw new Error(`Unknown problems with updating segment ${o}`);return t>0}catch(e){return e&&this.errors.push(e),!1}}async deleteMany(e){try{let t={};for(let r of this.dbDriver.segments){let o=this.dbDriver.segmentDeleteManyQuery(r,e),s=await this._deleteFromStore(o);t[r]=s}return t}catch(e){return e&&this.errors.push(e),!1}}async deleteOne(e){try{for(let t of this.dbDriver.segments){let r=this.dbDriver.segmentDeleteQuery(t,e);await this._deleteFromStore(r)}return!0}catch(e){return e&&this.errors.push(e),!1}}async update(e,t){try{let r,o=t&&t.segment?Array.isArray(t.segment)?t.segment:[t.segment]:[];0===o.length&&(o=this.dbDriver.segments);for(let t of o){let o=this.dbDriver.updateSegmentQuery(t,e);r=!(o.dataItems&&o.dataItems.length>0)||await this._set(o)}return r}catch(e){return void(e&&this.errors.push(e))}}async query(e){try{let t=this.dbDriver.listItemsQuery(e),r=await this._getFromStore(t),o=[];for(let e of r){let t=this.dbDriver.loadFirst(e);for(let e of this.dbDriver.segmentsNotFirst){let r=this.dbDriver.segmentSelectQuery(e,t),o=await this._getFromStore(r);o.length>0&&this.dbDriver.loadSegment(e,o,t)}o.push(t)}return o}catch(e){return e&&this.errors.push(e),!1}}async clear(){let e=this;return await new Promise((t,r)=>{let o=e.indexedDB.open(e.dbDriver.dbName,e.dbDriver.dbVersion);o.onsuccess=(o=>{try{let s=o.target.result,n=e.dbDriver.objectStores,a=n.length;for(let o of n){let n=s.transaction([o],"readwrite").objectStore(o).clear();n.onsuccess=function(e){console.warn(`store ${o} cleared`),0===(a-=1)&&t(!0)},n.onerror=function(t){e.errors.push(t.target),r(t.target)}}}catch(t){e.errors.push(t),r(t)}}),o.onerror=(t=>{e.errors.push(t.target),r(t.target)})})}_initIndexedDBNamespaces(){return this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||{READ_WRITE:"readwrite"},this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,!!this.indexedDB||(console.warn("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),!1)}_openDatabaseRequest(){let e=this.indexedDB.open(this.dbDriver.dbName,this.dbDriver.dbVersion);return e.onupgradeneeded=(e=>{const t=e.target.result,r=e.target.transaction;this._createObjectStores(t,r)}),e}_createObjectStores(e,t){try{for(let r of this.dbDriver.allObjectStoreData){let o;o=e.objectStoreNames.contains(r.name)?t.objectStore(r.name):e.createObjectStore(r.name,{keyPath:r.structure.keyPath}),r.structure.indexes.forEach(e=>{o.indexNames.contains(e.indexName)||o.createIndex(e.indexName,e.keyPath,{unique:e.unique})})}}catch(e){this.errors.push(e)}}async _set(e){let t=this;return await new Promise((r,o)=>{let s=this._openDatabaseRequest();s.onsuccess=(async t=>{const o=t.target.result;let s=await this._putItem(o,e);r(s)}),s.onerror=(e=>{t.errors.push(e.target),o()})})}async _putItem(e,t){let r=this;return await new Promise((o,s)=>{try{const n=e.transaction([t.objectStoreName],"readwrite");n.onerror=(e=>{r.errors.push(e.target),s()});const a=n.objectStore(t.objectStoreName);let i=t.dataItems.length;for(let e of t.dataItems){const t=a.put(e);t.onsuccess=(()=>{0===(i-=1)&&o(!0)}),t.onerror=(()=>{r.errors.push(event.target),s()})}0===i&&o(!0)}catch(e){if(e)return void r.errors.push(e)}})}async _getFromStore(e){let t=this;return await new Promise((r,o)=>{let s=this._openDatabaseRequest();s.onsuccess=(s=>{try{const n=s.target.result.transaction([e.objectStoreName]).objectStore(e.objectStoreName).index(e.condition.indexName),a=this.IDBKeyRange[e.condition.type](e.condition.value),i=n.getAll(a,0);i.onsuccess=(e=>{r(e.target.result)}),i.onerror=(e=>{t.errors.push(e.target),o()})}catch(e){t.errors.push(e),o()}}),s.onerror=(e=>{o(e.target)})})}async _deleteFromStore(e){let t=this;return await new Promise((r,o)=>{let s=this._openDatabaseRequest();s.onsuccess=(s=>{try{const n=s.target.result.transaction([e.objectStoreName],"readwrite").objectStore(e.objectStoreName).index(e.condition.indexName),a=this.IDBKeyRange[e.condition.type](e.condition.value);let i=n.openCursor(a),u=0;i.onsuccess=(e=>{const s=e.target.result;if(s){const e=s.delete();e.onerror=(e=>{t.errors.push(e.target),o()}),e.onsuccess=(e=>{u+=1}),s.continue()}else r(u)})}catch(e){t.errors.push(e),o()}}),s.onerror=(e=>{t.errors.push(e.target),o()})})}}var s=r(2),n=r.n(s);class remote_db_adapter_RemoteDBAdapter{constructor(e){this.dbDriver=e,this.available=this._checkRemoteDBAvailability(),this.errors=[]}_checkRemoteDBAvailability(){return Boolean(this.dbDriver.accessToken)&&Boolean(this.dbDriver.userId)&&Boolean(this.dbDriver.requestsParams.headers)}async checkAndUpdate(e,t){let r=this.dbDriver.segmentsForUpdate,o=this.dbDriver.segmentsForMerge;Array.isArray(t)||(t=[t]);let s=!1,n=!1;for(let e of t)r.includes(e)&&(s=!0),o.includes(e)&&(n=!0);if(s){let t,r=[];return n&&(r=await this.query({wordItem:e})),t=r&&0!==r.length?this.dbDriver.mergeLocalRemote(r[0],e):e,await this.update(t),[t]}return[]}async create(e){try{let t=this.dbDriver.storageMap.post.url(e),r=this.dbDriver.storageMap.post.serialize(e),o=await n.a.post(t,r,this.dbDriver.requestsParams);return this.dbDriver.storageMap.post.checkResult(o)}catch(e){return console.error(e),e&&this.errors.push(e),!1}}async update(e){try{let t,r=this.dbDriver.storageMap.put.url(e);t=!e.constructor.name.match(/WordItem/)?e:this.dbDriver.storageMap.put.serialize(e);let o=await n.a.put(r,t,this.dbDriver.requestsParams);return this.dbDriver.storageMap.put.checkResult(o)}catch(e){return console.error(e),e&&this.errors.push(e),!1}}async deleteOne(e){try{let t=this.dbDriver.storageMap.deleteOne.url(e),r=await n.a.delete(t,this.dbDriver.requestsParams);return this.dbDriver.storageMap.deleteOne.checkResult(r)}catch(e){return e&&this.errors.push(e),!1}}async deleteMany(e){try{let t=this.dbDriver.storageMap.deleteMany.url(e),r=await n.a.delete(t,this.dbDriver.requestsParams);return this.dbDriver.storageMap.deleteMany.checkResult(r)}catch(e){return e&&this.errors.push(e),!1}}async query(e){try{let t=this.dbDriver.storageMap.get.url(e),r=await n.a.get(t,this.dbDriver.requestsParams);return this.dbDriver.storageMap.get.checkResult(r)}catch(e){let t=this.dbDriver.storageMap.get.checkErrorResult(e);return!t&&e&&e&&this.errors.push(e),t}}}class user_data_manager_UserDataManager{constructor(e,t){this.auth=e,this.subscriptions=[],t&&(this.subscriptions.push(t.WORDITEM_UPDATED.sub(this.update.bind(this))),this.subscriptions.push(t.WORDITEM_DELETED.sub(this.delete.bind(this))),this.subscriptions.push(t.WORDLIST_DELETED.sub(this.deleteMany.bind(this)))),this.blocked=!1,this.requestsQueue=[]}clear(){this.blocked&&console.error("Destroying User Data Manager with requests pending");for(let e of this.subscriptions)e()}_localStorageAdapter(e){let t=new user_data_manager_UserDataManager.LOCAL_DRIVER_CLASSES[e](this.auth.userId);return new indexed_db_adapter_IndexedDBAdapter(t)}_remoteStorageAdapter(e){let t=new user_data_manager_UserDataManager.REMOTE_DRIVER_CLASSES[e](this.auth);return new remote_db_adapter_RemoteDBAdapter(t)}checkAdapters(e,t,r){let o=!1,s=!1;return"remote"===r.source?(o=!0,s=t.available):"local"===r.source?(o=e.available,s=!0):(o=e.available,s=t.available,e.available||this.printErrorAdapterUnvailable(e),t.available||this.printErrorAdapterUnvailable(t)),o&&s}printErrorAdapterUnvailable(e){console.error(`Adapter is not available - ${e.constructor.name}`)}async update(e,t={}){if(this.blocked)this.requestsQueue.push({method:"update",data:e,params:t});else try{t.source=t.source||"both";let r=this.defineConstructorName(e.dataObj.constructor.name),o=this._localStorageAdapter(r),s=this._remoteStorageAdapter(r),n=!1,a=e.params&&e.params.segment?e.params.segment:o.dbDriver.segments;if(this.checkAdapters(o,s,t)){if(this.blocked=!0,"local"===t.source)n=await o.update(e.dataObj,e.params);else if("remote"===t.source)n=await s.update(e.dataObj,e.params);else{let t=await s.checkAndUpdate(e.dataObj,a);n=await o.checkAndUpdate(e.dataObj,a,t)}this.printErrors(s),this.printErrors(o),this.blocked=!1,this.checkRequestQueue()}return n}catch(e){console.error("Some errors happen on updating data in IndexedDB or RemoteDBAdapter",e)}}async delete(e,t={}){if(this.blocked)this.requestsQueue.push({method:"delete",data:e,params:t});else try{this.blocked=!0;let r=this.defineConstructorName(e.dataObj.constructor.name),o=this._localStorageAdapter(r),s=this._remoteStorageAdapter(r),n=!1,a=!1;return this.checkAdapters(o,s,t)&&(this.blocked=!0,n=!0,a=!0,"local"!==t.source&&(n=await s.deleteOne(e.dataObj)),"remote"!==t.source&&(a=await o.deleteOne(e.dataObj)),this.printErrors(s),this.printErrors(o),this.blocked=!1,this.checkRequestQueue()),n&&a}catch(e){console.error("Some errors happen on deleting item from IndexedDB or RemoteDBAdapter",e.message)}}async deleteMany(e,t={}){if(this.blocked)this.requestsQueue.push({method:"deleteMany",data:e,params:t});else try{let r=this._remoteStorageAdapter(e.dataType),o=this._localStorageAdapter(e.dataType),s=!1,n=!1;return this.checkAdapters(o,r,t)&&(s=!0,n=!0,this.blocked=!0,"local"!==t.source&&(n=await r.deleteMany(e.params)),"remote"!==t.source&&(s=await o.deleteMany(e.params)),this.printErrors(r),this.printErrors(o),console.warn("Result of deleted many from IndexedDB",s),this.blocked=!1,this.checkRequestQueue()),s&&n}catch(e){console.error("Some errors happen on deleting data from IndexedDB or RemoteDBAdapter",e.message)}}async query(e,t={}){try{t.type=t.type||"short",t.source=t.source||"both",t.syncDelete=t.syncDelete||!1;let r,o=this._remoteStorageAdapter(e.dataType),s=this._localStorageAdapter(e.dataType),n=[];if("local"===t.source)n=await s.query(e.params);else if("remote"===t.source){r=await o.query(e.params);for(let e of r)n.push(s.dbDriver.createFromRemoteData(e))}else{if(r=await o.query(e.params),"full"===t.type){for(let t of r)await s.checkAndUpdate(t,e.params.segment,[t]);n=await s.query(e.params)}else{r=await o.query(e.params);for(let e of r){let t=s.dbDriver.createFromRemoteData(e);n.push(t),s.checkAndUpdate(t,null,[e])}}t.syncDelete&&e.params.languageCode&&this.deleteAbsentInRemote(s,r,e.params.languageCode)}return this.printErrors(o),this.printErrors(s),n}catch(e){console.error("Some errors happen on quiring data from IndexedDB or RemoteDBAdapter",e.message)}}async deleteAbsentInRemote(e,t,r){let o=await e.query({languageCode:r});for(let r of o){let o=e.dbDriver.makeIDCompareWithRemote(r);t.find(e=>e.ID===o)||(console.warn("Need to delete from local",o),this.delete({dataObj:r}))}}printErrors(e){e.errors&&e.errors.length>0&&e.errors.forEach(e=>console.error(`Print error - ${e}`))}checkRequestQueue(){if(this.requestsQueue.length>0){let e=this.requestsQueue.shift();this[e.method](e.data,e.params)}}defineConstructorName(e){let t,r=e.substr(0,1);if(r==r.toUpperCase())t=e;else{let r=e.split("_").length-1,o=e.replace("_","").toLowerCase().length/2;t=e.substr(-(o+r-2))}return t}}user_data_manager_UserDataManager.LOCAL_DRIVER_CLASSES={WordItem:worditem_indexeddb_driver_WordItemIndexedDbDriver},user_data_manager_UserDataManager.REMOTE_DRIVER_CLASSES={WordItem:worditem_remotedb_driver_WordItemRemoteDbDriver},r.d(t,"WordlistController",function(){return wordlist_controller_WordlistController}),r.d(t,"UserDataManager",function(){return user_data_manager_UserDataManager})}])});